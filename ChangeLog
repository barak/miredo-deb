------------------------------------------------------------------------
r1761 | remi | 2006-09-18 18:39:35 +0300 (Mon, 18 Sep 2006) | 2 lines
Changed paths:
   A /tags/1.0.2 (from /trunk:1760)

Tag release 1.0.2

------------------------------------------------------------------------
r1760 | remi | 2006-09-18 18:38:12 +0300 (Mon, 18 Sep 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync PO files for release 1.0.2

------------------------------------------------------------------------
r1759 | remi | 2006-09-18 18:33:53 +0300 (Mon, 18 Sep 2006) | 2 lines
Changed paths:
   A /trunk/packages/debian/miredo-server.postrm (from /trunk/packages/debian/miredo.postrm:1758)

Similarly, suppress miredo-server upon purge

------------------------------------------------------------------------
r1758 | remi | 2006-09-18 18:31:02 +0300 (Mon, 18 Sep 2006) | 2 lines
Changed paths:
   A /trunk/packages/debian/miredo.postrm (from /trunk/packages/debian/miredo.postinst:1757)

Delete useless miredo user upon purge

------------------------------------------------------------------------
r1757 | remi | 2006-09-18 18:22:06 +0300 (Mon, 18 Sep 2006) | 3 lines
Changed paths:
   M /trunk/packages/debian/miredo.default

Because of the poor job of handling /dev/net/tun within the udev framework,
we cannot start miredo automatically after install.

------------------------------------------------------------------------
r1756 | remi | 2006-09-18 18:21:28 +0300 (Mon, 18 Sep 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

News (so far) for 1.0.2

------------------------------------------------------------------------
r1755 | remi | 2006-09-18 17:32:28 +0300 (Mon, 18 Sep 2006) | 3 lines
Changed paths:
   M /trunk/packages/debian/control

Revert to old-style "not architecture" style dependency for libcap
since not the whole infrastructure support "linux-any" yet.

------------------------------------------------------------------------
r1754 | remi | 2006-09-18 17:25:04 +0300 (Mon, 18 Sep 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/miredo-server.init
   M /trunk/packages/debian/miredo.init

Fix chmod invocation (ahem, shame on me)

------------------------------------------------------------------------
r1753 | remi | 2006-09-17 20:51:32 +0300 (Sun, 17 Sep 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control

Add versioned depency on dpkg-dev because of "linux-any"

------------------------------------------------------------------------
r1752 | remi | 2006-09-17 20:43:37 +0300 (Sun, 17 Sep 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/miredo-server.init
   M /trunk/packages/debian/miredo.init

(Partial?) fix LSB initscript fix

------------------------------------------------------------------------
r1751 | remi | 2006-09-17 20:41:12 +0300 (Sun, 17 Sep 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control

Fix debhelper dependency

------------------------------------------------------------------------
r1750 | remi | 2006-09-17 09:51:30 +0300 (Sun, 17 Sep 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/miredo-server.init
   M /trunk/packages/debian/miredo.init

Fix initscripts when /var/run is tmpfs

------------------------------------------------------------------------
r1749 | remi | 2006-09-16 19:46:35 +0300 (Sat, 16 Sep 2006) | 2 lines
Changed paths:
   M /trunk/compat/barrier.h

Warning fix

------------------------------------------------------------------------
r1748 | remi | 2006-09-16 19:42:53 +0300 (Sat, 16 Sep 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Warning fix

------------------------------------------------------------------------
r1747 | remi | 2006-09-16 19:34:46 +0300 (Sat, 16 Sep 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Thread cancellation safety fix (typo!)

------------------------------------------------------------------------
r1746 | remi | 2006-09-16 19:20:14 +0300 (Sat, 16 Sep 2006) | 3 lines
Changed paths:
   M /trunk/compat/barrier.h
   M /trunk/compat/pthread_barrier_wait.c

Don't redefine pthread_barrier_*; use compat_pthread_barrier_* instead.
Might fix FreeBSD-6-latest sparc64 problem.

------------------------------------------------------------------------
r1745 | remi | 2006-09-12 18:59:42 +0300 (Tue, 12 Sep 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/miredo.init

Fix configuration checking with restart and reload in Debian initscript

------------------------------------------------------------------------
r1744 | remi | 2006-09-03 22:22:35 +0300 (Sun, 03 Sep 2006) | 4 lines
Changed paths:
   M /trunk/compat/clock_nanosleep.c

Fix clock_nanosleep return value:
clock_nanosleep shall return an error code (like pthread_*),
rather than return -1 and set errno, in case of error.

------------------------------------------------------------------------
r1743 | remi | 2006-09-03 19:23:52 +0300 (Sun, 03 Sep 2006) | 4 lines
Changed paths:
   M /trunk/packages/debian/rules

Debian cross-compilation fixes:
 - forcefully disable binreloc whose checks explode
 - do not run the testsuite when cross-compiling

------------------------------------------------------------------------
r1742 | remi | 2006-09-03 19:22:45 +0300 (Sun, 03 Sep 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Fix spelling mistake that hindered error in libJudy checks

------------------------------------------------------------------------
r1741 | remi | 2006-09-03 19:21:10 +0300 (Sun, 03 Sep 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/test_diag.c

Mark libtun6-diagnose as skipped rather than succesful if not allowed

------------------------------------------------------------------------
r1740 | remi | 2006-09-03 08:59:56 +0300 (Sun, 03 Sep 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am

Increase libteredo revision

------------------------------------------------------------------------
r1739 | remi | 2006-09-03 08:57:21 +0300 (Sun, 03 Sep 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.c

Fix return value and deadlock from teredo_set_prefix in client mode
(this is never triggered by miredo).

------------------------------------------------------------------------
r1738 | remi | 2006-09-02 21:40:32 +0300 (Sat, 02 Sep 2006) | 3 lines
Changed paths:
   M /trunk/compat/Makefile.am
   M /trunk/compat/fixups.h

- Fix spelling mistake
- Distribute missing file in tarball

------------------------------------------------------------------------
r1737 | remi | 2006-09-02 20:38:26 +0300 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/compat/Makefile.am
   A /trunk/compat/fixups.h
   M /trunk/configure.ac

Separate "hidden" compatibility fixes from configure.ac

------------------------------------------------------------------------
r1736 | remi | 2006-09-02 20:37:47 +0300 (Sat, 02 Sep 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Fallback to real-time clock properly when pthread_condattr_setclock is
present

------------------------------------------------------------------------
r1735 | remi | 2006-09-02 20:11:20 +0300 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Fix one barrier leak in maintainance procedure.

------------------------------------------------------------------------
r1734 | remi | 2006-09-02 19:48:56 +0300 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/changelog

Bump version number here as well

------------------------------------------------------------------------
r1733 | remi | 2006-09-02 19:47:22 +0300 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/compat
   M /trunk/packages/debian/control

No -dbg package anymore. We can switch back to DH compat level 4.

------------------------------------------------------------------------
r1732 | remi | 2006-09-02 18:49:30 +0300 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   D /trunk/compat/barrier.c
   M /trunk/compat/barrier.h
   A /trunk/compat/pthread_barrier_wait.c (from /trunk/compat/barrier.c:1731)
   M /trunk/configure.ac

Cleanup pthread_barrier* replacement

------------------------------------------------------------------------
r1731 | remi | 2006-09-02 18:42:28 +0300 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

This is development tree toward version 1.0.2

------------------------------------------------------------------------
r1729 | remi | 2006-09-02 17:36:59 +0300 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

News for release 1.0.1

------------------------------------------------------------------------
r1728 | remi | 2006-09-02 17:36:20 +0300 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/rules

Minor tweaks

------------------------------------------------------------------------
r1727 | remi | 2006-09-01 20:46:59 +0300 (Fri, 01 Sep 2006) | 3 lines
Changed paths:
   M /trunk/packages/debian/control

Build depend on libcap-dev on linux-any rather than !hurd-i386 !kfreebsd-i386
This might possibly fix support for kfreebsd-amd64 and any future arch

------------------------------------------------------------------------
r1726 | remi | 2006-08-27 11:13:18 +0300 (Sun, 27 Aug 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/init.c
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/peerlist.c
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/server.c
   M /trunk/libteredo/stub.c
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/test/hmac.c
   M /trunk/libteredo/test/list.c
   M /trunk/libteredo/test/stresslist.c
   M /trunk/libteredo/v4global.c
   M /trunk/libtun6/diag.c
   M /trunk/libtun6/test_diag.c
   M /trunk/libtun6/tun6.c
   M /trunk/src/addrwatch.c
   M /trunk/src/checkconf.c
   M /trunk/src/conf.c
   M /trunk/src/isatap.c
   M /trunk/src/main.c
   M /trunk/src/miredo.c
   M /trunk/src/privproc.c
   M /trunk/src/relay.c
   M /trunk/src/server.c

All fixes for $(CC) -Wundef (basically s/#if /#ifdef/ where appropriate)

------------------------------------------------------------------------
r1725 | remi | 2006-08-25 18:25:38 +0300 (Fri, 25 Aug 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/rules

Don't update ChangeLog from SVN while building Debian package

------------------------------------------------------------------------
r1724 | remi | 2006-08-25 18:23:44 +0300 (Fri, 25 Aug 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control

Add homepage reference in the Debian description

------------------------------------------------------------------------
r1723 | remi | 2006-08-25 18:15:33 +0300 (Fri, 25 Aug 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/rules

Comment out useless rule.

------------------------------------------------------------------------
r1722 | remi | 2006-08-25 18:14:52 +0300 (Fri, 25 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Revert extraneous commited file

------------------------------------------------------------------------
r1721 | remi | 2006-08-25 18:13:52 +0300 (Fri, 25 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/packages/debian/changelog
   M /trunk/packages/debian/control
   D /trunk/packages/debian/isatapd.default
   D /trunk/packages/debian/isatapd.dirs
   D /trunk/packages/debian/isatapd.init
   D /trunk/packages/debian/isatapd.install
   D /trunk/packages/debian/isatapd.postinst
   D /trunk/packages/debian/libteredo-dev.install
   D /trunk/packages/debian/libteredo3.install
   D /trunk/packages/debian/libtun6-0.install
   D /trunk/packages/debian/libtun6-dev.install
   M /trunk/packages/debian/miredo-server.dirs
   M /trunk/packages/debian/miredo-server.install
   A /trunk/packages/debian/miredo.conf
   M /trunk/packages/debian/miredo.install
   M /trunk/packages/debian/rules

Simplify Debian packaging

------------------------------------------------------------------------
r1720 | remi | 2006-08-24 20:01:52 +0300 (Thu, 24 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Fix sample conf installation

------------------------------------------------------------------------
r1719 | remi | 2006-08-24 19:52:36 +0300 (Thu, 24 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Fix typo

------------------------------------------------------------------------
r1718 | remi | 2006-08-24 19:38:19 +0300 (Thu, 24 Aug 2006) | 3 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/libteredo.sym
   M /trunk/libteredo/test/Makefile.am

Unexport internal teredo_list_* which were the last remaining exported
internal symbols.

------------------------------------------------------------------------
r1717 | remi | 2006-08-24 19:09:49 +0300 (Thu, 24 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/libteredo.sym

Remove non-existant symbol from export list

------------------------------------------------------------------------
r1716 | remi | 2006-08-24 19:07:34 +0300 (Thu, 24 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/compat/Makefile.am
   M /trunk/doc/Makefile.am
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/test/Makefile.am
   M /trunk/libtun6/Makefile.am
   M /trunk/m4/Makefile.am
   M /trunk/misc/Makefile.am
   M /trunk/src/Makefile.am

Remove expanded keywords from Makefiles to avoid extra rebuild

------------------------------------------------------------------------
r1715 | remi | 2006-08-24 19:05:53 +0300 (Thu, 24 Aug 2006) | 3 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/NEWS
   M /trunk/configure.ac
   M /trunk/misc
   M /trunk/misc/Makefile.am
   D /trunk/misc/isatapd.conf
   A /trunk/misc/isatapd.conf-in (from /trunk/misc/isatapd.conf:1708)
   D /trunk/misc/miredo-server.conf
   A /trunk/misc/miredo-server.conf-in (from /trunk/misc/miredo-server.conf:1708)
   D /trunk/misc/miredo.conf
   A /trunk/misc/miredo.conf-in (from /trunk/misc/miredo.conf:1708)

Support for customizing sample config installation directory
separately from actual system configuration directory

------------------------------------------------------------------------
r1714 | remi | 2006-08-24 18:41:08 +0300 (Thu, 24 Aug 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.c

Fix regression test

------------------------------------------------------------------------
r1713 | remi | 2006-08-24 18:38:19 +0300 (Thu, 24 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/stresslist.c

Limit memory consumption of stress test

------------------------------------------------------------------------
r1712 | remi | 2006-08-24 18:09:15 +0300 (Thu, 24 Aug 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Begin development of version 1.0.1

------------------------------------------------------------------------
r1711 | remi | 2006-08-22 18:17:58 +0300 (Tue, 22 Aug 2006) | 2 lines
Changed paths:
   A /trunk/packages/debian/libteredo-dev.install (from /trunk/packages/debian/libteredo0-dev.install:1710)
   D /trunk/packages/debian/libteredo0-dev.install
   D /trunk/packages/debian/libteredo0.install
   A /trunk/packages/debian/libteredo3.install (from /trunk/packages/debian/libteredo0.install:1710)
   D /trunk/packages/debian/libtun6-0-dev.install
   A /trunk/packages/debian/libtun6-dev.install (from /trunk/packages/debian/libtun6-0-dev.install:1710)

Fix previous commit

------------------------------------------------------------------------
r1710 | remi | 2006-08-22 18:12:03 +0300 (Tue, 22 Aug 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/changelog
   M /trunk/packages/debian/control
   M /trunk/packages/debian/rules

Debian package for 1.0.0

------------------------------------------------------------------------
r1708 | remi | 2006-08-21 23:13:52 +0300 (Mon, 21 Aug 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

News for release 1.0.0

------------------------------------------------------------------------
r1707 | remi | 2006-08-21 23:11:08 +0300 (Mon, 21 Aug 2006) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync for release 1.0.0

------------------------------------------------------------------------
r1706 | remi | 2006-08-21 20:04:32 +0300 (Mon, 21 Aug 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README

Documentation for 1.0.0

------------------------------------------------------------------------
r1705 | remi | 2006-08-21 20:04:08 +0300 (Mon, 21 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/mire.c
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/peerlist.c
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/server.c
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/test/hmac.c
   M /trunk/libteredo/test/list.c
   M /trunk/libteredo/test/stresslist.c
   M /trunk/libteredo/v4global.c
   M /trunk/src/checkconf.c
   M /trunk/src/conf.c
   M /trunk/src/isatap.c
   M /trunk/src/miredo.c
   M /trunk/src/privproc.c
   M /trunk/src/relay.c
   M /trunk/src/server.c

All: replace stdint.h with more portable (and as standard) inttypes.h

------------------------------------------------------------------------
r1704 | remi | 2006-08-21 19:57:18 +0300 (Mon, 21 Aug 2006) | 3 lines
Changed paths:
   M /trunk/configure.ac

Restore configure invocation with --version
(but that's an ugly trick)

------------------------------------------------------------------------
r1703 | remi | 2006-08-21 19:18:02 +0300 (Mon, 21 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am

Forgot this file in [1701]

------------------------------------------------------------------------
r1702 | remi | 2006-08-21 19:17:39 +0300 (Mon, 21 Aug 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Avoid useless C++ and F77 configure checks

------------------------------------------------------------------------
r1701 | remi | 2006-08-21 19:16:21 +0300 (Mon, 21 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/libteredo/relay.c
   A /trunk/libteredo/stub.c
   M /trunk/libteredo/tunnel.h

Remove quite broken teredo_register_readset() API.

------------------------------------------------------------------------
r1700 | remi | 2006-08-21 19:00:51 +0300 (Mon, 21 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Include inttypes.h instead of stdint.h (more portable)

------------------------------------------------------------------------
r1699 | remi | 2006-08-16 21:51:08 +0300 (Wed, 16 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Fix compilation without client support

------------------------------------------------------------------------
r1698 | remi | 2006-08-16 21:49:56 +0300 (Wed, 16 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Fix return value of initialization function

------------------------------------------------------------------------
r1697 | remi | 2006-08-16 20:48:18 +0300 (Wed, 16 Aug 2006) | 3 lines
Changed paths:
   M /trunk/configure.ac

- Remember PTHREAD_LDFLAGS and PTHREAD_LIBS
- Support PTHREAD_CFLAGS from FreeBSD

------------------------------------------------------------------------
r1696 | remi | 2006-08-16 19:43:26 +0300 (Wed, 16 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c

FreeBSD 4 compile fix

------------------------------------------------------------------------
r1695 | remi | 2006-08-15 23:20:13 +0300 (Tue, 15 Aug 2006) | 2 lines
Changed paths:
   M /trunk/misc

Fix svn:ignore

------------------------------------------------------------------------
r1693 | remi | 2006-08-15 23:14:29 +0300 (Tue, 15 Aug 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

News for release 0.9.9

------------------------------------------------------------------------
r1692 | remi | 2006-08-15 23:13:58 +0300 (Tue, 15 Aug 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync PO files for release 0.9.9

------------------------------------------------------------------------
r1691 | remi | 2006-08-15 23:13:17 +0300 (Tue, 15 Aug 2006) | 5 lines
Changed paths:
   M /trunk/libteredo/peerlist.c
   M /trunk/libteredo/teredo.h
   M /trunk/libteredo/test/Makefile.am
   D /trunk/libteredo/test/addrcmp.c

Kill t6cmp():
- will allow unaligned comparisons,
- it used to be buggy, so it's not such a bad idea,
- is not used with libJudy, and libJudy is HIGHLY recommended.

------------------------------------------------------------------------
r1690 | remi | 2006-08-14 22:53:49 +0300 (Mon, 14 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/Makefile.am

Increment libtun6 revision

------------------------------------------------------------------------
r1689 | remi | 2006-08-14 22:53:00 +0300 (Mon, 14 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am

Increment libteredo revision number.

------------------------------------------------------------------------
r1688 | remi | 2006-08-14 22:52:17 +0300 (Mon, 14 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/tunnel.h

Restore libteredo_set_relay_mode().

------------------------------------------------------------------------
r1687 | remi | 2006-08-14 22:51:24 +0300 (Mon, 14 Aug 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.c

Revert [1682]

------------------------------------------------------------------------
r1686 | remi | 2006-08-14 22:46:00 +0300 (Mon, 14 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Define and future-proof teredo_set_prefix().

------------------------------------------------------------------------
r1685 | remi | 2006-08-14 21:39:07 +0300 (Mon, 14 Aug 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control

Lower priority of -dev and -dbg packages

------------------------------------------------------------------------
r1684 | remi | 2006-08-14 21:14:51 +0300 (Mon, 14 Aug 2006) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/TODO

Some documentation update

------------------------------------------------------------------------
r1683 | remi | 2006-08-14 20:57:17 +0300 (Mon, 14 Aug 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Fix typo causing linking error on NetBSD

------------------------------------------------------------------------
r1682 | remi | 2006-08-13 19:43:44 +0300 (Sun, 13 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/tunnel.h
   M /trunk/src/relay.c

Deprecate short-lived libteredo_set_relay_mode().

------------------------------------------------------------------------
r1681 | remi | 2006-08-13 19:22:46 +0300 (Sun, 13 Aug 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libtun6/tun6.c

Fix for NetBSD that lacks devname_r

------------------------------------------------------------------------
r1680 | remi | 2006-08-13 18:48:35 +0300 (Sun, 13 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

C99 cosmetic

------------------------------------------------------------------------
r1679 | remi | 2006-08-13 18:46:41 +0300 (Sun, 13 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Fix comment

------------------------------------------------------------------------
r1678 | remi | 2006-08-13 18:36:54 +0300 (Sun, 13 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Clean up

------------------------------------------------------------------------
r1677 | remi | 2006-08-13 14:42:08 +0300 (Sun, 13 Aug 2006) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/configure.ac

Bump version number

------------------------------------------------------------------------
r1674 | remi | 2006-08-12 20:28:35 +0300 (Sat, 12 Aug 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO

Updates toward 0.9.8

------------------------------------------------------------------------
r1673 | remi | 2006-08-12 20:28:15 +0300 (Sat, 12 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Remove useless #include

------------------------------------------------------------------------
r1672 | remi | 2006-08-12 11:40:12 +0300 (Sat, 12 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c

Adapt initialization in relay-mode since it needs HMAC also now

------------------------------------------------------------------------
r1671 | remi | 2006-08-12 11:31:13 +0300 (Sat, 12 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/security.c
   M /trunk/libteredo/test/Makefile.am

Fix linking with --disable-teredo-client

------------------------------------------------------------------------
r1670 | remi | 2006-08-12 11:23:05 +0300 (Sat, 12 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Only try symmetric traversal check with bubbles

------------------------------------------------------------------------
r1669 | remi | 2006-08-12 11:15:07 +0300 (Sat, 12 Aug 2006) | 7 lines
Changed paths:
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay.c

Support fairly secure (62-bits of entropy) traversal between nodes behind
a symmetric NAT and nodes behind full/address cone NATs.

This is an evil deviation from the Teredo RFC, but it is designed in a way
that is fully interoperable (the change is transparent to the symmetric NAT
node), and only requires update of the cone-side Teredo peer.

------------------------------------------------------------------------
r1668 | remi | 2006-08-12 10:54:35 +0300 (Sat, 12 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h

Suppress never ever used API

------------------------------------------------------------------------
r1667 | remi | 2006-08-11 23:33:16 +0300 (Fri, 11 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

More cleanup

------------------------------------------------------------------------
r1666 | remi | 2006-08-11 23:16:17 +0300 (Fri, 11 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Cosmetic change

------------------------------------------------------------------------
r1665 | remi | 2006-08-11 18:51:10 +0300 (Fri, 11 Aug 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/libteredo/test/hmac.c

Suppress useless RNG API, and hide it behind the HMAC one.
No longer keep /dev/random after startup.

------------------------------------------------------------------------
r1664 | remi | 2006-08-11 18:31:07 +0300 (Fri, 11 Aug 2006) | 6 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h

Replace nonce with a 64-bits HMAC to authenticate server.

Not only is this probably more secure than reusing the nonce for a full hour,
it also remove the dependency on /dev/random while running (we only need it
at startup).

------------------------------------------------------------------------
r1663 | remi | 2006-08-11 18:14:24 +0300 (Fri, 11 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h

Adding provisional API to replace nonce generation with hashing.

------------------------------------------------------------------------
r1662 | remi | 2006-08-10 19:39:45 +0300 (Thu, 10 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Prepare to re-use HMAC code.

------------------------------------------------------------------------
r1661 | remi | 2006-08-10 19:08:01 +0300 (Thu, 10 Aug 2006) | 5 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/libteredo/init.c
   M /trunk/libteredo/libteredo.sym
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/libteredo/test/Makefile.am
   M /trunk/libteredo/test/hmac.c

Big -yet partial- cleanup of the ping HMAC API:
- renaming
- unexport from the shared object
- do not depend on time_t / <time.h>

------------------------------------------------------------------------
r1660 | remi | 2006-08-10 18:06:23 +0300 (Thu, 10 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c

Extra sanity check in Teredo server processing

------------------------------------------------------------------------
r1659 | remi | 2006-08-09 22:53:38 +0300 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Precompile-time sanity check

------------------------------------------------------------------------
r1658 | remi | 2006-08-09 22:50:22 +0300 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h

Use "random" rather than "nonce".

------------------------------------------------------------------------
r1657 | remi | 2006-08-09 22:26:08 +0300 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

More concise comments

------------------------------------------------------------------------
r1656 | remi | 2006-08-09 22:09:26 +0300 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Recover from Teredo relay address change quicker

------------------------------------------------------------------------
r1655 | remi | 2006-08-09 21:51:38 +0300 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Re-add Router Advertisement source UDP port check

------------------------------------------------------------------------
r1654 | remi | 2006-08-09 21:49:28 +0300 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Cleanup

------------------------------------------------------------------------
r1653 | remi | 2006-08-08 20:22:55 +0300 (Tue, 08 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/libteredo/test/hmac.c

Pass time to HMAC functions explicitly.

------------------------------------------------------------------------
r1652 | remi | 2006-08-08 20:07:50 +0300 (Tue, 08 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/hmac.c

Use new Teredo prefix.

------------------------------------------------------------------------
r1651 | remi | 2006-08-08 20:06:46 +0300 (Tue, 08 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Allow source address to be omitted when computing the HMAC-ping

------------------------------------------------------------------------
r1650 | remi | 2006-08-08 19:04:48 +0300 (Tue, 08 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c

Fix ordering of libteredo initialization.

------------------------------------------------------------------------
r1649 | remi | 2006-08-08 19:04:04 +0300 (Tue, 08 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h

Cleanup

------------------------------------------------------------------------
r1648 | remi | 2006-08-08 18:37:10 +0300 (Tue, 08 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Add an assertion

------------------------------------------------------------------------
r1647 | remi | 2006-08-08 18:30:54 +0300 (Tue, 08 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c
   M /trunk/po/POTFILES.in

Remove useless reference to gettext

------------------------------------------------------------------------
r1646 | remi | 2006-08-08 18:29:10 +0300 (Tue, 08 Aug 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/security.c

Put non-cryptographic part of the pings authentication token
as a single block

------------------------------------------------------------------------
r1645 | remi | 2006-08-07 22:33:17 +0300 (Mon, 07 Aug 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Note that the impersonation bug does not affect stable branch :)

------------------------------------------------------------------------
r1644 | remi | 2006-08-07 22:26:40 +0300 (Mon, 07 Aug 2006) | 3 lines
Changed paths:
   M /trunk/packages/debian
   M /trunk/packages/debian/control
   A /trunk/packages/debian/libteredo0.install (from /trunk/packages/debian/miredo.install:1631)
   A /trunk/packages/debian/libtun6-0.install (from /trunk/packages/debian/miredo.install:1631)
   M /trunk/packages/debian/miredo.install
   M /trunk/packages/debian/rules

Split package into more chunks.
Lintian and Linda clean now.

------------------------------------------------------------------------
r1643 | remi | 2006-08-07 21:50:35 +0300 (Mon, 07 Aug 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

News for upcoming 0.9.8

------------------------------------------------------------------------
r1642 | remi | 2006-08-07 21:45:48 +0300 (Mon, 07 Aug 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.c

Comment updated

------------------------------------------------------------------------
r1641 | remi | 2006-08-07 21:45:31 +0300 (Mon, 07 Aug 2006) | 2 lines
Changed paths:
   M /trunk/TODO

Update todos

------------------------------------------------------------------------
r1640 | remi | 2006-08-07 21:43:09 +0300 (Mon, 07 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.c

Write down world domination scheme.

------------------------------------------------------------------------
r1639 | remi | 2006-08-07 21:25:55 +0300 (Mon, 07 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Add comment

------------------------------------------------------------------------
r1638 | remi | 2006-08-07 21:23:36 +0300 (Mon, 07 Aug 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h

Use 32-bits timestamp.
16-bits were wrapping every 18 hours,
which is not quite long enough given that the HMAC key is never changed.

------------------------------------------------------------------------
r1637 | remi | 2006-08-07 20:56:29 +0300 (Mon, 07 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Store the PID properly

------------------------------------------------------------------------
r1636 | remi | 2006-08-07 20:48:59 +0300 (Mon, 07 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Cleanup

------------------------------------------------------------------------
r1635 | remi | 2006-08-07 20:45:15 +0300 (Mon, 07 Aug 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/security.c

- Save PID as uint16_t during initialization (simpler and faster)
- Fix incorrect return value from HMAC checking function
  when the PID is wrong.

------------------------------------------------------------------------
r1634 | remi | 2006-08-07 20:42:22 +0300 (Mon, 07 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/hmac.c

Test more possible modifications of the HMAC

------------------------------------------------------------------------
r1633 | remi | 2006-08-07 20:33:44 +0300 (Mon, 07 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Unduplicate HMAC code

------------------------------------------------------------------------
r1632 | remi | 2006-08-04 20:11:55 +0300 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Cosmetic

------------------------------------------------------------------------
r1631 | remi | 2006-08-04 20:09:16 +0300 (Fri, 04 Aug 2006) | 7 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Allow autoconfiguration on tunnel devices:
- it did not actually avoid "no IPv6 router" errors,
- Teredo is shielded against it thanks to the fe80::/12 source blackhole
  (which may also be needed for other ICMPv6 Neighborhood stuff),
- ISATAP needs it, in the client case. ISATAP routers are protected by
  the standard procedure (i.e. forwarding disables autoconfiguration).

------------------------------------------------------------------------
r1630 | remi | 2006-08-04 19:57:52 +0300 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Mark the clock as volatile just in case.

------------------------------------------------------------------------
r1629 | remi | 2006-08-04 19:21:54 +0300 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/libteredo0-dev.install
   M /trunk/packages/debian/miredo.install

Install miredo.conf into the right package

------------------------------------------------------------------------
r1628 | remi | 2006-08-04 19:17:42 +0300 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/changelog

Fix changelog

------------------------------------------------------------------------
r1627 | remi | 2006-08-04 19:17:30 +0300 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Const string fix

------------------------------------------------------------------------
r1626 | remi | 2006-08-04 18:38:51 +0300 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/src/conf.c

Comment

------------------------------------------------------------------------
r1625 | remi | 2006-08-04 18:33:06 +0300 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/diag.c
   M /trunk/libtun6/tun6.c

Turn a few const string pointer into arrays.

------------------------------------------------------------------------
r1624 | remi | 2006-08-03 23:25:08 +0300 (Thu, 03 Aug 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/Makefile.am
   A /trunk/libtun6/diag.c (from /trunk/libtun6/tun6.c:1623)
   D /trunk/libtun6/diagnose.c
   A /trunk/libtun6/test_diag.c (from /trunk/libtun6/diagnose.c:1623)
   M /trunk/libtun6/tun6.c

libtun6 code split.
No externally visible changes, of course.

------------------------------------------------------------------------
r1623 | remi | 2006-08-02 22:39:02 +0300 (Wed, 02 Aug 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.c

Typo

------------------------------------------------------------------------
r1622 | remi | 2006-08-02 22:27:05 +0300 (Wed, 02 Aug 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/changelog
   M /trunk/packages/debian/miredo.default
   M /trunk/packages/debian/miredo.init

Leverage miredo-checkconf change

------------------------------------------------------------------------
r1621 | remi | 2006-08-02 22:15:00 +0300 (Wed, 02 Aug 2006) | 3 lines
Changed paths:
   M /trunk/src/checkconf.c

(Pretend to) accept the same command line options in miredo-checkconf
so that it is easier to use within initscripts.

------------------------------------------------------------------------
r1620 | remi | 2006-08-02 19:54:33 +0300 (Wed, 02 Aug 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Cosmetic fixes

------------------------------------------------------------------------
r1619 | remi | 2006-08-02 19:50:39 +0300 (Wed, 02 Aug 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/teredo.c
   M /trunk/src/relay.c

- Fix multicast TTL (not used yet fortunately)
- Minor C99 cosmetics

------------------------------------------------------------------------
r1618 | remi | 2006-08-02 19:49:28 +0300 (Wed, 02 Aug 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Bump version number

------------------------------------------------------------------------
r1617 | remi | 2006-07-30 22:12:41 +0300 (Sun, 30 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/isatapd.dirs
   M /trunk/packages/debian/miredo-server.dirs
   M /trunk/packages/debian/miredo.dirs

Remove redundant entries in *.dirs

------------------------------------------------------------------------
r1616 | remi | 2006-07-30 22:12:05 +0300 (Sun, 30 Jul 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Spelling fix

------------------------------------------------------------------------
r1614 | remi | 2006-07-30 21:51:19 +0300 (Sun, 30 Jul 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

News for release 0.9.7

------------------------------------------------------------------------
r1613 | remi | 2006-07-30 21:49:29 +0300 (Sun, 30 Jul 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync PO files for release 0.9.7

------------------------------------------------------------------------
r1612 | remi | 2006-07-30 21:20:41 +0300 (Sun, 30 Jul 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/server.c

Allow UDP-forwarding of ICMPv6 packets of small size,
instead of dropping them all.

------------------------------------------------------------------------
r1611 | remi | 2006-07-30 21:17:36 +0300 (Sun, 30 Jul 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/server.c

Further fix an infinite forwarding loop of UDP packets into the Teredo server.
[1549] not only failed to fully address the problem,
but I failed to notice that the problem was actually remotely exploitable.

------------------------------------------------------------------------
r1610 | remi | 2006-07-30 21:10:16 +0300 (Sun, 30 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c

Cosmetic fixes

------------------------------------------------------------------------
r1609 | remi | 2006-07-30 18:02:50 +0300 (Sun, 30 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay.c

Fix a few compiler warnings

------------------------------------------------------------------------
r1608 | remi | 2006-07-30 17:52:57 +0300 (Sun, 30 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/changelog
   M /trunk/packages/debian/isatapd.install
   M /trunk/packages/debian/libteredo0-dev.install
   M /trunk/packages/debian/miredo-server.install
   M /trunk/packages/debian/rules

Debian packaging: Leverage --enable-erase-conf

------------------------------------------------------------------------
r1607 | remi | 2006-07-30 17:45:40 +0300 (Sun, 30 Jul 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Fix configuration files rules

------------------------------------------------------------------------
r1606 | remi | 2006-07-30 14:44:54 +0300 (Sun, 30 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.c

Update path to sample config when testing miredo-checkconf

------------------------------------------------------------------------
r1605 | remi | 2006-07-30 14:34:46 +0300 (Sun, 30 Jul 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Fix make dist

------------------------------------------------------------------------
r1604 | remi | 2006-07-27 19:11:52 +0300 (Thu, 27 Jul 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

This is development for version 0.9.7

------------------------------------------------------------------------
r1603 | remi | 2006-07-27 19:11:22 +0300 (Thu, 27 Jul 2006) | 3 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.ac
   A /trunk/misc/isatapd.conf (from /trunk/misc/isatapd.conf-dist:1602)
   D /trunk/misc/isatapd.conf-dist
   A /trunk/misc/miredo-server.conf (from /trunk/misc/miredo-server.conf-dist:1602)
   D /trunk/misc/miredo-server.conf-dist
   A /trunk/misc/miredo.conf (from /trunk/misc/miredo.conf-dist:1602)
   D /trunk/misc/miredo.conf-dist

Add --enable-erase-conf option to erase configuration files
upon make install. This is mostly useful when building packages.

------------------------------------------------------------------------
r1602 | remi | 2006-07-15 13:28:31 +0300 (Sat, 15 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/changelog
   M /trunk/packages/debian/watch

Update watch file

------------------------------------------------------------------------
r1600 | remi | 2006-07-13 17:41:41 +0300 (Thu, 13 Jul 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync translation files for release 0.9.6

------------------------------------------------------------------------
r1599 | remi | 2006-07-13 17:40:37 +0300 (Thu, 13 Jul 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO

Changes documentation for release 0.9.6

------------------------------------------------------------------------
r1598 | remi | 2006-07-12 20:18:40 +0300 (Wed, 12 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control

Don't depend on libcap-dev on non-Linux architectures

------------------------------------------------------------------------
r1597 | remi | 2006-07-12 20:13:45 +0300 (Wed, 12 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Add some verbose diagnostic messages for possibly confused BSD users

------------------------------------------------------------------------
r1596 | remi | 2006-07-12 20:13:16 +0300 (Wed, 12 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.c
   M /trunk/src/relay.c

Remove the ugly kludge for system that do not support interface naming

------------------------------------------------------------------------
r1595 | remi | 2006-07-11 19:48:19 +0300 (Tue, 11 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Fix the FreeBSD recvfrom work-around

------------------------------------------------------------------------
r1594 | remi | 2006-07-11 19:23:08 +0300 (Tue, 11 Jul 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Work-around for FreeBSD thread library bug whereby recvfrom() is not a
cancellation point

------------------------------------------------------------------------
r1593 | remi | 2006-07-11 18:50:18 +0300 (Tue, 11 Jul 2006) | 3 lines
Changed paths:
   M /trunk/src/Makefile.am

Don't run miredo-checkconf with --disable-teredo-client since it does
NOT work

------------------------------------------------------------------------
r1592 | remi | 2006-07-11 18:48:54 +0300 (Tue, 11 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.c

Fix error handling

------------------------------------------------------------------------
r1591 | remi | 2006-07-11 18:47:14 +0300 (Tue, 11 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.c

Fix compiler warnings

------------------------------------------------------------------------
r1590 | remi | 2006-07-11 18:46:14 +0300 (Tue, 11 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.c

Fix run_tunnel fatal failure on FreeBSD

------------------------------------------------------------------------
r1589 | remi | 2006-07-11 18:44:51 +0300 (Tue, 11 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Fix memory leak and a few extra warnings on FreeBSD

------------------------------------------------------------------------
r1588 | remi | 2006-07-11 18:38:12 +0300 (Tue, 11 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

FreeBSD compiler warning

------------------------------------------------------------------------
r1587 | remi | 2006-07-11 18:17:06 +0300 (Tue, 11 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.c

Fix client-less compiler warning

------------------------------------------------------------------------
r1586 | remi | 2006-07-11 18:16:32 +0300 (Tue, 11 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.c

Fix client-less compilation

------------------------------------------------------------------------
r1585 | remi | 2006-07-11 18:00:05 +0300 (Tue, 11 Jul 2006) | 2 lines
Changed paths:
   M /trunk/compat/clock_nanosleep.c

Attempt to fix compilation on POSIX-incompliant FreeBSD 4/5

------------------------------------------------------------------------
r1584 | remi | 2006-07-11 17:20:53 +0300 (Tue, 11 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c
   M /trunk/src/server.c

Fix [1575]

------------------------------------------------------------------------
r1583 | remi | 2006-07-10 23:19:57 +0300 (Mon, 10 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.c

Tunnel interface cleanup code cleanup

------------------------------------------------------------------------
r1582 | remi | 2006-07-10 23:19:16 +0300 (Mon, 10 Jul 2006) | 3 lines
Changed paths:
   M /trunk/src/main.c

Completely remove setuid handling code when building with "root" user
(typically for embedded setups)

------------------------------------------------------------------------
r1581 | remi | 2006-07-10 23:12:38 +0300 (Mon, 10 Jul 2006) | 3 lines
Changed paths:
   M /trunk/configure.ac

--disable-miredo-user now means root as a user rather than nobody
That should be more intuitive, and more consistent

------------------------------------------------------------------------
r1580 | remi | 2006-07-10 23:00:42 +0300 (Mon, 10 Jul 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Remove non ASCII character

------------------------------------------------------------------------
r1579 | remi | 2006-07-10 22:23:16 +0300 (Mon, 10 Jul 2006) | 5 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/relay.c

Move the decision to "steal" incoming UDP packets for the maintenance
procedure to maintain.c; and only steal packets that have the right
destination address, rather than all packets with a Teredo
authentication indication header

------------------------------------------------------------------------
r1578 | remi | 2006-07-10 22:15:41 +0300 (Mon, 10 Jul 2006) | 2 lines
Changed paths:
   M /trunk/compat/clock_nanosleep.c

Attempt to fix flawed clock_nanosleep() replacement

------------------------------------------------------------------------
r1577 | remi | 2006-07-10 20:51:11 +0300 (Mon, 10 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Remove useless #include

------------------------------------------------------------------------
r1576 | remi | 2006-07-10 20:37:01 +0300 (Mon, 10 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Finally implement tunnel interface name determination properly on FreeBSD!

------------------------------------------------------------------------
r1575 | remi | 2006-07-10 20:20:17 +0300 (Mon, 10 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c

Missing #include

------------------------------------------------------------------------
r1574 | remi | 2006-07-10 20:17:13 +0300 (Mon, 10 Jul 2006) | 2 lines
Changed paths:
   M /trunk/doc/Makefile.am

Include teredo-mire.1 in source tarball

------------------------------------------------------------------------
r1573 | remi | 2006-07-08 10:07:12 +0300 (Sat, 08 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian

Ignore cdbs-*

------------------------------------------------------------------------
r1572 | remi | 2006-07-08 10:06:37 +0300 (Sat, 08 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control
   M /trunk/packages/debian/miredo.install
   M /trunk/packages/debian/rules

Use list-missing, install teredo-mire

------------------------------------------------------------------------
r1571 | remi | 2006-07-08 09:32:17 +0300 (Sat, 08 Jul 2006) | 3 lines
Changed paths:
   M /trunk/doc/Makefile.am
   A /trunk/doc/teredo-mire.1 (from /trunk/doc/miredo.8-in:1567)
   M /trunk/libteredo/Makefile.am

Provide a rudimentary manual page for teredo-mire
and install it in @bindir@

------------------------------------------------------------------------
r1570 | remi | 2006-07-08 09:31:04 +0300 (Sat, 08 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/mire.c

Exit teredo-mire in case of invalid command line option

------------------------------------------------------------------------
r1569 | remi | 2006-07-08 09:30:28 +0300 (Sat, 08 Jul 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

This is development branch 0.9.6

------------------------------------------------------------------------
r1568 | remi | 2006-07-07 23:10:42 +0300 (Fri, 07 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h

Simplify nonce generator code (fortunately no exported API involved)

------------------------------------------------------------------------
r1566 | remi | 2006-07-07 20:27:37 +0300 (Fri, 07 Jul 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync translation files

------------------------------------------------------------------------
r1565 | remi | 2006-07-07 20:21:31 +0300 (Fri, 07 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/rules

Run check suite while building a Debian package

------------------------------------------------------------------------
r1564 | remi | 2006-07-07 20:20:45 +0300 (Fri, 07 Jul 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/misc/miredo.conf-dist

Updated docs for release 0.9.5

------------------------------------------------------------------------
r1563 | remi | 2006-07-07 20:16:08 +0300 (Fri, 07 Jul 2006) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

Remove IgnoreConeBit from sample configuration

------------------------------------------------------------------------
r1562 | remi | 2006-07-07 19:22:51 +0300 (Fri, 07 Jul 2006) | 3 lines
Changed paths:
   M /trunk/packages/debian/miredo.init

Check configuration at restart only rather than start.
This might avoid very nasty breakage in the postinst script.

------------------------------------------------------------------------
r1561 | remi | 2006-07-07 19:21:25 +0300 (Fri, 07 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/rules

Fixes

------------------------------------------------------------------------
r1560 | remi | 2006-07-07 19:13:35 +0300 (Fri, 07 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.c

Print explicitly that the configuration is broken when miredo-checkconf fails

------------------------------------------------------------------------
r1559 | remi | 2006-07-07 19:09:40 +0300 (Fri, 07 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian
   M /trunk/packages/debian/changelog
   M /trunk/packages/debian/control
   D /trunk/packages/debian/docs
   M /trunk/packages/debian/rules

Switch to CDBS

------------------------------------------------------------------------
r1558 | remi | 2006-07-07 18:15:30 +0300 (Fri, 07 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.c

Cosmetic change

------------------------------------------------------------------------
r1557 | remi | 2006-07-06 18:19:19 +0300 (Thu, 06 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control

Add build-dep on gettext

------------------------------------------------------------------------
r1556 | remi | 2006-07-06 18:19:06 +0300 (Thu, 06 Jul 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/rules

Don't duplicate documentation in -dbg and -dev packages

------------------------------------------------------------------------
r1555 | remi | 2006-07-05 21:57:17 +0300 (Wed, 05 Jul 2006) | 3 lines
Changed paths:
   M /trunk/packages/debian/miredo.init

Give the user a clue (and return an error code) when the configuration
file is incorrect while trying to (re)start miredo from /etc/init.d

------------------------------------------------------------------------
r1554 | remi | 2006-07-05 21:56:33 +0300 (Wed, 05 Jul 2006) | 3 lines
Changed paths:
   M /trunk/packages/debian/rules

- Run ldconfig before invoke-rc.d from postinst
- Don't call superfluous dh_link

------------------------------------------------------------------------
r1553 | remi | 2006-07-05 21:25:44 +0300 (Wed, 05 Jul 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.c

Detect and report missing ServerAddress directive as an error.

------------------------------------------------------------------------
r1552 | remi | 2006-07-04 18:38:38 +0300 (Tue, 04 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.h
   M /trunk/libteredo/tunnel.h
   M /trunk/libtun6/tun6.h

Fix GCC C89 inclusion of all installed headers

------------------------------------------------------------------------
r1551 | remi | 2006-07-04 18:18:17 +0300 (Tue, 04 Jul 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/tunnel.h

Allow inclusion of <libteredo/tunnel.h> from non-C99 source code

------------------------------------------------------------------------
r1550 | remi | 2006-06-30 22:49:37 +0300 (Fri, 30 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/mire.c

Replace the horrible (spec-incompliant) Teredo hop limit kludge
with another more conformant, not so ugly and not so brittle klude.

------------------------------------------------------------------------
r1549 | remi | 2006-06-28 22:29:45 +0300 (Wed, 28 Jun 2006) | 5 lines
Changed paths:
   M /trunk/libteredo/server.c

Avoid loop of Teredo bubble into the Teredo server.
(In practice, this could only happen if the Teredo server has a
malicious local user able to send packet because the UDP packet source
and destination IPv4 address would have to be identical)

------------------------------------------------------------------------
r1548 | remi | 2006-06-28 20:30:48 +0300 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Fix compiler warning

------------------------------------------------------------------------
r1547 | remi | 2006-06-28 19:31:01 +0300 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Factorize teredo_run_inner() post-processing

------------------------------------------------------------------------
r1546 | remi | 2006-06-28 19:19:03 +0300 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Some code factorization in teredo_transmit()

------------------------------------------------------------------------
r1545 | remi | 2006-06-28 19:08:04 +0300 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Fix comment

------------------------------------------------------------------------
r1544 | remi | 2006-06-28 18:56:23 +0300 (Wed, 28 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.c

Use received packet source IPv4/port instead of extracting them from
the Teredo IPv6 address when dequeuing packet

------------------------------------------------------------------------
r1543 | remi | 2006-06-28 18:41:58 +0300 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.c

Use libteredo_set_relay_mode

------------------------------------------------------------------------
r1542 | remi | 2006-06-28 18:41:27 +0300 (Wed, 28 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/libteredo.sym
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/tunnel.h

- Add libteredo_set_relay_mode()
- Obsolete libteredo_set_cone_flag()

------------------------------------------------------------------------
r1541 | remi | 2006-06-28 18:24:19 +0300 (Wed, 28 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/tunnel.h

Mark libteredo_set_cone_ignore as obsolete
(it is a stub nowadays)

------------------------------------------------------------------------
r1540 | remi | 2006-06-28 18:21:37 +0300 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/doc/miredo.conf.5

Update RelayType directive documentation

------------------------------------------------------------------------
r1539 | remi | 2006-06-28 18:12:01 +0300 (Wed, 28 Jun 2006) | 4 lines
Changed paths:
   M /trunk/src/checkconf.c
   M /trunk/src/relay.c

- Remove some "cone" relay code that was made redumdant
- Add "relay" as a the canonical RelayType; retain "cone" and "restricted"
  for backward compatibility

------------------------------------------------------------------------
r1538 | remi | 2006-06-27 19:52:20 +0300 (Tue, 27 Jun 2006) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/maintain.c

Remove optional interval determination procedure from the TODO list
as it is considered too brittle

------------------------------------------------------------------------
r1537 | remi | 2006-06-27 19:41:46 +0300 (Tue, 27 Jun 2006) | 2 lines
Changed paths:
   M /trunk/src/conf.c

Comment out miredo_conf_parse_bool() (dead code)

------------------------------------------------------------------------
r1536 | remi | 2006-06-27 19:13:33 +0300 (Tue, 27 Jun 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/doc/miredo.conf.5

Undocument IgnoreConeBit option

------------------------------------------------------------------------
r1535 | remi | 2006-06-27 19:11:52 +0300 (Tue, 27 Jun 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.c
   M /trunk/src/relay.c

Remove IgnoreConeBit configuration option (it should always be true).

------------------------------------------------------------------------
r1534 | remi | 2006-06-27 19:07:04 +0300 (Tue, 27 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/maintain.h

Suppress cone NAT detection from qualification procedure
as it is nowadays considered too brittle.

------------------------------------------------------------------------
r1533 | remi | 2006-06-27 18:54:08 +0300 (Tue, 27 Jun 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/relay.c

Disable code specific to peers behind cone NAT for extra reliability,
in accordance with the Teredo RFC, and following RFC3489bis.
This code was already disabled by default.

------------------------------------------------------------------------
r1532 | remi | 2006-06-27 10:09:02 +0300 (Tue, 27 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay.c

Suppress useless "cone" parameter from SendBubbleFromDst
internal (not exported) API

------------------------------------------------------------------------
r1531 | remi | 2006-06-27 10:05:58 +0300 (Tue, 27 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.c

Removed cone NAT enhancement from Teredo relay code
in accordance with latest RFC3489bis IETF draft

------------------------------------------------------------------------
r1530 | remi | 2006-06-27 09:51:55 +0300 (Tue, 27 Jun 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/relay.c

Use SetMappingFromPacket() instead of SetMapping() from IPv6 address.
This does not change the logic for the time being, but it will make it
easier to handle clients behind symmetric NATs later.

------------------------------------------------------------------------
r1529 | remi | 2006-06-26 22:17:30 +0300 (Mon, 26 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/teredo.c

No longer send a dummy link-layer option in Router Solicitation
(Windows XP does it, but it is not specified and Vista does not do it)

------------------------------------------------------------------------
r1528 | remi | 2006-06-20 23:27:58 +0300 (Tue, 20 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/teredo.h

- Add unused standard Teredo flags and non-standard ones
- Some cosmetic fixes

------------------------------------------------------------------------
r1527 | remi | 2006-06-20 23:14:16 +0300 (Tue, 20 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.h

Clean up IN6_* Teredo macros

------------------------------------------------------------------------
r1526 | remi | 2006-06-20 23:04:16 +0300 (Tue, 20 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.h

Fix IN6_TEREDO_PORT

------------------------------------------------------------------------
r1525 | remi | 2006-06-20 22:51:26 +0300 (Tue, 20 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/addrcmp.c

Unit tests for IN6_* Teredo macros.

------------------------------------------------------------------------
r1524 | remi | 2006-06-20 22:35:26 +0300 (Tue, 20 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/addrcmp.c

Rewrite test with IANA Teredo prefix, and sample IPv4 addresses

------------------------------------------------------------------------
r1523 | remi | 2006-06-20 19:37:51 +0300 (Tue, 20 Jun 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/libteredo.sym

Explicit list of exported libteredo symbols; this is limited to:
- symbols defined in the two installed headers (obviously),
- internal functions that are called from unit tests

------------------------------------------------------------------------
r1522 | remi | 2006-06-20 18:25:25 +0300 (Tue, 20 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/peerlist.c
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.c

Ignore queued incoming packets whose source IPv4 and port do not match
the ones obtained through the "direct IPv6 connectivity check"

------------------------------------------------------------------------
r1521 | remi | 2006-06-18 19:30:57 +0300 (Sun, 18 Jun 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Bump version number

------------------------------------------------------------------------
r1520 | remi | 2006-06-18 19:28:26 +0300 (Sun, 18 Jun 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian
   M /trunk/packages/debian/changelog

Fix svn:ignore

------------------------------------------------------------------------
r1519 | remi | 2006-06-18 19:27:38 +0300 (Sun, 18 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/server.c

Fix Router Solicitation sanity checks.
This allows miredo-server to interact with Windows Vista.

------------------------------------------------------------------------
r1518 | remi | 2006-06-18 19:26:29 +0300 (Sun, 18 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.c

Cosmetic fix

------------------------------------------------------------------------
r1517 | remi | 2006-06-17 11:00:40 +0300 (Sat, 17 Jun 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control
   M /trunk/packages/debian/rules

Provide a debug package (hey! these are currently beta releases)

------------------------------------------------------------------------
r1515 | remi | 2006-06-16 22:15:22 +0300 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Prepare release 0.9.4

------------------------------------------------------------------------
r1514 | remi | 2006-06-16 22:14:30 +0300 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control

Fix libc-dev dependency

------------------------------------------------------------------------
r1513 | remi | 2006-06-16 20:54:40 +0300 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   A /trunk/packages/debian/changelog (from /trunk/packages/debian/changelog.in:1511)
   D /trunk/packages/debian/changelog.in

The changelog should really not depend on config.status

------------------------------------------------------------------------
r1512 | remi | 2006-06-16 20:52:20 +0300 (Fri, 16 Jun 2006) | 3 lines
Changed paths:
   A /trunk/packages/debian/isatapd.init (from /trunk/packages/debian/isatapd.init.in:1511)
   D /trunk/packages/debian/isatapd.init.in
   A /trunk/packages/debian/miredo-server.init (from /trunk/packages/debian/miredo-server.init.in:1511)
   D /trunk/packages/debian/miredo-server.init.in
   A /trunk/packages/debian/miredo.init (from /trunk/packages/debian/miredo.init.in:1511)
   D /trunk/packages/debian/miredo.init.in

Code file paths statically to match the standard Debian ones
(which are pretty much the standard on any mainstream Linux distribution).

------------------------------------------------------------------------
r1511 | remi | 2006-06-16 19:12:53 +0300 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Fix compiler warning

------------------------------------------------------------------------
r1510 | remi | 2006-06-16 19:11:11 +0300 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.c

Fix O(1) memory leak

------------------------------------------------------------------------
r1509 | remi | 2006-06-16 19:07:32 +0300 (Fri, 16 Jun 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/relay.c

Run our own 1 Hz clock so we don't have to syscall the system date at
every packet receival. This reduces latency and increase performance
significantly.

------------------------------------------------------------------------
r1508 | remi | 2006-06-16 18:37:40 +0300 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   M /trunk/TODO

Review TODO list

------------------------------------------------------------------------
r1507 | remi | 2006-06-16 18:18:32 +0300 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   D /trunk/packages/debian/shlibs.local

libjudydebian1 was fixed; no need for the shlibs kludge anymore

------------------------------------------------------------------------
r1506 | remi | 2006-06-15 17:01:18 +0300 (Thu, 15 Jun 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control

Add missing dependency on libc-dev

------------------------------------------------------------------------
r1505 | remi | 2006-06-14 22:36:47 +0300 (Wed, 14 Jun 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Remove bogus FIXME comment:
The monotonic does surely not warranty that we won't go past the
deadline. This is quite obvious if we get a SIGSTOP...

------------------------------------------------------------------------
r1504 | remi | 2006-06-14 22:33:26 +0300 (Wed, 14 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Realtime clock fallback code cleanup

------------------------------------------------------------------------
r1503 | remi | 2006-06-14 18:46:04 +0300 (Wed, 14 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/teredo.c

Kill a few memset()s

------------------------------------------------------------------------
r1502 | remi | 2006-06-14 18:45:47 +0300 (Wed, 14 Jun 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Bump version number

------------------------------------------------------------------------
r1501 | remi | 2006-06-14 18:26:47 +0300 (Wed, 14 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.c

- Fix memleak when the (Linux) interface name is invalid
- Replace a few memset()s

------------------------------------------------------------------------
r1500 | remi | 2006-06-14 18:16:09 +0300 (Wed, 14 Jun 2006) | 3 lines
Changed paths:
   M /trunk/src/conf.c
   M /trunk/src/isatap.c
   M /trunk/src/relay.c

- Add a few missing sockaddr.sa_len settings (isatapd)
- Get rid of a few memset()s

------------------------------------------------------------------------
r1498 | remi | 2006-06-13 19:04:51 +0300 (Tue, 13 Jun 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/configure.ac

Prepare release 0.9.3

------------------------------------------------------------------------
r1497 | remi | 2006-06-10 17:14:30 +0300 (Sat, 10 Jun 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/isatapd.init.in
   M /trunk/packages/debian/rules

Improve Debian initscripts handling

------------------------------------------------------------------------
r1496 | remi | 2006-06-10 17:13:44 +0300 (Sat, 10 Jun 2006) | 2 lines
Changed paths:
   D /trunk/misc/miredo

Remove broken useless obsolete file

------------------------------------------------------------------------
r1495 | remi | 2006-06-10 14:20:51 +0300 (Sat, 10 Jun 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control
   M /trunk/packages/debian/rules
   A /trunk/packages/debian/shlibs.local

Work-around libjudy breakage. Fixes.

------------------------------------------------------------------------
r1494 | remi | 2006-06-10 13:39:09 +0300 (Sat, 10 Jun 2006) | 2 lines
Changed paths:
   A /trunk/packages/debian/isatapd.postinst (from /trunk/packages/debian/miredo.postinst:1493)
   A /trunk/packages/debian/miredo-server.postinst (from /trunk/packages/debian/miredo.postinst:1493)

Create system users (2/2)

------------------------------------------------------------------------
r1493 | remi | 2006-06-10 12:56:41 +0300 (Sat, 10 Jun 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/isatapd.dirs
   M /trunk/packages/debian/miredo-server.dirs
   M /trunk/packages/debian/miredo.dirs
   A /trunk/packages/debian/miredo.postinst

Create miredo user properly (1/2)

------------------------------------------------------------------------
r1492 | remi | 2006-06-10 11:59:50 +0300 (Sat, 10 Jun 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control

Remove libjudy-dev from build-depends until it is fixed

------------------------------------------------------------------------
r1491 | remi | 2006-06-10 11:25:48 +0300 (Sat, 10 Jun 2006) | 4 lines
Changed paths:
   M /trunk/packages/debian/control
   A /trunk/packages/debian/isatapd.default (from /trunk/packages/debian/miredo.default:1489)
   A /trunk/packages/debian/isatapd.init.in (from /trunk/packages/debian/miredo.init.in:1489)
   M /trunk/packages/debian/libteredo0-dev.install
   M /trunk/packages/debian/miredo-server.default
   M /trunk/packages/debian/miredo.install

- Do not package libmiredo.
- Add iniscript for isatapd.
- Fix defaults for miredo and miredo-server.

------------------------------------------------------------------------
r1490 | remi | 2006-06-10 11:25:06 +0300 (Sat, 10 Jun 2006) | 3 lines
Changed paths:
   M /trunk/src/Makefile.am

Making a shared library out of an unstable library might not be such a
good idea afterall.

------------------------------------------------------------------------
r1489 | remi | 2006-06-10 10:51:38 +0300 (Sat, 10 Jun 2006) | 3 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/NEWS
   M /trunk/configure.ac
   M /trunk/misc
   M /trunk/misc/Makefile.am
   D /trunk/misc/miredo-server.in
   D /trunk/misc/miredo.in

Dismantle misc/ directory.
The only significant operations there were Debian-specific.

------------------------------------------------------------------------
r1488 | remi | 2006-06-10 10:42:49 +0300 (Sat, 10 Jun 2006) | 2 lines
Changed paths:
   M /trunk/packages/debian/control
   M /trunk/packages/debian/miredo-server.default
   M /trunk/packages/debian/miredo.default
   M /trunk/packages/debian/rules

Debian package fixes

------------------------------------------------------------------------
r1487 | remi | 2006-06-10 10:40:15 +0300 (Sat, 10 Jun 2006) | 3 lines
Changed paths:
   M /trunk/compat/Makefile.am

Make libcompat.la a genuine convenience library
(It is incorrect to use a static library within a shared one with libtool).

------------------------------------------------------------------------
r1486 | remi | 2006-06-10 00:01:30 +0300 (Sat, 10 Jun 2006) | 2 lines
Changed paths:
   A /trunk/packages
   A /trunk/packages/debian
   A /trunk/packages/debian/changelog.in
   A /trunk/packages/debian/compat
   A /trunk/packages/debian/control
   A /trunk/packages/debian/copyright
   A /trunk/packages/debian/docs
   A /trunk/packages/debian/isatapd.dirs
   A /trunk/packages/debian/isatapd.install
   A /trunk/packages/debian/libteredo0-dev.install
   A /trunk/packages/debian/libtun6-0-dev.install
   A /trunk/packages/debian/miredo-server.default
   A /trunk/packages/debian/miredo-server.dirs
   A /trunk/packages/debian/miredo-server.init.in (from /trunk/misc/miredo-server.in:1482)
   A /trunk/packages/debian/miredo-server.install
   A /trunk/packages/debian/miredo.default
   A /trunk/packages/debian/miredo.dirs
   A /trunk/packages/debian/miredo.init.in (from /trunk/misc/miredo.in:1482)
   A /trunk/packages/debian/miredo.install
   A /trunk/packages/debian/rules
   A /trunk/packages/debian/watch

Preliminary ?\226?\128?\156upstream?\226?\128?\157-made Debian packaging.

------------------------------------------------------------------------
r1485 | remi | 2006-06-09 21:58:59 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Fix spelling error

------------------------------------------------------------------------
r1484 | remi | 2006-06-09 21:41:20 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.c

Fix previous commit

------------------------------------------------------------------------
r1483 | remi | 2006-06-09 21:40:21 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.h

Fix compilation with -lcap

------------------------------------------------------------------------
r1482 | remi | 2006-06-09 20:23:19 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/include

svn:ignore fixes

------------------------------------------------------------------------
r1481 | remi | 2006-06-09 20:14:29 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/autogen.sh

Remove obsolete comment

------------------------------------------------------------------------
r1480 | remi | 2006-06-09 20:14:01 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/autogen.sh
   D /trunk/include/gettext.h

Some autotools update

------------------------------------------------------------------------
r1479 | remi | 2006-06-09 19:59:33 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/doc
   M /trunk/src

svn:ignore isatapd binaries

------------------------------------------------------------------------
r1478 | remi | 2006-06-09 19:54:32 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update localizations for release 0.9.3

------------------------------------------------------------------------
r1477 | remi | 2006-06-09 19:53:53 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README

Update documentation for release 0.9.3

------------------------------------------------------------------------
r1476 | remi | 2006-06-09 18:39:24 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/src/main.c

Remove another ?\226?\128?\156beta?\226?\128?\157 status reference

------------------------------------------------------------------------
r1475 | remi | 2006-06-09 18:30:04 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   A /trunk/autogen.sh (from /trunk/bootstrap:1474)
   D /trunk/bootstrap
   M /trunk/configure.ac
   M /trunk/misc/Makefile.am

Build system cosmetics

------------------------------------------------------------------------
r1474 | remi | 2006-06-09 17:40:30 +0300 (Fri, 09 Jun 2006) | 4 lines
Changed paths:
   M /trunk/src/Makefile.am

Build libmiredo as a release-specific shared library, since most of the
code is common to miredo, miredo-server and isatapd, and some is also
common to miredo-checkconf.

------------------------------------------------------------------------
r1473 | remi | 2006-06-09 17:38:22 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/diagnose.c

make check should not fail on platforms that can't rename tunnels

------------------------------------------------------------------------
r1472 | remi | 2006-06-09 17:34:07 +0300 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.c
   M /trunk/src/relay.c

Work-around for OSes that do not support setting the tunnel name

------------------------------------------------------------------------
r1471 | remi | 2006-06-08 18:20:45 +0300 (Thu, 08 Jun 2006) | 3 lines
Changed paths:
   M /trunk/src/checkconf.c
   M /trunk/src/main.c
   M /trunk/src/miredo.h

Use libmiredo version infos for miredo-checkconf,
since it is much more comprehensive than the former checkconf builtin.

------------------------------------------------------------------------
r1470 | remi | 2006-06-08 18:11:33 +0300 (Thu, 08 Jun 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.c
   M /trunk/src/main.c
   M /trunk/src/miredo.c
   M /trunk/src/miredo.h
   M /trunk/src/relay.c
   M /trunk/src/server.c

Make libmiredo a undefined symbol-less library

------------------------------------------------------------------------
r1469 | remi | 2006-06-07 21:27:24 +0300 (Wed, 07 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libtun6/Makefile.am

libteredo.so and libtun6.so no longer leak internal APIs to the outside

------------------------------------------------------------------------
r1468 | remi | 2006-06-07 21:14:57 +0300 (Wed, 07 Jun 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/tunnel.h

- Add version information for libteredo.
- Restore teredo_register_readset for backward ABI compatibility
- Mark teredo_register_readset as deprecated

------------------------------------------------------------------------
r1467 | remi | 2006-06-07 21:14:06 +0300 (Wed, 07 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/Makefile.am

Add version information for libtun6.so

------------------------------------------------------------------------
r1466 | remi | 2006-06-03 21:24:57 +0300 (Sat, 03 Jun 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/doc/isatapd.8-in
   M /trunk/doc/isatapd.conf.5
   M /trunk/doc/miredo-checkconf.8-in
   M /trunk/doc/miredo-server.8-in
   M /trunk/doc/miredo-server.conf.5
   M /trunk/doc/miredo.8-in
   M /trunk/doc/miredo.conf.5

Fix encoding of manual pages

------------------------------------------------------------------------
r1465 | remi | 2006-06-02 20:11:16 +0300 (Fri, 02 Jun 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/Makefile.am

Don't build teredo-mire until it is properly documented,
and made usable to not just me.

------------------------------------------------------------------------
r1464 | remi | 2006-06-02 19:47:55 +0300 (Fri, 02 Jun 2006) | 3 lines
Changed paths:
   M /trunk/src/isatap.c
   M /trunk/src/main.c
   M /trunk/src/miredo.h
   M /trunk/src/relay.c
   M /trunk/src/server.c

- Infer default PID file path from miredo_name, as for the config file,
- Do not allocate a char buffer of negative length

------------------------------------------------------------------------
r1463 | remi | 2006-06-01 20:23:26 +0300 (Thu, 01 Jun 2006) | 3 lines
Changed paths:
   M /trunk/src/main.c

Truncate PID file before writing to it, so that there is no extra
digits if a uncleanly removed longer PID file was left

------------------------------------------------------------------------
r1462 | remi | 2006-06-01 20:18:24 +0300 (Thu, 01 Jun 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c

Teredo server should not forward ICMPv6 packets over UDP.

------------------------------------------------------------------------
r1461 | remi | 2006-05-31 22:22:40 +0300 (Wed, 31 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c

Cosmetics

------------------------------------------------------------------------
r1460 | remi | 2006-05-31 21:50:27 +0300 (Wed, 31 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c

Remove useless variable

------------------------------------------------------------------------
r1459 | remi | 2006-05-31 21:00:44 +0300 (Wed, 31 May 2006) | 2 lines
Changed paths:
   D /trunk/misc/isatapd.conf
   A /trunk/misc/isatapd.conf-dist (from /trunk/misc/isatapd.conf:1458)

Fix file name

------------------------------------------------------------------------
r1458 | remi | 2006-05-31 20:59:41 +0300 (Wed, 31 May 2006) | 2 lines
Changed paths:
   M /trunk/misc/Makefile.am
   A /trunk/misc/isatapd.conf (from /trunk/misc/miredo.conf-dist:1456)

Provide sample conf for isatapd

------------------------------------------------------------------------
r1457 | remi | 2006-05-31 20:22:05 +0300 (Wed, 31 May 2006) | 2 lines
Changed paths:
   M /trunk/doc/isatapd.conf.5

Remove empty section

------------------------------------------------------------------------
r1456 | remi | 2006-05-31 20:19:57 +0300 (Wed, 31 May 2006) | 2 lines
Changed paths:
   M /trunk/doc/isatapd.8-in
   M /trunk/doc/isatapd.conf.5

Update isatapd documentation

------------------------------------------------------------------------
r1455 | remi | 2006-05-31 20:12:19 +0300 (Wed, 31 May 2006) | 3 lines
Changed paths:
   M /trunk/src/isatap.c

- Untested ISATAP client limited support
- Fix encapsulated ISATAP packets destination

------------------------------------------------------------------------
r1454 | remi | 2006-05-28 13:37:04 +0300 (Sun, 28 May 2006) | 2 lines
Changed paths:
   M /trunk/README

Fix spelling error

------------------------------------------------------------------------
r1453 | remi | 2006-05-28 10:52:04 +0300 (Sun, 28 May 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   M /trunk/src/Makefile.am

Only link against librt when needed

------------------------------------------------------------------------
r1452 | remi | 2006-05-28 10:46:13 +0300 (Sun, 28 May 2006) | 2 lines
Changed paths:
   M /trunk/compat/Makefile.am

fix typo

------------------------------------------------------------------------
r1451 | remi | 2006-05-28 10:39:09 +0300 (Sun, 28 May 2006) | 2 lines
Changed paths:
   M /trunk/compat/Makefile.am

libcompat must not have any undefined symbols at run-time

------------------------------------------------------------------------
r1450 | remi | 2006-05-28 10:36:45 +0300 (Sun, 28 May 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

libmiredo has undefined symbols... don't use -no-undefined

------------------------------------------------------------------------
r1449 | remi | 2006-05-26 22:16:06 +0300 (Fri, 26 May 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

News so far for 0.9.3

------------------------------------------------------------------------
r1448 | remi | 2006-05-26 18:40:05 +0300 (Fri, 26 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/libteredo/test/hmac.c

partial namespace cleanup

------------------------------------------------------------------------
r1447 | remi | 2006-05-25 21:29:33 +0300 (Thu, 25 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/peerlist.c
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/libteredo/server.c
   M /trunk/libtun6/tun6.h

Add restrict keywords where appropriate in libtun6/ and libteredo/

------------------------------------------------------------------------
r1446 | remi | 2006-05-25 21:05:14 +0300 (Thu, 25 May 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/tunnel.h

- Fix a client-less warning
- Add restrict keyword

------------------------------------------------------------------------
r1445 | remi | 2006-05-25 17:41:23 +0300 (Thu, 25 May 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Mac OS X compilation fix

------------------------------------------------------------------------
r1444 | remi | 2006-05-25 17:40:17 +0300 (Thu, 25 May 2006) | 3 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   M /trunk/src/Makefile.am

- Check for clockid_t, clock_gettime(), clock_nanosleep()
- Define _APPLE_C_SOURCE in config.h

------------------------------------------------------------------------
r1443 | remi | 2006-05-25 17:39:35 +0300 (Thu, 25 May 2006) | 2 lines
Changed paths:
   A /trunk/compat/clock_gettime.c
   A /trunk/compat/clock_nanosleep.c

Replacements for clock_gettime() and clock_nanosleep()

------------------------------------------------------------------------
r1442 | remi | 2006-05-25 17:37:33 +0300 (Thu, 25 May 2006) | 2 lines
Changed paths:
   M /trunk/src/addrwatch.c

Simplify code a lot via thread cancellation

------------------------------------------------------------------------
r1441 | remi | 2006-05-25 11:56:30 +0300 (Thu, 25 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Code factorization and clean up

------------------------------------------------------------------------
r1440 | remi | 2006-05-25 11:41:54 +0300 (Thu, 25 May 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/maintain.c

Use clock selection when available to really use the monotonic clock

------------------------------------------------------------------------
r1439 | remi | 2006-05-24 23:02:08 +0300 (Wed, 24 May 2006) | 5 lines
Changed paths:
   M /trunk/libteredo/maintain.c

- Fix deadlock in case of server DNS resolution failure
  (extraneous semi-colon after a while())
- Handle would-be spurious wakeups properly in maintenance
  (should already be OK in peer list garbage collector)

------------------------------------------------------------------------
r1438 | remi | 2006-05-24 22:49:19 +0300 (Wed, 24 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.c

Comment typo fix

------------------------------------------------------------------------
r1437 | remi | 2006-05-23 21:38:51 +0300 (Tue, 23 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/packets.h

Partial function naming cleanup

------------------------------------------------------------------------
r1436 | remi | 2006-05-23 21:14:59 +0300 (Tue, 23 May 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.c

Drop encapsulated multicast traffic until we define something sensible
to do with it

------------------------------------------------------------------------
r1435 | remi | 2006-05-23 21:07:55 +0300 (Tue, 23 May 2006) | 6 lines
Changed paths:
   M /trunk/libteredo/relay.c

Remove multicast source address on outgoing packets. If the local
administraror wants to send bogus packets, we don't really care - it's
not going to break the running host. That doesn't mean anyone should do
it... and it's probably completely useless, given any sensible IPv6
stck will trash such a packet after Teredo decapsulation.

------------------------------------------------------------------------
r1434 | remi | 2006-05-23 21:04:11 +0300 (Tue, 23 May 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/relay.c

Fix link-local source address black-list on incoming packets:
ff80::/12 was also black-listed. This is really not a real problem
since Teredo does not currently implement multicast anyway.

------------------------------------------------------------------------
r1433 | remi | 2006-05-23 20:52:47 +0300 (Tue, 23 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c

Cosmetic fix

------------------------------------------------------------------------
r1432 | remi | 2006-05-22 18:17:56 +0300 (Mon, 22 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.c

Fix a test that was never true

------------------------------------------------------------------------
r1431 | remi | 2006-05-22 18:07:47 +0300 (Mon, 22 May 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/peerlist.c

Use thread cancellation *safely* to terminate the GC thread
and simplify teredo_list_destroy().

------------------------------------------------------------------------
r1430 | remi | 2006-05-22 18:06:57 +0300 (Mon, 22 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/mire.c

Add easy to uncomment defines

------------------------------------------------------------------------
r1429 | remi | 2006-05-21 20:05:25 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/conf.c

Fix default value not set in parse_teredo_prefix

------------------------------------------------------------------------
r1428 | remi | 2006-05-21 17:45:21 +0300 (Sun, 21 May 2006) | 3 lines
Changed paths:
   M /trunk/compat/barrier.c
   M /trunk/compat/barrier.h

Fix pthread_barrier_wait() wrt ptread_cancel()
(pthread_barrier_wait() must NOT be a cancellation point).

------------------------------------------------------------------------
r1427 | remi | 2006-05-21 16:37:37 +0300 (Sun, 21 May 2006) | 3 lines
Changed paths:
   M /trunk/src/relay.c

Work-around for uClibc that doesn't implement readv()
as a cancellation point.

------------------------------------------------------------------------
r1426 | remi | 2006-05-21 16:08:06 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.c

Fix segmentation fault in case of insufficient memory

------------------------------------------------------------------------
r1425 | remi | 2006-05-21 16:05:11 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/privproc.c

Solaris compile fix

------------------------------------------------------------------------
r1424 | remi | 2006-05-21 16:05:00 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Solaris compile fix

------------------------------------------------------------------------
r1423 | remi | 2006-05-21 15:59:01 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/mire.c

Partial Solaris compile fix

------------------------------------------------------------------------
r1422 | remi | 2006-05-21 15:45:54 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/compat/Makefile.am
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   M /trunk/libtun6/Makefile.am
   M /trunk/src/Makefile.am

Use new standard autoconf stuff for _GNU_SOURCE and NDEBUG

------------------------------------------------------------------------
r1421 | remi | 2006-05-21 15:21:26 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/compat/Makefile.am
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/test/Makefile.am
   M /trunk/libtun6/Makefile.am
   M /trunk/src/Makefile.am

Rely on autoconf for C99 support

------------------------------------------------------------------------
r1420 | remi | 2006-05-21 14:58:42 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

We need not check for the C++ compiler anymore

------------------------------------------------------------------------
r1419 | remi | 2006-05-21 14:58:12 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in

Update translated files list

------------------------------------------------------------------------
r1418 | remi | 2006-05-21 14:53:52 +0300 (Sun, 21 May 2006) | 3 lines
Changed paths:
   M /trunk/src/Makefile.am
   A /trunk/src/conf.c (from /trunk/src/conf.cpp:1417)
   D /trunk/src/conf.cpp
   D /trunk/src/dummy.cpp
   M /trunk/src/miredo.h

Compile and link miredo entirely with the C compiler.
This should make it much easier to cross-compile to embedded platforms.

------------------------------------------------------------------------
r1417 | remi | 2006-05-21 14:49:56 +0300 (Sun, 21 May 2006) | 3 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/miredo.h

Kill remnants of MiredoConf, which was the last C++ class in the whole
project.

------------------------------------------------------------------------
r1416 | remi | 2006-05-21 14:43:10 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am
   A /trunk/src/checkconf.c (from /trunk/src/checkconf.cpp:1415)
   D /trunk/src/checkconf.cpp

Convert checkconf to C

------------------------------------------------------------------------
r1415 | remi | 2006-05-21 14:42:00 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp

Migrate checkconf.cpp to C bindings

------------------------------------------------------------------------
r1414 | remi | 2006-05-21 14:36:13 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am
   M /trunk/src/conf.h
   A /trunk/src/miredo.c (from /trunk/src/miredo.cpp:1413)
   D /trunk/src/miredo.cpp

Convert miredo.cpp to C (signal handling, forking and config loading)

------------------------------------------------------------------------
r1413 | remi | 2006-05-21 14:33:13 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Use C bindings

------------------------------------------------------------------------
r1412 | remi | 2006-05-21 14:32:48 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Complete C binding for MiredoConf

------------------------------------------------------------------------
r1411 | remi | 2006-05-21 14:16:33 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.c
   M /trunk/src/privproc.c

Fix files header comment

------------------------------------------------------------------------
r1410 | remi | 2006-05-21 14:15:48 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Further internal conversion of MiredoConf to C

------------------------------------------------------------------------
r1409 | remi | 2006-05-21 12:47:14 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/miredo.cpp

Almost dismantled MiredoConf C++ class

------------------------------------------------------------------------
r1408 | remi | 2006-05-21 12:34:39 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/miredo.cpp

Further convert to C

------------------------------------------------------------------------
r1407 | remi | 2006-05-21 12:14:29 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/miredo.cpp

C++ ParseSyslogFacility -> c miredo_conf_parse_syslog_facility

------------------------------------------------------------------------
r1406 | remi | 2006-05-21 12:10:21 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp

Partially convert checkconf to C

------------------------------------------------------------------------
r1405 | remi | 2006-05-21 11:50:17 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp
   M /trunk/src/relay.c
   M /trunk/src/server.c

Use parse_teredo_prefix

------------------------------------------------------------------------
r1404 | remi | 2006-05-21 11:48:49 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Resurrect parse_teredo_prefix

------------------------------------------------------------------------
r1403 | remi | 2006-05-21 11:44:23 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Suppress ParseIPv(6|4), C-style C++-only functions

------------------------------------------------------------------------
r1402 | remi | 2006-05-21 11:33:22 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am
   A /trunk/src/dummy.cpp
   A /trunk/src/isatap.c (from /trunk/src/isatap.cpp:1401)
   D /trunk/src/isatap.cpp
   M /trunk/src/miredo.h
   A /trunk/src/relay.c (from /trunk/src/relay.cpp:1397)
   D /trunk/src/relay.cpp
   A /trunk/src/server.c (from /trunk/src/server.cpp:1400)
   D /trunk/src/server.cpp

Converts all three daemons core to C (only config parsing was C++)

------------------------------------------------------------------------
r1401 | remi | 2006-05-21 11:28:25 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Made GetIPv4ByName() a C function

------------------------------------------------------------------------
r1400 | remi | 2006-05-21 11:17:32 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/conf.h

Cosmetic

------------------------------------------------------------------------
r1399 | remi | 2006-05-21 10:55:34 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Partial C bindings for MiredoConf

------------------------------------------------------------------------
r1398 | remi | 2006-05-21 10:08:11 +0300 (Sun, 21 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/mire.c

Some commented out custom mire modifications for stress testing

------------------------------------------------------------------------
r1397 | remi | 2006-05-20 22:03:57 +0300 (Sat, 20 May 2006) | 4 lines
Changed paths:
   M /trunk/compat/barrier.h
   M /trunk/configure.ac

Fix for uclibc which has the very poor idea of defining
PTHREAD_BARRIER_SERIAL_THREAD and pthread_barrier_t but not the
functions to use them

------------------------------------------------------------------------
r1396 | remi | 2006-05-20 12:14:56 +0300 (Sat, 20 May 2006) | 3 lines
Changed paths:
   M /trunk/src/isatap.cpp
   M /trunk/src/relay.cpp

- Restore addrwatch
- Fix pselect() signal sets

------------------------------------------------------------------------
r1395 | remi | 2006-05-20 12:03:10 +0300 (Sat, 20 May 2006) | 3 lines
Changed paths:
   M /trunk/src/addrwatch.c
   M /trunk/src/relay.cpp

Revert addrwatch NULL optimization, which is made utterly useless by
the switch to blocking mode and multiple threads.

------------------------------------------------------------------------
r1394 | remi | 2006-05-20 11:57:45 +0300 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Get rid of poll() that is made redumdant while using blocking mode

------------------------------------------------------------------------
r1393 | remi | 2006-05-20 11:56:34 +0300 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Remove useless #include

------------------------------------------------------------------------
r1392 | remi | 2006-05-20 11:54:13 +0300 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Use blocking mode for UDP sockets to increase performance.

------------------------------------------------------------------------
r1391 | remi | 2006-05-20 11:52:55 +0300 (Sat, 20 May 2006) | 4 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Use blocking mode for the tunnel device.
This increases performance by about 10% on my box when using
tun6_wait_recv(), with logically no impact on tun6_recv().

------------------------------------------------------------------------
r1390 | remi | 2006-05-20 11:28:09 +0300 (Sat, 20 May 2006) | 3 lines
Changed paths:
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Fix sigwait() usage: ignore EINTR errors, and only catch handled signals
The glibc documentation is defective.

------------------------------------------------------------------------
r1389 | remi | 2006-05-20 10:56:38 +0300 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h

Suppress miredo_done()

------------------------------------------------------------------------
r1388 | remi | 2006-05-20 10:56:12 +0300 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.cpp

Also get rid of miredo_done() here

------------------------------------------------------------------------
r1387 | remi | 2006-05-20 10:52:38 +0300 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Use sigwait() - break addrwatch

------------------------------------------------------------------------
r1386 | remi | 2006-05-20 10:49:16 +0300 (Sat, 20 May 2006) | 3 lines
Changed paths:
   M /trunk/src/server.cpp

Remove usage miredo_done(). With sigwait() signal handlers are not called,
so miredo_done() will never return true.

------------------------------------------------------------------------
r1385 | remi | 2006-05-20 10:21:01 +0300 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Fix previous commit

------------------------------------------------------------------------
r1384 | remi | 2006-05-20 10:19:18 +0300 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Fix client-less compilation

------------------------------------------------------------------------
r1383 | remi | 2006-05-20 10:13:32 +0300 (Sat, 20 May 2006) | 3 lines
Changed paths:
   M /trunk/src/Makefile.am
   M /trunk/src/relay.cpp

Run packet encapsulation in a dedicated separate thread,
so that we can block in tun6_wait_recv, which is a little bit faster.

------------------------------------------------------------------------
r1382 | remi | 2006-05-19 23:48:53 +0300 (Fri, 19 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

SO_REUSEADDR muts be set before bind()

------------------------------------------------------------------------
r1381 | remi | 2006-05-19 23:34:13 +0300 (Fri, 19 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Use thread cancellation rather than a pipe to terminate receive thread

------------------------------------------------------------------------
r1380 | remi | 2006-05-19 23:20:54 +0300 (Fri, 19 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Some documentation

------------------------------------------------------------------------
r1379 | remi | 2006-05-19 22:15:00 +0300 (Fri, 19 May 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Code simplification

------------------------------------------------------------------------
r1378 | remi | 2006-05-19 22:13:45 +0300 (Fri, 19 May 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.c

- Minor optimization: don't call teredo_queue_emit when not needed
- Some cosmetics

------------------------------------------------------------------------
r1377 | remi | 2006-05-19 21:48:18 +0300 (Fri, 19 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Cosmetic

------------------------------------------------------------------------
r1376 | remi | 2006-05-19 21:35:59 +0300 (Fri, 19 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/v4global.c

RFC-compliant global unicast IPv4 check

------------------------------------------------------------------------
r1375 | remi | 2006-05-19 20:01:23 +0300 (Fri, 19 May 2006) | 3 lines
Changed paths:
   M /trunk/src/addrwatch.c
   M /trunk/src/relay.cpp

Do not call miredo_addrwatch_available when not used
(speeds up run_tunnel quite a bit).

------------------------------------------------------------------------
r1374 | remi | 2006-05-19 19:56:01 +0300 (Fri, 19 May 2006) | 3 lines
Changed paths:
   M /trunk/src/addrwatch.c

boolean are well below the atomic read/write size on any arch,
so don't lock a mutex to read them

------------------------------------------------------------------------
r1373 | remi | 2006-05-18 22:48:30 +0300 (Thu, 18 May 2006) | 7 lines
Changed paths:
   M /trunk/libteredo/maintain.c

- Use times() instead of gettimeofday() for maintenance timings.
  This should further improve handling of system suspend and system date
  changes: gettimeofday() would detect if miredo is late, but not if it
  is ahead of time (such as when the system clock is set back).
- Handle bare authenticated packet while waiting for DNS to come back.
- Kill minor bug-typo in time drift detection (tv_sec instead of tv_usec)

------------------------------------------------------------------------
r1372 | remi | 2006-05-18 22:41:20 +0300 (Thu, 18 May 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Fix typo

------------------------------------------------------------------------
r1371 | remi | 2006-05-18 17:47:37 +0300 (Thu, 18 May 2006) | 2 lines
Changed paths:
   M /trunk/README

Fix contradiction spotted by Christophe Mutricy

------------------------------------------------------------------------
r1370 | remi | 2006-05-15 20:15:58 +0300 (Mon, 15 May 2006) | 2 lines
Changed paths:
   M /trunk/misc/miredo-server.in
   M /trunk/misc/miredo.in

Use non-LSB ?\226?\128?\156fancy?\226?\128?\157 Debian initscript log messages

------------------------------------------------------------------------
r1369 | remi | 2006-05-15 19:11:22 +0300 (Mon, 15 May 2006) | 3 lines
Changed paths:
   M /trunk/misc/Makefile.am
   A /trunk/misc/miredo-server.in (from /trunk/misc/miredo-server.sh-in:1366)
   D /trunk/misc/miredo-server.sh-in
   A /trunk/misc/miredo.in (from /trunk/misc/miredo.sh-in:1366)
   D /trunk/misc/miredo.sh-in

Debian seems to favor initscripts without .sh at the end.
Follows this convention.

------------------------------------------------------------------------
r1368 | remi | 2006-05-14 19:25:56 +0300 (Sun, 14 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/mire.c

Remove debug message

------------------------------------------------------------------------
r1367 | remi | 2006-05-14 18:00:03 +0300 (Sun, 14 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Receiving thread must not die on ignored signals (such as SIGCONT)

------------------------------------------------------------------------
r1366 | remi | 2006-05-14 13:22:28 +0300 (Sun, 14 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo
   M /trunk/libteredo/Makefile.am

rename libteredo-mire to teredo-mire as it is not a library

------------------------------------------------------------------------
r1365 | remi | 2006-05-14 13:22:01 +0300 (Sun, 14 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c

Suppress GCC 4.1 warning

------------------------------------------------------------------------
r1351 | remi | 2006-05-12 22:15:43 +0300 (Fri, 12 May 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/maintain.c

- Wait for symmetric probe for 4 seconds, not 4 seconds plus almost 4
  seconds left from the restricted probe.
- Factorize timespec/timeval conversion

------------------------------------------------------------------------
r1350 | remi | 2006-05-12 22:00:12 +0300 (Fri, 12 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Cosmetics

------------------------------------------------------------------------
r1349 | remi | 2006-05-12 21:59:32 +0300 (Fri, 12 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Do not accept invalid RA

------------------------------------------------------------------------
r1348 | remi | 2006-05-12 21:41:43 +0300 (Fri, 12 May 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.cpp
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Check that we should actually exit for pselect()/sigwait() returns EINTR.

------------------------------------------------------------------------
r1347 | remi | 2006-05-12 19:12:09 +0300 (Fri, 12 May 2006) | 2 lines
Changed paths:
   M /trunk/TODO

DragonFly tests done

------------------------------------------------------------------------
r1346 | remi | 2006-05-12 19:11:00 +0300 (Fri, 12 May 2006) | 2 lines
Changed paths:
   M /trunk/README

DragonFly and FreeBSD 4 instructions

------------------------------------------------------------------------
r1345 | remi | 2006-05-12 19:02:50 +0300 (Fri, 12 May 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.cpp

Another DragonFly compile fix

------------------------------------------------------------------------
r1344 | remi | 2006-05-12 18:52:02 +0300 (Fri, 12 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/mire.c

DragonFlyBSD compile fix

------------------------------------------------------------------------
r1343 | remi | 2006-05-12 17:41:31 +0300 (Fri, 12 May 2006) | 3 lines
Changed paths:
   M /trunk/THANKS
   M /trunk/compat/barrier.c

Work-around for pthread_barrier_* on DragonFly
also from NetBSD pkgsrc

------------------------------------------------------------------------
r1342 | remi | 2006-05-12 17:27:32 +0300 (Fri, 12 May 2006) | 3 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libtun6/tun6.c

Use net/tun/if_tun.h as a fallback instead of net/if_tun.h
(another DragonFly fix adapted from NetBSD pkgsrc)

------------------------------------------------------------------------
r1341 | remi | 2006-05-12 17:18:40 +0300 (Fri, 12 May 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

<net/if_var.h> test fix from NetBSD CVS (miredo 0.8.4nb1)

------------------------------------------------------------------------
r1340 | remi | 2006-05-11 19:38:11 +0300 (Thu, 11 May 2006) | 5 lines
Changed paths:
   M /trunk/TODO

* miredo-server does not _create_ packet that it sends through via
SOCK_RAW, so we can't trust them, and we must NOT assume they are
properly summed
* libtun6 must not disable checksum verification

------------------------------------------------------------------------
r1339 | remi | 2006-05-11 19:28:03 +0300 (Thu, 11 May 2006) | 2 lines
Changed paths:
   M /trunk/TODO

Darwin was done already

------------------------------------------------------------------------
r1338 | remi | 2006-05-11 19:26:53 +0300 (Thu, 11 May 2006) | 2 lines
Changed paths:
   M /trunk/TODO

Rewrite task status description

------------------------------------------------------------------------
r1337 | remi | 2006-05-11 18:56:19 +0300 (Thu, 11 May 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

This is 0.9.2-svn

------------------------------------------------------------------------
r1335 | remi | 2006-05-10 21:14:31 +0300 (Wed, 10 May 2006) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync PO files for release 0.9.1

------------------------------------------------------------------------
r1334 | remi | 2006-05-10 20:56:14 +0300 (Wed, 10 May 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/configure.ac

Update infos for release 0.9.1

------------------------------------------------------------------------
r1333 | remi | 2006-05-10 20:44:25 +0300 (Wed, 10 May 2006) | 2 lines
Changed paths:
   M /trunk/doc/miredo.8-in

Remove beta-time warnings

------------------------------------------------------------------------
r1332 | remi | 2006-05-10 19:49:22 +0300 (Wed, 10 May 2006) | 2 lines
Changed paths:
   M /trunk/doc/Makefile.am
   A /trunk/doc/isatapd.8-in (from /trunk/doc/miredo.8-in:1330)
   A /trunk/doc/isatapd.conf.5 (from /trunk/doc/miredo.conf.5:1330)

Manual pages for isatapd and isatapd.conf

------------------------------------------------------------------------
r1331 | remi | 2006-05-10 18:30:42 +0300 (Wed, 10 May 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.cpp

Fix naming os isatapd related files

------------------------------------------------------------------------
r1330 | remi | 2006-05-10 18:27:24 +0300 (Wed, 10 May 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.c

tun-tap-osx vendor has confirmed the TUNSIFHEAD bug.
On Mac OS X, only ignore EINVAL error with TUNSIFHEAD.

------------------------------------------------------------------------
r1329 | remi | 2006-05-09 22:29:45 +0300 (Tue, 09 May 2006) | 2 lines
Changed paths:
   M /trunk/compat/closefrom.c

Ceil closefrom() with FD_SETSIZE rather than 0x10000

------------------------------------------------------------------------
r1328 | remi | 2006-05-09 21:07:38 +0300 (Tue, 09 May 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync PO files

------------------------------------------------------------------------
r1327 | remi | 2006-05-09 21:05:19 +0300 (Tue, 09 May 2006) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/libtun6/tun6.c

Support for Mac OS X via (buggy) tun-tap-osx

------------------------------------------------------------------------
r1326 | remi | 2006-05-09 20:23:31 +0300 (Tue, 09 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am

Attempt to fix pthread_cancel() on Mac OS X

------------------------------------------------------------------------
r1325 | remi | 2006-05-09 20:23:07 +0300 (Tue, 09 May 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.cpp

BSD compile fix

------------------------------------------------------------------------
r1324 | remi | 2006-05-08 22:36:24 +0300 (Mon, 08 May 2006) | 2 lines
Changed paths:
   M /trunk/THANKS

Credits Andr?\195?\169-John Mas

------------------------------------------------------------------------
r1323 | remi | 2006-05-08 21:21:40 +0300 (Mon, 08 May 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Cosmetic fix

------------------------------------------------------------------------
r1322 | remi | 2006-05-08 21:20:46 +0300 (Mon, 08 May 2006) | 2 lines
Changed paths:
   M /trunk/compat/closefrom.c

Work-around Mac OS X falacious file descriptors limit

------------------------------------------------------------------------
r1321 | remi | 2006-05-08 21:00:45 +0300 (Mon, 08 May 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Compile libteredo before libtun5 (cosmetic)

------------------------------------------------------------------------
r1320 | remi | 2006-05-08 20:56:15 +0300 (Mon, 08 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/list.c

Fix a race condition in the peer list regression test

------------------------------------------------------------------------
r1319 | remi | 2006-05-08 20:27:19 +0300 (Mon, 08 May 2006) | 2 lines
Changed paths:
   M /trunk/src/isatap.cpp

BSD compile fix

------------------------------------------------------------------------
r1318 | remi | 2006-05-08 20:18:26 +0300 (Mon, 08 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/mire.c

Big endian fix

------------------------------------------------------------------------
r1317 | remi | 2006-05-08 20:16:48 +0300 (Mon, 08 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/mire.c

Mac OS X compile fix

------------------------------------------------------------------------
r1316 | remi | 2006-05-08 20:08:30 +0300 (Mon, 08 May 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Rename miredo-isatap as isatapd

------------------------------------------------------------------------
r1315 | remi | 2006-05-07 21:52:58 +0300 (Sun, 07 May 2006) | 2 lines
Changed paths:
   M /trunk/README

Some more update and simplification

------------------------------------------------------------------------
r1314 | remi | 2006-05-07 21:43:30 +0300 (Sun, 07 May 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/THANKS

Use nice quotes

------------------------------------------------------------------------
r1313 | remi | 2006-05-07 21:39:45 +0300 (Sun, 07 May 2006) | 3 lines
Changed paths:
   M /trunk/README

Hmm, miredo is now used in production, and is quite stable...
remove the scary alpha version note

------------------------------------------------------------------------
r1312 | remi | 2006-05-06 21:46:23 +0300 (Sat, 06 May 2006) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/README
   M /trunk/configure.ac
   M /trunk/po/Makevars

Add miredo-devel mailing list address or replace my personal own with that

------------------------------------------------------------------------
r1311 | remi | 2006-05-05 23:33:54 +0300 (Fri, 05 May 2006) | 4 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.ac
   M /trunk/misc/Makefile.am

Add option --disable-sample-conf to configure so that downstream
packagers need not patch the build system to (not) install config files
their own way.

------------------------------------------------------------------------
r1310 | remi | 2006-05-05 18:41:14 +0300 (Fri, 05 May 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Improved error messages for BSD tunnel allocation

------------------------------------------------------------------------
r1309 | remi | 2006-05-05 18:34:16 +0300 (Fri, 05 May 2006) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

Remove extra non-ASCII character

------------------------------------------------------------------------
r1308 | remi | 2006-05-02 18:14:27 +0300 (Tue, 02 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

teredo_run() now process all pending packets rather than a single one

------------------------------------------------------------------------
r1307 | remi | 2006-05-02 18:05:34 +0300 (Tue, 02 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/tunnel.h

kill teredo_register_read_set() that is not used anymore

------------------------------------------------------------------------
r1306 | remi | 2006-05-01 20:09:22 +0300 (Mon, 01 May 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Make sure svn log does not ask questions

------------------------------------------------------------------------
r1305 | remi | 2006-05-01 19:48:10 +0300 (Mon, 01 May 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Miredo now runs Packet reception asynchronously.

------------------------------------------------------------------------
r1304 | remi | 2006-05-01 19:30:26 +0300 (Mon, 01 May 2006) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in

Add checkconf.

------------------------------------------------------------------------
r1303 | remi | 2006-05-01 19:28:51 +0300 (Mon, 01 May 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/tunnel.h

Untested teredo_run_async() to perform Packet reception in a separate thread

------------------------------------------------------------------------
r1299 | remi | 2006-05-01 13:23:46 +0300 (Mon, 01 May 2006) | 2 lines
Changed paths:
   M /trunk/doc/miredo-checkconf.8-in

Update miredo-checkconf.8 wrt previous commit

------------------------------------------------------------------------
r1298 | remi | 2006-05-01 13:22:34 +0300 (Mon, 01 May 2006) | 4 lines
Changed paths:
   M /trunk/src/checkconf.cpp

- miredo-checkconf detects superfluous directives
- miredo-checkconf handles RelayType and follows the same logic as
  miredo depending on that setting

------------------------------------------------------------------------
r1297 | remi | 2006-05-01 11:40:04 +0300 (Mon, 01 May 2006) | 2 lines
Changed paths:
   M /trunk

Update svn:ignore wrt automated ChangeLog

------------------------------------------------------------------------
r1296 | remi | 2006-04-30 20:07:40 +0300 (Sun, 30 Apr 2006) | 2 lines
Changed paths:
   D /trunk/ChangeLog
   A /trunk/ChangeLog.old
   M /trunk/Makefile.am

Automatic ChangeLog updates adapted from ndisc6 package

------------------------------------------------------------------------
r1295 | remi | 2006-04-30 19:49:21 +0300 (Sun, 30 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/mire.c

Rudimentary --help and --version for libteredo-mire
This program really needs some documentation.

------------------------------------------------------------------------
r1294 | remi | 2006-04-30 19:25:00 +0300 (Sun, 30 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.c

Document resetting of the Judy dynamic arrays

------------------------------------------------------------------------
r1292 | remi | 2006-04-30 19:22:33 +0300 (Sun, 30 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.c

Revert [1287] - there was really no bug to fix there.

------------------------------------------------------------------------
r1287 | remi | 2006-04-30 19:05:08 +0300 (Sun, 30 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.c

Peer list reset thread-safety fix

------------------------------------------------------------------------
r1286 | remi | 2006-04-30 18:50:57 +0300 (Sun, 30 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.c

Fix initialization of the tunnel in teredo_create().
I'm afraid this fatality affects 0.8.2.

------------------------------------------------------------------------
r1285 | remi | 2006-04-30 18:50:22 +0300 (Sun, 30 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.c

Fix inconsistencies in documentation of the garbage collector

------------------------------------------------------------------------
r1284 | remi | 2006-04-30 18:37:30 +0300 (Sun, 30 Apr 2006) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.c

Document most of libteredo thread-safety considerations

------------------------------------------------------------------------
r1283 | remi | 2006-04-30 13:41:57 +0300 (Sun, 30 Apr 2006) | 4 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/peerlist.c
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.c

Release list lock before emitting queued packets
There should not be any case where we call teredo_send, recv_cb or
icmpv6_cb while holding the list lock

------------------------------------------------------------------------
r1282 | remi | 2006-04-30 13:11:51 +0300 (Sun, 30 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.c
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.c

Rename struct packet to struct teredo_queue

------------------------------------------------------------------------
r1281 | remi | 2006-04-30 12:40:06 +0300 (Sun, 30 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Release list lock before sending pings (Direct connectivity check)

------------------------------------------------------------------------
r1280 | remi | 2006-04-30 12:32:28 +0300 (Sun, 30 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Unlock the peer list before transmitting packets over the tunnel

------------------------------------------------------------------------
r1279 | remi | 2006-04-29 14:46:12 +0300 (Sat, 29 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.c

libteredo: Handle case whereby fd >= FD_SETSIZE cleanly.
This could not happen in miredo anyway given the call of closefrom(3).

------------------------------------------------------------------------
r1278 | remi | 2006-04-29 14:43:32 +0300 (Sat, 29 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/main.c

Document usefulness of closefrom()

------------------------------------------------------------------------
r1277 | remi | 2006-04-29 14:40:52 +0300 (Sat, 29 Apr 2006) | 4 lines
Changed paths:
   M /trunk/libtun6/tun6.c

tun6_recv(): - avoid out-of-bound read if fd >= FD_SETSIZE
             - still obey documented semantics regardless
tun6_registerReadSet(): - return an error if fd >= FD_SETSIZE

------------------------------------------------------------------------
r1276 | remi | 2006-04-29 14:15:24 +0300 (Sat, 29 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

teredo_wait_recv(): Use poll() instead of select()

------------------------------------------------------------------------
r1275 | remi | 2006-04-29 14:12:08 +0300 (Sat, 29 Apr 2006) | 5 lines
Changed paths:
   M /trunk/libtun6/tun6.c
   M /trunk/libtun6/tun6.h
   M /trunk/src/relay.cpp

- tun6_wait_recv(): poll() + tun6_recv()
- put tunnel device into non blocking mode to make sure we won't block
- remove const qualifier to tun6* fro tun6_recv/tun6_send so that we
  can modify the struct later (for instance to keep usage statistics)

------------------------------------------------------------------------
r1274 | remi | 2006-04-24 20:22:06 +0300 (Mon, 24 Apr 2006) | 4 lines
Changed paths:
   M /trunk/src/isatap.cpp

- Set unique bit properly in our own ISATAP IPv6 address EUI64
- Ignore unique and group bit upon receival
- Some cleanup and fixes

------------------------------------------------------------------------
r1273 | remi | 2006-04-24 17:38:36 +0300 (Mon, 24 Apr 2006) | 3 lines
Changed paths:
   M /trunk/src/Makefile.am
   A /trunk/src/isatap.cpp (from /trunk/src/relay.cpp:1270)

miredo-isatap: Brand-new bleeding-edge ISATAP router
based on libtun6 and miredo

------------------------------------------------------------------------
r1272 | remi | 2006-04-24 17:35:44 +0300 (Mon, 24 Apr 2006) | 2 lines
Changed paths:
   M /trunk/TODO

TODO: Some more items

------------------------------------------------------------------------
r1271 | remi | 2006-04-23 20:43:38 +0300 (Sun, 23 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Fix typo

------------------------------------------------------------------------
r1270 | remi | 2006-04-23 11:46:54 +0300 (Sun, 23 Apr 2006) | 2 lines
Changed paths:
   M /trunk/doc/miredo.8-in

Spelling mistake fixed

------------------------------------------------------------------------
r1269 | remi | 2006-04-21 00:30:30 +0300 (Fri, 21 Apr 2006) | 2 lines
Changed paths:
   M /trunk/bootstrap

Print automake warnings

------------------------------------------------------------------------
r1268 | remi | 2006-04-18 14:48:23 +0300 (Tue, 18 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo

Ignore libteredo-mire binaries

------------------------------------------------------------------------
r1267 | remi | 2006-04-18 14:47:05 +0300 (Tue, 18 Apr 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/mire.c

New (non-privileged!) program: libteredo-mire
Stateless Teredo responder that can be used to diagnose connectivity
toward Teredo clients (from another client or from the IPv6 Internet)

------------------------------------------------------------------------
r1266 | remi | 2006-04-16 18:12:10 +0300 (Sun, 16 Apr 2006) | 5 lines
Changed paths:
   M /trunk/src/main.c

Initialize genuine additionnal groups rather instead of clearing them
all. Sometimes groups are used to actually forbid something. Also,
additionnal groups might be necessary to operate properly (such as the
group of users allowed to read /proc with grsecurity patch for Linux).

------------------------------------------------------------------------
r1265 | remi | 2006-04-15 21:39:38 +0300 (Sat, 15 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/main.c

Compile fix

------------------------------------------------------------------------
r1264 | remi | 2006-04-15 21:38:21 +0300 (Sat, 15 Apr 2006) | 4 lines
Changed paths:
   M /trunk/src/main.c
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

- Make sure setgid() works properly while using libcap
- Only requests CAP_SYS_CHROOT when actually using chroot()
- Commoditize capabilities required by src/miredo.cpp

------------------------------------------------------------------------
r1263 | remi | 2006-04-15 21:26:31 +0300 (Sat, 15 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/main.c

Don't handle impossible error.

------------------------------------------------------------------------
r1262 | remi | 2006-04-15 21:24:11 +0300 (Sat, 15 Apr 2006) | 3 lines
Changed paths:
   M /trunk/src/main.c

seteuid() before setgid(), so that setgid() won't fail if the initial
effective user is not root.

------------------------------------------------------------------------
r1261 | remi | 2006-04-15 21:10:52 +0300 (Sat, 15 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/main.c

Fix setuid to root error message

------------------------------------------------------------------------
r1260 | remi | 2006-04-15 19:44:50 +0300 (Sat, 15 Apr 2006) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac
   M /trunk/libteredo/relay.c

Remove useless code.
Switch to unstable branch version number.

------------------------------------------------------------------------
r1259 | remi | 2006-04-15 19:13:56 +0300 (Sat, 15 Apr 2006) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac

Switching to version 0.8.3-pre

------------------------------------------------------------------------
r1257 | remi | 2006-04-15 00:15:21 +0300 (Sat, 15 Apr 2006) | 3 lines
Changed paths:
   M /trunk/bootstrap

Fix bootstrap
That's the kind of regression you detect once you tagged the release...

------------------------------------------------------------------------
r1256 | remi | 2006-04-15 00:09:42 +0300 (Sat, 15 Apr 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Fix $Id$ in ChangeLog again

------------------------------------------------------------------------
r1254 | remi | 2006-04-15 00:07:25 +0300 (Sat, 15 Apr 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog

ChangeLog for release 0.8.2

------------------------------------------------------------------------
r1253 | remi | 2006-04-15 00:00:34 +0300 (Sat, 15 Apr 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

NEWS for upcoming release 0.8.2

------------------------------------------------------------------------
r1252 | remi | 2006-04-14 23:46:05 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update PO files for 0.8.2 release

------------------------------------------------------------------------
r1251 | remi | 2006-04-14 20:18:36 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Document teredo_register_readset()

------------------------------------------------------------------------
r1250 | remi | 2006-04-14 19:40:28 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/diagnose.c

Another OpenBSD compile fix

------------------------------------------------------------------------
r1249 | remi | 2006-04-14 19:38:43 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/strlcpy.c
   M /trunk/compat/test-strlcpy.c

Fix strlcpy() again. It didn't match the official OpenBSD semantics.

------------------------------------------------------------------------
r1248 | remi | 2006-04-14 19:28:57 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.h

Warning fix

------------------------------------------------------------------------
r1247 | remi | 2006-04-14 19:27:36 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

OpenBSD compile fix

------------------------------------------------------------------------
r1246 | remi | 2006-04-14 19:25:34 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Cosmetic fix

------------------------------------------------------------------------
r1245 | remi | 2006-04-14 19:18:16 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.h

Fix compilation with libcap and client support

------------------------------------------------------------------------
r1244 | remi | 2006-04-14 19:17:49 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat

svn:ignore for strlcpy unit test

------------------------------------------------------------------------
r1243 | remi | 2006-04-14 19:12:29 +0300 (Fri, 14 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/debug.h
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/peerlist.c
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/server.c

Commoditize pthread_mutex Linux-specific debugging
and use it everywhere in libteredo

------------------------------------------------------------------------
r1242 | remi | 2006-04-14 14:24:56 +0300 (Fri, 14 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.c

Compute ICMPv6 rate limiting per tunnel instance
(it was previously static)

------------------------------------------------------------------------
r1241 | remi | 2006-04-14 14:03:58 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/addrwatch.c
   M /trunk/src/addrwatch.h
   M /trunk/src/relay.cpp

Use a pipe instead of a timeout to signal addrwatch state changes

------------------------------------------------------------------------
r1240 | remi | 2006-04-14 13:42:30 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp

Move the previous new functions to miredo only (ie. out of miredo-server)

------------------------------------------------------------------------
r1239 | remi | 2006-04-14 12:50:12 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/privproc.c
   M /trunk/src/relay.cpp

Use miredo_setup_(nonblock_)fd() from previous commit

------------------------------------------------------------------------
r1238 | remi | 2006-04-14 12:47:05 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h

Commoditize close-on-exec and non-blocking flags settings

------------------------------------------------------------------------
r1237 | remi | 2006-04-14 09:39:20 +0300 (Fri, 14 Apr 2006) | 3 lines
Changed paths:
   M /trunk/compat/clearenv.c
   M /trunk/compat/closefrom.c
   M /trunk/compat/pselect.c
   M /trunk/compat/strlcpy.c

Warning fixes: #include <config.h>
to ensure declaration and definition prototypes match

------------------------------------------------------------------------
r1236 | remi | 2006-04-14 09:33:49 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp

Compiler warning fix

------------------------------------------------------------------------
r1235 | remi | 2006-04-14 09:31:33 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/closefrom.c

ICC compile fix

------------------------------------------------------------------------
r1234 | remi | 2006-04-14 00:21:28 +0300 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.c

Make valgrind happy

------------------------------------------------------------------------
r1233 | remi | 2006-04-13 20:47:21 +0300 (Thu, 13 Apr 2006) | 2 lines
Changed paths:
   M /trunk/doc/miredo-server.conf.5

Fix typo

------------------------------------------------------------------------
r1232 | remi | 2006-04-13 20:43:04 +0300 (Thu, 13 Apr 2006) | 2 lines
Changed paths:
   M /trunk/misc/miredo-server.conf-dist
   M /trunk/misc/miredo.conf-dist

Simplify sample configuration a lot

------------------------------------------------------------------------
r1231 | remi | 2006-04-13 17:38:16 +0300 (Thu, 13 Apr 2006) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/doc/miredo.conf.5

Document autoclient mode

------------------------------------------------------------------------
r1230 | remi | 2006-04-13 17:19:02 +0300 (Thu, 13 Apr 2006) | 2 lines
Changed paths:
   M /trunk/doc/miredo-checkconf.8-in
   M /trunk/doc/miredo-server.8-in
   M /trunk/doc/miredo-server.conf.5
   M /trunk/doc/miredo.8-in
   M /trunk/doc/miredo.conf.5

Fix encoding of man pages. Apparently Latin-1 is expected by default.

------------------------------------------------------------------------
r1229 | remi | 2006-04-13 16:50:56 +0300 (Thu, 13 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Fix typo

------------------------------------------------------------------------
r1228 | remi | 2006-04-13 16:49:57 +0300 (Thu, 13 Apr 2006) | 3 lines
Changed paths:
   M /trunk/src/relay.cpp

Support for ?\226?\128?\156autoclient?\226?\128?\157 RelayType, same as client with the
exception that it only runs when there is no other IPv6 connectivity.

------------------------------------------------------------------------
r1227 | remi | 2006-04-13 16:38:06 +0300 (Thu, 13 Apr 2006) | 3 lines
Changed paths:
   M /trunk/src/addrwatch.c
   M /trunk/src/addrwatch.h

- Fix parsing of interface index: that's hexadecimal, not decimal
- Remove useless callback support

------------------------------------------------------------------------
r1226 | remi | 2006-04-13 16:32:33 +0300 (Thu, 13 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/diagnose.c

Add unit test for tun6_getId()

------------------------------------------------------------------------
r1225 | remi | 2006-04-13 14:48:02 +0300 (Thu, 13 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/Makefile.am
   M /trunk/compat/strlcpy.c
   A /trunk/compat/test-strlcpy.c (from /trunk/compat/strlcpy.c:1224)

Regression test and another fix for strlcpy()

------------------------------------------------------------------------
r1224 | remi | 2006-04-13 14:30:03 +0300 (Thu, 13 Apr 2006) | 3 lines
Changed paths:
   M /trunk/compat/strlcpy.c

Fix insertion of nul at end of string in strlcpy() replacement.
It is fortunate the previous version never made it to a release.

------------------------------------------------------------------------
r1223 | remi | 2006-04-12 23:48:54 +0300 (Wed, 12 Apr 2006) | 5 lines
Changed paths:
   M /trunk/src/addrwatch.c

Force the proc file into non-blocking mode.
It should not normally block, unless it's not actually what it's
supposed to be. If it blocked, we could have deadlocks while trying to
terminate the addrwatch thread.

------------------------------------------------------------------------
r1222 | remi | 2006-04-12 22:25:04 +0300 (Wed, 12 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c
   M /trunk/src/privproc.c
   M /trunk/src/relay.cpp

Set close-on-exec flag on pipes and sockets

------------------------------------------------------------------------
r1221 | remi | 2006-04-12 22:10:18 +0300 (Wed, 12 Apr 2006) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/THANKS

Added recent contributors, updated global copyright infos

------------------------------------------------------------------------
r1220 | remi | 2006-04-12 21:25:26 +0300 (Wed, 12 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/md5.c
   M /trunk/libteredo/test/md5test.c

Add modification notice on the MD5 implementation

------------------------------------------------------------------------
r1219 | remi | 2006-04-12 20:55:47 +0300 (Wed, 12 Apr 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/teredo.c

- close libteredo's sockets at exec(),
- don't leak file descriptor when bind() fails,
- always set non-blocking mode regardless of earlier fnctl() failures

------------------------------------------------------------------------
r1218 | remi | 2006-04-11 20:31:46 +0300 (Tue, 11 Apr 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update PO files

------------------------------------------------------------------------
r1217 | remi | 2006-04-11 20:31:07 +0300 (Tue, 11 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/Makefile.am

libteredo-common.la: explicit convenience library for lower level code
that is shared between the tunnel (client/relay) and server

------------------------------------------------------------------------
r1216 | remi | 2006-04-11 20:21:11 +0300 (Tue, 11 Apr 2006) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in

POTFILES: libteredo/relay.c replaces libteredo/relay.cpp

------------------------------------------------------------------------
r1215 | remi | 2006-04-11 20:16:30 +0300 (Tue, 11 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/peerlist.c
   M /trunk/libteredo/relay.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/libteredo/server.c
   M /trunk/libteredo/server.h
   M /trunk/libteredo/test/hmac.c
   M /trunk/libteredo/tunnel.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

s/libteredo_/teredo_/g and some conflicting name fixes

------------------------------------------------------------------------
r1214 | remi | 2006-04-11 14:36:31 +0300 (Tue, 11 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

miredo-server: Use "miredo-server" as identity in syslog

------------------------------------------------------------------------
r1213 | remi | 2006-04-11 00:35:01 +0300 (Tue, 11 Apr 2006) | 2 lines
Changed paths:
   M /trunk/README

Fix typos

------------------------------------------------------------------------
r1212 | remi | 2006-04-11 00:32:09 +0300 (Tue, 11 Apr 2006) | 2 lines
Changed paths:
   M /trunk/TODO

Updated TODO list

------------------------------------------------------------------------
r1211 | remi | 2006-04-11 00:06:28 +0300 (Tue, 11 Apr 2006) | 4 lines
Changed paths:
   M /trunk/libtun6/diagnose.c

Revert back to an interface name request that is different from
miredo's default, so that the test does not fail when running miredo on
the build host because of a duplicate interface name.

------------------------------------------------------------------------
r1210 | remi | 2006-04-11 00:00:39 +0300 (Tue, 11 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/relay.c (from /trunk/libteredo/relay.cpp:1209)
   D /trunk/libteredo/relay.cpp

libteredo is now a pure C library

------------------------------------------------------------------------
r1209 | remi | 2006-04-10 23:55:49 +0300 (Mon, 10 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

The TeredoRelay class is no more.

------------------------------------------------------------------------
r1208 | remi | 2006-04-10 23:24:58 +0300 (Mon, 10 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Move maintenance initialization code to the new C functions.
TeredoRelay no longer needs a destructor, and hardly has a constructor.

------------------------------------------------------------------------
r1207 | remi | 2006-04-10 23:09:25 +0300 (Mon, 10 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Suppress redundant _sendIPv6Packet and SendIPv6Packet from the code
path to send a decapsulated packet to the kernel

------------------------------------------------------------------------
r1206 | remi | 2006-04-10 23:01:38 +0300 (Mon, 10 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Use dummy callbacks for libteredo instead of NULL
so that we never have to check for non-NULL callback before calling one

------------------------------------------------------------------------
r1205 | remi | 2006-04-10 22:49:27 +0300 (Mon, 10 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

More common relay/client create/destroy code factorization

------------------------------------------------------------------------
r1204 | remi | 2006-04-10 22:03:48 +0300 (Mon, 10 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Remove unused struct member

------------------------------------------------------------------------
r1203 | remi | 2006-04-10 22:02:35 +0300 (Mon, 10 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Factor common Teredo socket creation code between client and relay

------------------------------------------------------------------------
r1202 | remi | 2006-04-10 21:45:56 +0300 (Mon, 10 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Fix memory leak

------------------------------------------------------------------------
r1201 | remi | 2006-04-10 21:36:14 +0300 (Mon, 10 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fix allow_cone flag duplication

------------------------------------------------------------------------
r1200 | remi | 2006-04-10 18:48:16 +0300 (Mon, 10 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/tunnel.h
   M /trunk/src/relay.cpp

Avoid calling libteredo_get_privdata() - pass opaque pointer directly

------------------------------------------------------------------------
r1199 | remi | 2006-04-10 14:19:10 +0300 (Mon, 10 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Merge cTeredoRelay with parent class TeredoRelay, as it was its only
non-abstract derivative. Kill all virtual functions.

------------------------------------------------------------------------
r1198 | remi | 2006-04-10 00:01:03 +0300 (Mon, 10 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/Makefile.am
   D /trunk/libteredo/test/dummy.cpp

Remove (now) useless empty file

------------------------------------------------------------------------
r1197 | remi | 2006-04-09 23:59:06 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/peerlist.c (from /trunk/libteredo/peerlist.cpp:1196)
   D /trunk/libteredo/peerlist.cpp

peerlist.cpp -> peerlist.c

------------------------------------------------------------------------
r1196 | remi | 2006-04-09 23:49:51 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   D /trunk/libteredo/relay.h

Kill libteredo/relay.h

------------------------------------------------------------------------
r1195 | remi | 2006-04-09 23:38:33 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Further dismantle relay.h

------------------------------------------------------------------------
r1194 | remi | 2006-04-09 23:24:21 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Move teredo_state to <maintain.h>

------------------------------------------------------------------------
r1193 | remi | 2006-04-09 23:11:35 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/test/hmac.c
   A /trunk/libteredo/tunnel.h (from /trunk/libteredo/relay.h:1192)
   M /trunk/src/relay.cpp

Burry the internal C++ API in private libteredo headers.

------------------------------------------------------------------------
r1192 | remi | 2006-04-09 22:41:39 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Fix writing to /proc on Linux

------------------------------------------------------------------------
r1191 | remi | 2006-04-09 21:15:39 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fix another inverted error check

------------------------------------------------------------------------
r1190 | remi | 2006-04-09 21:09:14 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Fix inverted error condition

------------------------------------------------------------------------
r1189 | remi | 2006-04-09 21:00:35 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

client-less compilation fix

------------------------------------------------------------------------
r1188 | remi | 2006-04-09 20:59:21 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Port miredo to the C libteredo API

------------------------------------------------------------------------
r1187 | remi | 2006-04-09 20:55:55 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fix an obvious bug

------------------------------------------------------------------------
r1186 | remi | 2006-04-09 20:50:12 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Implement libteredo_send

------------------------------------------------------------------------
r1185 | remi | 2006-04-09 20:45:13 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Kill an useful function

------------------------------------------------------------------------
r1184 | remi | 2006-04-09 20:41:01 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Two more and very important missing functions

------------------------------------------------------------------------
r1183 | remi | 2006-04-09 20:24:27 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Use shorter function names

------------------------------------------------------------------------
r1182 | remi | 2006-04-09 20:20:16 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Add a missing binding in the libteredo C API

------------------------------------------------------------------------
r1181 | remi | 2006-04-09 20:00:42 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Small step toward usage of the libteredo C API

------------------------------------------------------------------------
r1180 | remi | 2006-04-09 19:54:06 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Cosmetic

------------------------------------------------------------------------
r1179 | remi | 2006-04-09 18:56:26 +0300 (Sun, 09 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/diagnose.c

Destroy created tunnel even if the test fails to limit the risk of
messing to much with the build host kernel.

------------------------------------------------------------------------
r1178 | remi | 2006-04-09 18:54:30 +0300 (Sun, 09 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Try to use FreeBSD dynamic ?\226?\128?\156/dev/tun?\226?\128?\157 and improves BSD interface naming
work arounds.

------------------------------------------------------------------------
r1177 | remi | 2006-04-09 18:39:36 +0300 (Sun, 09 Apr 2006) | 6 lines
Changed paths:
   M /trunk/libtun6/tun6.c

- Set FD_CLOEXEC so that it is safe to exec() while using libtun6.
- Rename interface back to its original name on BSD in tun6_destroy
  to mitigate the risk of triggering a situation whereby another
  program (typically a restarted miredo) cannot find out the
  interface name/index.

------------------------------------------------------------------------
r1176 | remi | 2006-04-09 15:23:12 +0300 (Sun, 09 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.c

BSD name problem partial/would-be work-around
I can't fix the BSD tunnel driver.

------------------------------------------------------------------------
r1175 | remi | 2006-04-09 11:33:53 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Ugly kludge for the unguessable tunnel name issue on BSD

------------------------------------------------------------------------
r1174 | remi | 2006-04-09 11:04:53 +0300 (Sun, 09 Apr 2006) | 4 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Only use interface id instead of interface name when setting up
addresses or routes, as far as possible (fixes a few minor race
condition and simplifies code).

------------------------------------------------------------------------
r1173 | remi | 2006-04-09 10:52:35 +0300 (Sun, 09 Apr 2006) | 5 lines
Changed paths:
   M /trunk/libtun6/tun6.c
   M /trunk/libtun6/tun6.h

Keep tunnel interface id (which should be immutable) instead of its
name which can be modified by the user. As such, if the user ever
renames the tunnel, libtun6 will still work. Also, we'll detect
immediatly if the BSD tunnel name is not detected properly.

------------------------------------------------------------------------
r1172 | remi | 2006-04-09 00:17:02 +0300 (Sun, 09 Apr 2006) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Initial (yet to be tested) C bindings for libteredo
The C++ bindings will probably be dumped someday

------------------------------------------------------------------------
r1171 | remi | 2006-04-09 00:15:06 +0300 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

InterfaceName directive is no longer Linux specific, so don't say it is

------------------------------------------------------------------------
r1170 | remi | 2006-04-08 22:14:32 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/diagnose.c

Don't use assert() on an expression with side effects

------------------------------------------------------------------------
r1169 | remi | 2006-04-08 22:13:53 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/pselect.c

Run-time fix

------------------------------------------------------------------------
r1168 | remi | 2006-04-08 21:54:49 +0300 (Sat, 08 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/test/md5test.c
   M /trunk/libtun6/tun6.c
   M /trunk/src/main.c

sprintf() -> snprintf() to make OpenBSD happy
(these sprintf() where designed to be overflow-proof anyway)

------------------------------------------------------------------------
r1167 | remi | 2006-04-08 21:54:00 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/pselect.c

Typo/compile fix

------------------------------------------------------------------------
r1166 | remi | 2006-04-08 20:46:30 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/addrwatch.c

Make addrwatch a stub on non-Linux as it won't work

------------------------------------------------------------------------
r1165 | remi | 2006-04-08 20:38:00 +0300 (Sat, 08 Apr 2006) | 3 lines
Changed paths:
   M /trunk/TODO

As far as I can tell, there is no route ?\226?\128?\156metric?\226?\128?\157 on BSD
(BSD route ?\226?\128?\156metrics?\226?\128?\157 are anything but a priority value).

------------------------------------------------------------------------
r1164 | remi | 2006-04-08 20:35:33 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Fix net/if_var.h check

------------------------------------------------------------------------
r1163 | remi | 2006-04-08 20:12:42 +0300 (Sat, 08 Apr 2006) | 4 lines
Changed paths:
   M /trunk/libtun6/diagnose.c
   M /trunk/libtun6/tun6.c

Dirty and quite broken work-around for tunnel interface naming on BSD.
Unfortunately, there doesn't seem to be any proper light solution to
this problem.

------------------------------------------------------------------------
r1162 | remi | 2006-04-08 19:44:56 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Don't comment out SIOCSIFNAME - it works

------------------------------------------------------------------------
r1161 | remi | 2006-04-08 19:44:19 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Interface (re)naming now works on FreeBSD !

------------------------------------------------------------------------
r1160 | remi | 2006-04-08 19:17:19 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Compile fix

------------------------------------------------------------------------
r1159 | remi | 2006-04-08 19:10:54 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Seemingly insufficient fixes for SIOCSIFNAME on FreeBSD

------------------------------------------------------------------------
r1158 | remi | 2006-04-08 18:56:56 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/diagnose.c

Test tun6_create with a non-NULL interface name

------------------------------------------------------------------------
r1157 | remi | 2006-04-08 14:59:07 +0300 (Sat, 08 Apr 2006) | 3 lines
Changed paths:
   M /trunk/configure.ac

Use ${PTHREAD_LDFLAGS} and ${PTHREAD_LIBS} when they are defined by
the configure's caller

------------------------------------------------------------------------
r1156 | remi | 2006-04-08 14:41:58 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Untested attempt to fix address family preprend for tun driver on Mac OS X

------------------------------------------------------------------------
r1155 | remi | 2006-04-08 14:30:46 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Linking fix for Mac OS X (res_init requires -lresolv)

------------------------------------------------------------------------
r1154 | remi | 2006-04-08 13:23:01 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/stresslist.c

Mac OS X already defines DELAY, so use another constant name

------------------------------------------------------------------------
r1153 | remi | 2006-04-08 13:18:14 +0300 (Sat, 08 Apr 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Make the Teredo state_lock instance-specific, which is how it should
be anyway. This should also fix one compilation issue on Mac OS X
(which does not have PTHREAD_RWLOCK_INITIALIZER).

------------------------------------------------------------------------
r1152 | remi | 2006-04-08 13:09:48 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Remove non-ASCII character

------------------------------------------------------------------------
r1151 | remi | 2006-04-08 13:00:29 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

Would-be fix for would-be OpenBSD kernel with non-BSD userland

------------------------------------------------------------------------
r1150 | remi | 2006-04-08 12:44:16 +0300 (Sat, 08 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Untested support for GNU/k*BSD

------------------------------------------------------------------------
r1149 | remi | 2006-04-08 01:02:22 +0300 (Sat, 08 Apr 2006) | 4 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/security.c
   M /trunk/libtun6/diagnose.c
   M /trunk/libtun6/tun6.c

- Remove all HAVE_xxx (xxx = some kernel/OS name)
  and use predefined constants instead
- Fix a warning on BSDs within libtun6-diagnose

------------------------------------------------------------------------
r1148 | remi | 2006-04-07 21:21:50 +0300 (Fri, 07 Apr 2006) | 2 lines
Changed paths:
   M /trunk/TODO

Update TODO list

------------------------------------------------------------------------
r1147 | remi | 2006-04-07 21:15:36 +0300 (Fri, 07 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/barrier.c

Remove useless #define

------------------------------------------------------------------------
r1146 | remi | 2006-04-07 14:47:13 +0300 (Fri, 07 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/clearenv.c

Mac OS X compile fix

------------------------------------------------------------------------
r1145 | remi | 2006-04-07 00:00:13 +0300 (Fri, 07 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Further improve error messages in BSD tun6_create()

------------------------------------------------------------------------
r1144 | remi | 2006-04-06 23:54:27 +0300 (Thu, 06 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/Makefile.am
   A /trunk/compat/pselect.c (from /trunk/compat/clearenv.c:1143)
   A /trunk/compat/pselect.h (from /trunk/compat/barrier.h:1143)
   M /trunk/configure.ac
   M /trunk/src/relay.cpp

pselect() replacement for OpenBSD

------------------------------------------------------------------------
r1143 | remi | 2006-04-06 15:22:35 +0300 (Thu, 06 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/clearenv.c

Remove erroneous static qualifier

------------------------------------------------------------------------
r1142 | remi | 2006-04-06 15:11:56 +0300 (Thu, 06 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/barrier.c

Compile fix

------------------------------------------------------------------------
r1141 | remi | 2006-04-06 15:05:33 +0300 (Thu, 06 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/clearenv.c

Compile fix

------------------------------------------------------------------------
r1140 | remi | 2006-04-06 09:43:44 +0300 (Thu, 06 Apr 2006) | 2 lines
Changed paths:
   M /trunk/compat/barrier.c

Make sure pthread_barrier_destroy() replacement does not block

------------------------------------------------------------------------
r1139 | remi | 2006-04-06 00:46:19 +0300 (Thu, 06 Apr 2006) | 2 lines
Changed paths:
   A /trunk/compat/clearenv.c (from /trunk/compat/closefrom.c:1138)
   A /trunk/compat/strlcpy.c (from /trunk/compat/closefrom.c:1138)
   M /trunk/configure.ac
   M /trunk/libtun6/Makefile.am
   M /trunk/libtun6/tun6.c
   M /trunk/src/main.c

Move clearenv() and strlcpy() replacement to libcompat

------------------------------------------------------------------------
r1138 | remi | 2006-04-06 00:34:54 +0300 (Thu, 06 Apr 2006) | 3 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/maintain.c
   M /trunk/src/Makefile.am
   M /trunk/src/main.c

- Link with libcompat when appropriate
- Set LIBOBJS as appropriate

------------------------------------------------------------------------
r1137 | remi | 2006-04-06 00:34:09 +0300 (Thu, 06 Apr 2006) | 4 lines
Changed paths:
   A /trunk/compat/Makefile.am
   A /trunk/compat/barrier.c
   A /trunk/compat/barrier.h
   A /trunk/compat/closefrom.c
   A /trunk/compat/dummy.c

- Replacement for pthread_barrier* (which is missing on several BSD)
  This is UNTESTED.
- Move closefrom() replacement here.

------------------------------------------------------------------------
r1136 | remi | 2006-04-06 00:05:04 +0300 (Thu, 06 Apr 2006) | 2 lines
Changed paths:
   A /trunk/compat

Prepare new directory for replacement functions

------------------------------------------------------------------------
r1135 | remi | 2006-04-06 00:02:18 +0300 (Thu, 06 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo

Remove old stuff from svn:ignore

------------------------------------------------------------------------
r1134 | remi | 2006-04-05 19:06:55 +0300 (Wed, 05 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Fix error message in case of failure to open any BSD tunnel interface

------------------------------------------------------------------------
r1133 | remi | 2006-04-05 18:59:51 +0300 (Wed, 05 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Fix typo

------------------------------------------------------------------------
r1132 | remi | 2006-04-05 18:41:47 +0300 (Wed, 05 Apr 2006) | 3 lines
Changed paths:
   M /trunk/src/main.c

Be less strict in what we accept from dup(2)
so that the check for 0, 1 and 2 file descriptors works on OpenBSD (?)

------------------------------------------------------------------------
r1131 | remi | 2006-04-05 18:26:40 +0300 (Wed, 05 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/main.c

Close all descriptors up to the maximum limit, not the current one

------------------------------------------------------------------------
r1130 | remi | 2006-04-05 18:18:52 +0300 (Wed, 05 Apr 2006) | 4 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/main.c

- Check for closefrom() (available on some BSDs)
- Provide a replacement when it is not found
- Use it to close all file descriptros above fileno(STDERR)

------------------------------------------------------------------------
r1129 | remi | 2006-04-05 14:36:22 +0300 (Wed, 05 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/diagnose.c

Check for failure with overly long interface name requests

------------------------------------------------------------------------
r1128 | remi | 2006-04-05 14:33:42 +0300 (Wed, 05 Apr 2006) | 4 lines
Changed paths:
   M /trunk/libtun6/tun6.c

- Replacement for strlcpy() when it is not supported (ie. on Linux)
- Return an error to the caller when the interface name is too long
  instead of truncating it.

------------------------------------------------------------------------
r1127 | remi | 2006-04-04 23:13:44 +0300 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c

Last warning fix for gcc 3.3

------------------------------------------------------------------------
r1126 | remi | 2006-04-04 23:11:59 +0300 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.h

Don't use warn_unused on gcc-3.3 as it is not supported

------------------------------------------------------------------------
r1125 | remi | 2006-04-04 23:09:35 +0300 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c

Same as previous commit

------------------------------------------------------------------------
r1124 | remi | 2006-04-04 23:09:06 +0300 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Fix warnings

------------------------------------------------------------------------
r1123 | remi | 2006-04-04 21:44:19 +0300 (Tue, 04 Apr 2006) | 8 lines
Changed paths:
   M /trunk/configure.ac

DragonFlyBSD derives from FreeBSD 4, so there is no need to make it yet
another case. I believe this is consistent with the way NetBSD pkgsrc
patches libtun6/ for DragonFlyBSD.

Unfortunately, because of some differences on OpenBSD (strange dup()
behavior, and different location for /dev/random), we can't merge all
BSDs defines.

------------------------------------------------------------------------
r1122 | remi | 2006-04-04 21:14:30 +0300 (Tue, 04 Apr 2006) | 6 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libtun6/tun6.c

Big libtun6 clean up/simplification:
- always use prepended address family, drop (probably broken) head-less mode,
- configure checks for net/if_tun.h and net/if_var.h for BSDs,
  so that we no longer need kernel-specific #ifdef's
- Darwin compilation fix (but the driver does probably not work)

------------------------------------------------------------------------
r1121 | remi | 2006-04-04 18:42:30 +0300 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Clean up BSD-specific preprocessor directives

------------------------------------------------------------------------
r1120 | remi | 2006-04-04 18:30:26 +0300 (Tue, 04 Apr 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/server.c

Check for EPROTO only when it is defined.
Some BSDs variants lack EPROTO. Maybe it's not really standard.

------------------------------------------------------------------------
r1119 | remi | 2006-04-04 18:26:12 +0300 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c
   M /trunk/libteredo/teredo.c

#include <sys/uio.h> when using iovec

------------------------------------------------------------------------
r1118 | remi | 2006-04-03 19:53:14 +0300 (Mon, 03 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.h
   M /trunk/src/server.cpp

#include clean up

------------------------------------------------------------------------
r1117 | remi | 2006-04-02 11:44:02 +0300 (Sun, 02 Apr 2006) | 2 lines
Changed paths:
   M /trunk/doc/Makefile.am

Typo - fix make dist

------------------------------------------------------------------------
r1116 | remi | 2006-04-02 11:42:00 +0300 (Sun, 02 Apr 2006) | 2 lines
Changed paths:
   M /trunk/doc/Makefile.am
   A /trunk/doc/miredo-checkconf.8-in

Man page for miredo-checkconf

------------------------------------------------------------------------
r1115 | remi | 2006-04-02 11:10:23 +0300 (Sun, 02 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Fix client-less compilation

------------------------------------------------------------------------
r1114 | remi | 2006-04-02 11:05:51 +0300 (Sun, 02 Apr 2006) | 5 lines
Changed paths:
   M /trunk/doc/miredo-server.8-in
   M /trunk/doc/miredo.8-in

No longer hard-code file path in man page
so that the paths will be correct if miredo is packaged, and installed
in, say, /usr/sbin, /etc and /var instead of /usr/local/sbin,
/usr/local/etc and /usr/local/var.

------------------------------------------------------------------------
r1113 | remi | 2006-04-02 11:04:00 +0300 (Sun, 02 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp

Reverse commit of extra not-for-commit-yet files

------------------------------------------------------------------------
r1112 | remi | 2006-04-02 11:00:42 +0300 (Sun, 02 Apr 2006) | 3 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.ac
   M /trunk/doc
   A /trunk/doc/Makefile.am (from /trunk/misc/Makefile.am:1111)
   D /trunk/doc/miredo-server.8
   A /trunk/doc/miredo-server.8-in (from /trunk/doc/miredo-server.8:1111)
   D /trunk/doc/miredo.8
   A /trunk/doc/miredo.8-in (from /trunk/doc/miredo.8:1111)
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp

Resurrect doc/Makefile to support substitution of prefix/path
within man pages

------------------------------------------------------------------------
r1111 | remi | 2006-04-02 10:50:15 +0300 (Sun, 02 Apr 2006) | 2 lines
Changed paths:
   M /trunk/doc/miredo-server.8
   M /trunk/doc/miredo.8

Remove hard-coded reference to the chroot directory

------------------------------------------------------------------------
r1110 | remi | 2006-04-02 10:24:28 +0300 (Sun, 02 Apr 2006) | 2 lines
Changed paths:
   M /trunk/doc/miredo.8

Document --chrootdir option

------------------------------------------------------------------------
r1109 | remi | 2006-04-01 23:08:53 +0300 (Sat, 01 Apr 2006) | 3 lines
Changed paths:
   M /trunk/misc/miredo-server.conf-dist
   M /trunk/misc/miredo.conf-dist

Don't annoy brave user with hundreds of lines of comment...
miredo.conf-dist is now ?\226?\128?\156only?\226?\128?\157 48 lines long.

------------------------------------------------------------------------
r1108 | remi | 2006-04-01 23:07:55 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/doc/miredo.conf.5

Document poor forgotten IgnoreConeBit option

------------------------------------------------------------------------
r1107 | remi | 2006-04-01 22:37:02 +0300 (Sat, 01 Apr 2006) | 4 lines
Changed paths:
   M /trunk/doc/miredo.conf.5

- Remove reference to "disabled" mode which disappeared a long time ago
(ie. when miredo-server was splitted from miredo)
- Remove reference to the experimental Teredo prefix

------------------------------------------------------------------------
r1106 | remi | 2006-04-01 22:25:56 +0300 (Sat, 01 Apr 2006) | 4 lines
Changed paths:
   M /trunk/src/relay.cpp

Prepare addition of a forth mode: exclusive client
A Teredo client that only works only when IPv6 connectivity is not
available otherwise

------------------------------------------------------------------------
r1105 | remi | 2006-04-01 22:15:51 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

More clean up

------------------------------------------------------------------------
r1104 | remi | 2006-04-01 21:56:12 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/doc/miredo.conf.5
   M /trunk/misc/miredo.conf-dist
   M /trunk/src/checkconf.cpp

Burn the remnants of the DefaultRoute option

------------------------------------------------------------------------
r1103 | remi | 2006-04-01 21:52:35 +0300 (Sat, 01 Apr 2006) | 8 lines
Changed paths:
   M /trunk/src/privproc.c
   M /trunk/src/privproc.h
   M /trunk/src/relay.cpp

Kill the DefaultRoute option that probably nobody ever set to false.
It was theoretically useful when the metric was the same on the Teredo
tunnel as that of the other interfaces, though fairly impractical
anyway. People that statically want a Teredo relay should and will use
the RelayType stuff.
On top of that, it will shortly be possible to add the default route
dynamically thanks to <src/addrwatch.c>.

------------------------------------------------------------------------
r1102 | remi | 2006-04-01 21:45:46 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Further clean up

------------------------------------------------------------------------
r1101 | remi | 2006-04-01 20:39:49 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am
   M /trunk/src/addrwatch.c
   M /trunk/src/relay.cpp

Clean up, minor error-handling fixes

------------------------------------------------------------------------
r1100 | remi | 2006-04-01 19:29:46 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c

Fix warning with --disable-teredo-client

------------------------------------------------------------------------
r1099 | remi | 2006-04-01 19:16:33 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/addrwatch.c
   M /trunk/src/addrwatch.h

Allow passing an opaque pointer to the addrwatch callback

------------------------------------------------------------------------
r1098 | remi | 2006-04-01 19:03:15 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   A /trunk/src/addrwatch.c
   A /trunk/src/addrwatch.h

Provisional API to check if a non-Teredo connectivity is available

------------------------------------------------------------------------
r1097 | remi | 2006-04-01 18:11:16 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c
   M /trunk/libtun6/tun6.h

tun6_getId(): return scope id of the interface

------------------------------------------------------------------------
r1096 | remi | 2006-04-01 17:08:52 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/privproc.c

Cosmetic fix

------------------------------------------------------------------------
r1095 | remi | 2006-04-01 17:00:38 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Cosmetic fix

------------------------------------------------------------------------
r1094 | remi | 2006-04-01 16:29:41 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/autopackage/default.apspec.in

Partial update of the autopackage spec - still severely broken

------------------------------------------------------------------------
r1093 | remi | 2006-04-01 15:39:29 +0300 (Sat, 01 Apr 2006) | 4 lines
Changed paths:
   M /trunk/src/checkconf.cpp
   M /trunk/src/main.c
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Use BinReloc for configuration file
(it was removed a while ago because autopackage was inconsistent, but
 then, it's an autopackage bug)

------------------------------------------------------------------------
r1092 | remi | 2006-04-01 15:23:23 +0300 (Sat, 01 Apr 2006) | 5 lines
Changed paths:
   M /trunk/m4/binreloc.m4
   M /trunk/src/Makefile.am
   A /trunk/src/binreloc.c
   A /trunk/src/binreloc.h
   M /trunk/src/checkconf.cpp
   M /trunk/src/main.c
   D /trunk/src/prefix.c
   D /trunk/src/prefix.h

Update BinReloc to version 2.0, plus
- two fixes for -Wextra compilation
- include <config.h> in binreloc.c so that ENABLE_BINRELOC gets defined
  (adding $(BINRELOC_CFLAGS) to AM_CPPLFLAGS would conflict)

------------------------------------------------------------------------
r1091 | remi | 2006-04-01 11:48:59 +0300 (Sat, 01 Apr 2006) | 2 lines
Changed paths:
   M /trunk/src/server.cpp

Fix G++ 4.1 warning

------------------------------------------------------------------------
r1090 | remi | 2006-03-31 23:05:08 +0300 (Fri, 31 Mar 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.c
   M /trunk/libtun6/tun6.h

tun6_getName(): returns the tunnel interface name
Will probably be useful if parsing /proc/dev/if_inet6

------------------------------------------------------------------------
r1089 | remi | 2006-03-31 21:24:28 +0300 (Fri, 31 Mar 2006) | 4 lines
Changed paths:
   M /trunk/COPYING
   M /trunk/Makefile.am
   M /trunk/THANKS
   M /trunk/doc/rfc4380.txt
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/md5.c
   M /trunk/libteredo/md5.h
   M /trunk/libteredo/test/Makefile.am
   M /trunk/libteredo/test/dummy.cpp
   M /trunk/libteredo/test/md5test.c
   M /trunk/libtun6/Makefile.am
   M /trunk/libtun6/tun6.c
   M /trunk/m4/Makefile.am
   M /trunk/misc/Makefile.am
   M /trunk/misc/miredo
   M /trunk/misc/miredo-server.conf-dist
   M /trunk/misc/miredo-server.sh-in
   M /trunk/misc/miredo.conf-dist
   M /trunk/misc/miredo.sh-in
   M /trunk/po/ChangeLog
   M /trunk/po/LINGUAS
   M /trunk/po/Makevars
   M /trunk/po/POTFILES.in
   M /trunk/src/Makefile.am
   M /trunk/src/prefix.c
   M /trunk/src/prefix.h

Make sure every file has a MIME type
(at least, for non-ASCII file, this is needed for proper display within
a web browser)

------------------------------------------------------------------------
r1088 | remi | 2006-03-31 21:12:33 +0300 (Fri, 31 Mar 2006) | 2 lines
Changed paths:
   M /trunk/COPYING
   M /trunk/autopackage/default.apspec.in
   M /trunk/include/gettext.h
   M /trunk/libteredo/checksum.h
   M /trunk/libteredo/init.c
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/md5.c
   M /trunk/libteredo/md5.h
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/libteredo/test/addrcmp.c
   M /trunk/libteredo/test/dummy.cpp
   M /trunk/libteredo/test/hmac.c
   M /trunk/libteredo/test/list.c
   M /trunk/libteredo/test/md5test.c
   M /trunk/libteredo/test/stresslist.c
   M /trunk/libtun6/diagnose.c
   M /trunk/libtun6/tun6.c
   M /trunk/libtun6/tun6.h
   M /trunk/m4/binreloc.m4
   M /trunk/misc/miredo
   M /trunk/misc/miredo-server.conf-dist
   M /trunk/misc/miredo-server.sh-in
   M /trunk/misc/miredo.conf-dist
   M /trunk/misc/miredo.sh-in
   M /trunk/po/ChangeLog
   M /trunk/po/LINGUAS
   M /trunk/po/Makevars
   M /trunk/po/POTFILES.in
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/checkconf.cpp
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/prefix.c
   M /trunk/src/prefix.h

A whole bunch of missing svn:eol-style

------------------------------------------------------------------------
r1087 | remi | 2006-03-31 21:09:12 +0300 (Fri, 31 Mar 2006) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/ChangeLog
   M /trunk/Makefile.am
   M /trunk/NEWS
   M /trunk/README
   M /trunk/THANKS
   M /trunk/TODO
   M /trunk/autopackage/default.apspec.in
   M /trunk/bootstrap
   M /trunk/configure.ac
   M /trunk/doc/miredo-server.8
   M /trunk/doc/miredo-server.conf.5
   M /trunk/doc/miredo.8
   M /trunk/doc/miredo.conf.5
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/checksum.h
   M /trunk/libteredo/init.c
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/libteredo/server.c
   M /trunk/libteredo/server.h
   M /trunk/libteredo/teredo-udp.h
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h
   M /trunk/libteredo/test/Makefile.am
   M /trunk/libteredo/test/addrcmp.c
   M /trunk/libteredo/test/hmac.c
   M /trunk/libteredo/test/list.c
   M /trunk/libteredo/test/stresslist.c
   M /trunk/libteredo/v4global.c
   M /trunk/libteredo/v4global.h
   M /trunk/libtun6/Makefile.am
   M /trunk/libtun6/diagnose.c
   M /trunk/libtun6/tun6.c
   M /trunk/libtun6/tun6.h
   M /trunk/m4/Makefile.am
   M /trunk/m4/getopt.m4
   M /trunk/m4/hostname.m4
   M /trunk/m4/sockaddr.m4
   M /trunk/misc/Makefile.am
   M /trunk/misc/miredo
   M /trunk/misc/miredo-server.conf-dist
   M /trunk/misc/miredo-server.sh-in
   M /trunk/misc/miredo.conf-dist
   M /trunk/misc/miredo.sh-in
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/src/Makefile.am
   M /trunk/src/checkconf.cpp
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/privproc.c
   M /trunk/src/privproc.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Uniformize / fix svn:keywords

------------------------------------------------------------------------
r1086 | remi | 2006-03-31 21:02:25 +0300 (Fri, 31 Mar 2006) | 2 lines
Changed paths:
   A /trunk/misc/TeredoClient.reg
   A /trunk/misc/TeredoPrefix.reg

Add a few useful registry exports for Windows XP

------------------------------------------------------------------------
r1085 | remi | 2006-03-31 12:33:37 +0300 (Fri, 31 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c

One small step toward teredo server statistics

------------------------------------------------------------------------
r1084 | remi | 2006-03-30 19:53:32 +0300 (Thu, 30 Mar 2006) | 2 lines
Changed paths:
   M /trunk/po/fr.po

Use curve quote when available

------------------------------------------------------------------------
r1083 | remi | 2006-03-30 19:50:32 +0300 (Thu, 30 Mar 2006) | 2 lines
Changed paths:
   M /trunk/autopackage/default.apspec.in
   M /trunk/configure.ac
   M /trunk/doc/miredo-server.8
   M /trunk/doc/miredo-server.conf.5
   M /trunk/doc/miredo.8
   M /trunk/doc/miredo.conf.5
   M /trunk/include/gettext.h
   M /trunk/m4/getopt.m4
   M /trunk/m4/hostname.m4
   M /trunk/m4/sockaddr.m4
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po

Same as previous commits

------------------------------------------------------------------------
r1082 | remi | 2006-03-30 18:48:13 +0300 (Thu, 30 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/bootstrap
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/checksum.h
   M /trunk/libteredo/init.c
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/libteredo/server.c
   M /trunk/libteredo/server.h
   M /trunk/libteredo/teredo-udp.h
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h
   M /trunk/libteredo/test/Makefile.am
   M /trunk/libteredo/test/addrcmp.c
   M /trunk/libteredo/test/hmac.c
   M /trunk/libteredo/test/list.c
   M /trunk/libteredo/test/stresslist.c
   M /trunk/libteredo/v4global.c
   M /trunk/libteredo/v4global.h
   M /trunk/libtun6/Makefile.am
   M /trunk/libtun6/diagnose.c
   M /trunk/libtun6/tun6.c
   M /trunk/libtun6/tun6.h
   M /trunk/m4/Makefile.am
   M /trunk/misc/Makefile.am
   M /trunk/src/Makefile.am
   M /trunk/src/checkconf.cpp
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/privproc.c
   M /trunk/src/privproc.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

More Unicode cosmetics

------------------------------------------------------------------------
r1081 | remi | 2006-03-30 16:56:31 +0300 (Thu, 30 Mar 2006) | 2 lines
Changed paths:
   M /trunk/bootstrap
   M /trunk/m4/binreloc.m4
   M /trunk/m4/getopt.m4
   M /trunk/m4/hostname.m4
   M /trunk/m4/sockaddr.m4

Same as previous commit

------------------------------------------------------------------------
r1080 | remi | 2006-03-30 16:51:05 +0300 (Thu, 30 Mar 2006) | 2 lines
Changed paths:
   M /trunk/include/gettext.h
   M /trunk/libteredo/checksum.h
   M /trunk/libteredo/init.c
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/libteredo/server.c
   M /trunk/libteredo/server.h
   M /trunk/libteredo/teredo-udp.h
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h
   M /trunk/libteredo/test/addrcmp.c
   M /trunk/libteredo/test/hmac.c
   M /trunk/libteredo/test/list.c
   M /trunk/libteredo/test/stresslist.c
   M /trunk/libteredo/v4global.c
   M /trunk/libteredo/v4global.h
   M /trunk/libtun6/diagnose.c
   M /trunk/libtun6/tun6.h
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/checkconf.cpp
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/privproc.c
   M /trunk/src/privproc.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Fix copyright string; add svn:mime-type for explicit charset

------------------------------------------------------------------------
r1079 | remi | 2006-03-30 15:32:13 +0300 (Thu, 30 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/TODO
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/test/Makefile.am
   M /trunk/libtun6/Makefile.am
   M /trunk/m4/Makefile.am
   M /trunk/src/Makefile.am

Some extra Unicode characters

------------------------------------------------------------------------
r1078 | remi | 2006-03-30 15:19:41 +0300 (Thu, 30 Mar 2006) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/ChangeLog
   M /trunk/NEWS
   M /trunk/README
   M /trunk/TODO

- Document removal of --enable-miredo-chroot and addition of -t
- Set svn:mime-type on some non-ASCII file

------------------------------------------------------------------------
r1077 | remi | 2006-03-30 14:33:08 +0300 (Thu, 30 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Do not create chrootdir at install time as we have no default value anymore

------------------------------------------------------------------------
r1076 | remi | 2006-03-30 14:32:03 +0300 (Thu, 30 Mar 2006) | 2 lines
Changed paths:
   M /trunk/misc

svn:ignore update

------------------------------------------------------------------------
r1075 | remi | 2006-03-30 14:30:42 +0300 (Thu, 30 Mar 2006) | 3 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/Makefile.am
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

- (Re?)introduce -t run-time option to specify chroot directory
- Support --username resp. --chrootdir as -u resp. -t like radvd

------------------------------------------------------------------------
r1074 | remi | 2006-03-29 20:23:06 +0300 (Wed, 29 Mar 2006) | 5 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.ac
   A /trunk/misc/Makefile.am
   D /trunk/misc/miredo-server.sh
   A /trunk/misc/miredo-server.sh-in (from /trunk/misc/miredo-server.sh:1072)
   D /trunk/misc/miredo.sh
   A /trunk/misc/miredo.sh-in (from /trunk/misc/miredo.sh:1072)

- Restore misc/Makefile* so that we can dynamically include install prefix
  with sample Debian initscripts
- Remove Mandrake initscripts from tarball as I do not maintain them anymore
  and they seems to trigger a bug in the build-system (make distcheck)

------------------------------------------------------------------------
r1073 | remi | 2006-03-29 20:13:47 +0300 (Wed, 29 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

NetBSD compile fix as reported by Rui Paulo

------------------------------------------------------------------------
r1072 | remi | 2006-03-29 16:01:54 +0300 (Wed, 29 Mar 2006) | 2 lines
Changed paths:
   M /trunk/misc/miredo-server.sh
   M /trunk/misc/miredo.sh

Init scripts clean ups from Anand Kumria

------------------------------------------------------------------------
r1071 | remi | 2006-03-27 12:11:12 +0300 (Mon, 27 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Fix miredo_capc

------------------------------------------------------------------------
r1070 | remi | 2006-03-23 23:34:00 +0200 (Thu, 23 Mar 2006) | 2 lines
Changed paths:
   M /trunk/m4
   M /trunk/m4/Makefile.am

Remove a bunch of *.m4 files that are no longer used

------------------------------------------------------------------------
r1069 | remi | 2006-03-23 23:19:51 +0200 (Thu, 23 Mar 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

This is 0.8.2-trunk

------------------------------------------------------------------------
r1067 | remi | 2006-03-23 23:17:49 +0200 (Thu, 23 Mar 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog

ChangeLog for 0.8.1

------------------------------------------------------------------------
r1066 | remi | 2006-03-23 23:16:37 +0200 (Thu, 23 Mar 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync PO files for 0.8.1 release

------------------------------------------------------------------------
r1065 | remi | 2006-03-23 23:09:45 +0200 (Thu, 23 Mar 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

NEWS for upcoming 0.8.1 release

------------------------------------------------------------------------
r1064 | remi | 2006-03-23 23:09:00 +0200 (Thu, 23 Mar 2006) | 10 lines
Changed paths:
   M /trunk/libteredo/packets.c

Only accept ICMPv6 Unreachable Destination error packet
as a replacement for an ICMPv6 Echo Reply during IPv6 direct
connectivity check if the error packet source is the same as the
embedded Echo Request destination, to avoid possible impersonation.

Also perform a similar check for error packet destination and echo
request source (though I can't think of any security issue there), just
in case. A mismatch would be invalid here anyway, ie. only malicious
users might ever emit such packets, AFAIK.

------------------------------------------------------------------------
r1063 | remi | 2006-03-23 22:47:51 +0200 (Thu, 23 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.c

Yet another cosmetic fix

------------------------------------------------------------------------
r1062 | remi | 2006-03-23 21:27:10 +0200 (Thu, 23 Mar 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/packets.c

(Partially?) fix the administratively prohibited error
relay detection work-around

------------------------------------------------------------------------
r1061 | remi | 2006-03-23 21:02:18 +0200 (Thu, 23 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Cosmetics

------------------------------------------------------------------------
r1060 | remi | 2006-03-23 20:50:51 +0200 (Thu, 23 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.c

Cosmetics

------------------------------------------------------------------------
r1059 | remi | 2006-03-23 19:49:49 +0200 (Thu, 23 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Fix libtun6 linking

------------------------------------------------------------------------
r1058 | remi | 2006-03-22 10:09:57 +0200 (Wed, 22 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Rationalize *_LIBADD and *_LDADD

------------------------------------------------------------------------
r1057 | remi | 2006-03-20 19:58:30 +0200 (Mon, 20 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/server.cpp

Fix signal handling within miredo-server

------------------------------------------------------------------------
r1056 | remi | 2006-03-20 19:51:14 +0200 (Mon, 20 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

libcap: add required CAP_KILL

------------------------------------------------------------------------
r1055 | remi | 2006-03-20 19:10:41 +0200 (Mon, 20 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/server.cpp

Attempt to fix miredo-server signal handling (needs testing)

------------------------------------------------------------------------
r1054 | remi | 2006-03-20 19:03:59 +0200 (Mon, 20 Mar 2006) | 4 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Use pselect instead of pipe to handle signal properly
--> simplifies signaling code quite a lot
--> miredo-server is currently broken (cannot be stopped)

------------------------------------------------------------------------
r1053 | remi | 2006-03-20 16:40:08 +0200 (Mon, 20 Mar 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update translations

------------------------------------------------------------------------
r1052 | remi | 2006-03-20 16:35:52 +0200 (Mon, 20 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Error messages rationalization

------------------------------------------------------------------------
r1051 | remi | 2006-03-20 16:21:04 +0200 (Mon, 20 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/main.c

Fix typo

------------------------------------------------------------------------
r1050 | remi | 2006-03-20 16:20:15 +0200 (Mon, 20 Mar 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Use %s and strerror(errno) explicitly instead of %m
--> will ease moving away from syslog() and kill icc warnings

------------------------------------------------------------------------
r1049 | remi | 2006-03-20 16:18:20 +0200 (Mon, 20 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/privproc.c

Fix ICC warning

------------------------------------------------------------------------
r1048 | remi | 2006-03-20 14:47:35 +0200 (Mon, 20 Mar 2006) | 5 lines
Changed paths:
   M /trunk/src/Makefile.am

- Only create /var/run/miredo/ when chroot is enabled
  (it is no longer needed for the pidfile)
- Never try to remove /var/run upon uninstall; it could bother other
  programs

------------------------------------------------------------------------
r1047 | remi | 2006-03-20 14:46:15 +0200 (Mon, 20 Mar 2006) | 6 lines
Changed paths:
   M /trunk/libtun6/tun6.c

- BSD: set TUNSIFMODE to the appropriate value (IFF_BROADCAST)
  IFF_POINTOPOINT would render the tunnel unusable, probably because
  the route we insert have no ?\226?\128?\156destination?\226?\128?\157
- BSD: set TUNSLMODE when TUNSLMODE is supported and TUNSIFHEAD is not
  (may fix troubles on NetBSD 4.0, though I doubt it)

------------------------------------------------------------------------
r1046 | remi | 2006-03-19 23:21:04 +0200 (Sun, 19 Mar 2006) | 3 lines
Changed paths:
   A /trunk/doc/rfc4380.txt

Our authoritative RFC - purposedly not included in tarball
because of probably GPL-incompatible licensing terms

------------------------------------------------------------------------
r1045 | remi | 2006-03-19 22:54:50 +0200 (Sun, 19 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Add some comments

------------------------------------------------------------------------
r1044 | remi | 2006-03-19 18:29:30 +0200 (Sun, 19 Mar 2006) | 2 lines
Changed paths:
   M /trunk/m4/sockaddr.m4

Fix broken sa_len detection

------------------------------------------------------------------------
r1043 | remi | 2006-03-19 17:20:34 +0200 (Sun, 19 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Set sin6_len when HAVE_SA_LEN is true

------------------------------------------------------------------------
r1042 | remi | 2006-03-19 17:09:00 +0200 (Sun, 19 Mar 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Fix old $Id$ in ChangeLog

------------------------------------------------------------------------
r1041 | remi | 2006-03-19 16:31:02 +0200 (Sun, 19 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Fix commented-out code

------------------------------------------------------------------------
r1040 | remi | 2006-03-19 01:19:28 +0200 (Sun, 19 Mar 2006) | 4 lines
Changed paths:
   M /trunk/Makefile.am

- include bootstrap within tarball
- don't include files from admin/ explicitly;
  automake will take care of that better than I do

------------------------------------------------------------------------
r1039 | remi | 2006-03-19 01:15:06 +0200 (Sun, 19 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.ac
   D /trunk/misc/Makefile.am

Kill misc/Makefile.am and merge with top Makefile.am

------------------------------------------------------------------------
r1038 | remi | 2006-03-18 23:50:38 +0200 (Sat, 18 Mar 2006) | 14 lines
Changed paths:
   M /trunk/src/main.c

- Fix PID file locking when not running in the foreground, while not
  breaking foreground run (previous commits fixed one case while
  breaking the other). To achieve this, we perform a simple check
  before daemon(), while actually locking the file after daemon().
  Much like early calls of access(), this allows printing useful error
  messages before the program detaches, while not falling in the ToCToU
  trap, given we still perform atomic check & use after detaching.
  If an error occurs after detaching, we can no longer print an error,
  but we can still fail safe. Such a situation is a race condition and
  is unlikely to occur in front of good-faithed users.
- Use O_NOFOLLOW if available when opening the pid file
  to avoid insecure file override (however, $(prefix)/var/run should
  not be writeable by non-trustworthy users)

------------------------------------------------------------------------
r1037 | remi | 2006-03-18 22:12:20 +0200 (Sat, 18 Mar 2006) | 2 lines
Changed paths:
   M /trunk/m4/sockaddr.m4

Resync sockaddr.m4 with tcpreen

------------------------------------------------------------------------
r1036 | remi | 2006-03-18 22:08:46 +0200 (Sat, 18 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Don't build in m4 as there is nothing to be built there

------------------------------------------------------------------------
r1035 | remi | 2006-03-17 12:53:15 +0200 (Fri, 17 Mar 2006) | 4 lines
Changed paths:
   M /trunk/README

Update README:
 - some cleanup
 - NetBSD 4.0 tentative support

------------------------------------------------------------------------
r1034 | remi | 2006-03-17 12:20:15 +0200 (Fri, 17 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/test/Makefile.am
   M /trunk/src/Makefile.am

Link libraries against LTLIBINTL where appropriate

------------------------------------------------------------------------
r1033 | remi | 2006-03-17 12:18:56 +0200 (Fri, 17 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

BSD compile fix

------------------------------------------------------------------------
r1032 | remi | 2006-03-16 15:02:57 +0200 (Thu, 16 Mar 2006) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

teredo.via.ecp.fr -> teredo.remlab.net

------------------------------------------------------------------------
r1031 | remi | 2006-03-16 14:17:16 +0200 (Thu, 16 Mar 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.c

- Don't set IFF_POINTOPOINT, as it is not a point-to-point tunnel
- Remove IFF_RUNNING flag when the tunnel is brought down

------------------------------------------------------------------------
r1030 | remi | 2006-03-16 14:13:40 +0200 (Thu, 16 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

Cosmetics

------------------------------------------------------------------------
r1029 | remi | 2006-03-16 12:42:37 +0200 (Thu, 16 Mar 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.h

Add some functions __attribute__ where appropriate
while trying to retain compatibility with non-gcc (non-icc either) compilers

------------------------------------------------------------------------
r1028 | remi | 2006-03-14 19:55:42 +0200 (Tue, 14 Mar 2006) | 4 lines
Changed paths:
   M /trunk/bootstrap
   M /trunk/configure.ac

Use autopoint instead of gettextize
so that we no longer need (so many) post-gettextize kludges
and that we no longer have to hit enter manually

------------------------------------------------------------------------
r1027 | remi | 2006-03-14 19:51:15 +0200 (Tue, 14 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

BSD thread safety fix

------------------------------------------------------------------------
r1026 | remi | 2006-03-14 19:29:16 +0200 (Tue, 14 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Added missing extern "C" qualifiers in functions definition

------------------------------------------------------------------------
r1025 | remi | 2006-03-14 09:51:18 +0200 (Tue, 14 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Also check IPv6 stack availability within libtun6_diagnose

------------------------------------------------------------------------
r1024 | remi | 2006-03-11 00:41:03 +0200 (Sat, 11 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp

Fix assertion failure again *whistles*

------------------------------------------------------------------------
r1023 | remi | 2006-03-11 00:37:51 +0200 (Sat, 11 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp

Minimalistic implementation of --version and --help for checkconf

------------------------------------------------------------------------
r1022 | remi | 2006-03-11 00:35:03 +0200 (Sat, 11 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/main.c

Cosmetic

------------------------------------------------------------------------
r1021 | remi | 2006-03-11 00:24:06 +0200 (Sat, 11 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp

Reorganize checkconf

------------------------------------------------------------------------
r1020 | remi | 2006-03-11 00:14:18 +0200 (Sat, 11 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Probably fix probably broken linking of miredo-checkconf when libintl is not built-in

------------------------------------------------------------------------
r1019 | remi | 2006-03-11 00:10:44 +0200 (Sat, 11 Mar 2006) | 3 lines
Changed paths:
   M /trunk/configure.ac

Now build shared library by default
Only libtun6 is not forcefully static though

------------------------------------------------------------------------
r1018 | remi | 2006-03-11 00:10:20 +0200 (Sat, 11 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/hmac.c

Fix HMAC test that was broken by libteredo_preinit API change

------------------------------------------------------------------------
r1017 | remi | 2006-03-11 00:09:52 +0200 (Sat, 11 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am

Force libteredo*.la to static libraries for now

------------------------------------------------------------------------
r1016 | remi | 2006-03-11 00:09:08 +0200 (Sat, 11 Mar 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update translation for conf.cpp

------------------------------------------------------------------------
r1015 | remi | 2006-03-11 00:07:47 +0200 (Sat, 11 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp

Fix checkconf.cpp

------------------------------------------------------------------------
r1014 | remi | 2006-03-11 00:05:49 +0200 (Sat, 11 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/checkconf.cpp
   M /trunk/src/conf.cpp

A few asserts

------------------------------------------------------------------------
r1013 | remi | 2006-03-10 23:51:21 +0200 (Fri, 10 Mar 2006) | 4 lines
Changed paths:
   M /trunk/src/Makefile.am
   A /trunk/src/checkconf.cpp (from /trunk/src/test_conf.cpp:1012)
   D /trunk/src/test_conf.cpp

- Polish configuration file test
- Promote miredo-checkconf to a real installed binary
  instead of a test program

------------------------------------------------------------------------
r1012 | remi | 2006-03-10 23:41:57 +0200 (Fri, 10 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Use syslog() for configuration file error within miredo(-server)

------------------------------------------------------------------------
r1011 | remi | 2006-03-10 23:31:02 +0200 (Fri, 10 Mar 2006) | 3 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Use a virtual function for logging
so that we don't assume syslog()

------------------------------------------------------------------------
r1010 | remi | 2006-03-10 19:00:54 +0200 (Fri, 10 Mar 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Use no-exeext to simplify makefiles

------------------------------------------------------------------------
r1009 | remi | 2006-03-10 18:57:32 +0200 (Fri, 10 Mar 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Do not build gzip'd tarball - I only use bzip2 anyway

------------------------------------------------------------------------
r1008 | remi | 2006-03-10 16:25:33 +0200 (Fri, 10 Mar 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Various spelling fixes

------------------------------------------------------------------------
r1007 | remi | 2006-03-10 16:24:54 +0200 (Fri, 10 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Spelling mistake

------------------------------------------------------------------------
r1006 | remi | 2006-03-10 15:49:16 +0200 (Fri, 10 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c

#include <stdint.h> for uint_

------------------------------------------------------------------------
r1005 | remi | 2006-03-10 15:47:23 +0200 (Fri, 10 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/security.c
   M /trunk/libteredo/server.c

#include <limits.h> when we use *_MAX constants

------------------------------------------------------------------------
r1004 | remi | 2006-03-10 15:33:38 +0200 (Fri, 10 Mar 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/main.c

Update copyright with --version

------------------------------------------------------------------------
r1003 | remi | 2006-03-10 14:54:37 +0200 (Fri, 10 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/src/relay.cpp

Compile fixes

------------------------------------------------------------------------
r1002 | remi | 2006-03-10 14:50:37 +0200 (Fri, 10 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c

Compile fix

------------------------------------------------------------------------
r1001 | remi | 2006-03-10 14:48:27 +0200 (Fri, 10 Mar 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/src/relay.cpp

- Fix broken design of libteredo_init/terminate
- Some clean up

------------------------------------------------------------------------
r1000 | remi | 2006-03-10 12:30:47 +0200 (Fri, 10 Mar 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/Makefile.am
   M /trunk/libtun6/tun6.c

Fix tun6.h installation path
(this is going to annoy downstream packagers)

------------------------------------------------------------------------
r999 | remi | 2006-03-10 12:17:01 +0200 (Fri, 10 Mar 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.c

- Define USE_TUNHEAD on NetBSD, in accordance with its package CVSweb
- #ifdefs simplification

------------------------------------------------------------------------
r998 | remi | 2006-03-08 18:41:43 +0200 (Wed, 08 Mar 2006) | 3 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

- Improve British english translation
- Resync PO files

------------------------------------------------------------------------
r997 | remi | 2006-03-08 11:35:41 +0200 (Wed, 08 Mar 2006) | 2 lines
Changed paths:
   M /trunk/README

Uniformize line spacing

------------------------------------------------------------------------
r996 | remi | 2006-03-06 19:28:43 +0200 (Mon, 06 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Cosmetic fix

------------------------------------------------------------------------
r995 | remi | 2006-03-06 12:08:05 +0200 (Mon, 06 Mar 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/init.c
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/server.c
   M /trunk/libtun6/Makefile.am
   M /trunk/libtun6/tun6.c

Convert libtun6, libteredo and libteredo-server to library-type gettext usage

------------------------------------------------------------------------
r994 | remi | 2006-03-04 12:16:53 +0200 (Sat, 04 Mar 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Use libtool for libmiredo and some fixes

------------------------------------------------------------------------
r993 | remi | 2006-03-04 12:12:14 +0200 (Sat, 04 Mar 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/Makefile.am

Clean up libcap check

------------------------------------------------------------------------
r992 | remi | 2006-03-04 12:02:13 +0200 (Sat, 04 Mar 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am

Clean up -lJudy check, only link libteredo.la against libJudy

------------------------------------------------------------------------
r991 | remi | 2006-03-04 11:47:39 +0200 (Sat, 04 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libtun6/Makefile.am

use -no-undefined (might break BSD)

------------------------------------------------------------------------
r990 | remi | 2006-03-04 11:46:58 +0200 (Sat, 04 Mar 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.h

Update provisional C API

------------------------------------------------------------------------
r989 | remi | 2006-02-15 16:44:59 +0200 (Wed, 15 Feb 2006) | 6 lines
Changed paths:
   M /trunk/src/relay.cpp

- Fix invalid free() on exit when specifying a server name
  from the command line
- Fix strdup() failure detection (almost impossible bug)
- Fix memory leak when libteredo_client_preinit() fails
  (which is to say when /dev/urandom cannot be opened)

------------------------------------------------------------------------
r988 | remi | 2006-02-03 21:03:29 +0200 (Fri, 03 Feb 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/server.c
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/test/list.c
   M /trunk/libteredo/test/md5test.c
   M /trunk/libteredo/test/stresslist.c
   M /trunk/src/relay.cpp

All fixes for -Wextra
(turns out it is good to find bugs such as the one fixed in [986].

------------------------------------------------------------------------
r987 | remi | 2006-02-03 21:01:13 +0200 (Fri, 03 Feb 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

This is trunk for release 0.8.1

------------------------------------------------------------------------
r986 | remi | 2006-02-03 20:09:04 +0200 (Fri, 03 Feb 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Ensure expiry is set properly at startup.
Depending on its initial undefined, it could prevent the nonce from being
generated (thanks to -Wextra for finding that error).

------------------------------------------------------------------------
r984 | remi | 2006-02-02 22:54:01 +0200 (Thu, 02 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update PO files and ChangeLog for 0.8.0

------------------------------------------------------------------------
r983 | remi | 2006-02-02 22:51:28 +0200 (Thu, 02 Feb 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Refer to 0.7.3 rather than 0.7.2 (which was cancelled)

------------------------------------------------------------------------
r982 | remi | 2006-02-02 22:48:34 +0200 (Thu, 02 Feb 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/autopackage/default.apspec.in
   M /trunk/doc/miredo-server.8
   M /trunk/doc/miredo.8

Refer to RFC 4380

------------------------------------------------------------------------
r973 | remi | 2006-01-30 15:46:33 +0200 (Mon, 30 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Fix tunneling driver on *BSD

------------------------------------------------------------------------
r972 | remi | 2006-01-30 15:16:56 +0200 (Mon, 30 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/Makefile.am

Fix test linking

------------------------------------------------------------------------
r971 | remi | 2006-01-30 15:12:02 +0200 (Mon, 30 Jan 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Fix shell equal comparisons

------------------------------------------------------------------------
r970 | remi | 2006-01-30 14:45:52 +0200 (Mon, 30 Jan 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Fix typo

------------------------------------------------------------------------
r969 | remi | 2006-01-29 23:32:57 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Update NEWS

------------------------------------------------------------------------
r964 | remi | 2006-01-29 20:06:22 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test
   M /trunk/libtun6

svn:ignore updates

------------------------------------------------------------------------
r962 | remi | 2006-01-29 20:04:03 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Fix test linking

------------------------------------------------------------------------
r961 | remi | 2006-01-29 19:59:46 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/Makefile.am

Fix test linking on BSD

------------------------------------------------------------------------
r960 | remi | 2006-01-29 19:54:58 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/addrcmp.c
   M /trunk/libteredo/test/hmac.c
   M /trunk/libteredo/test/list.c
   M /trunk/libteredo/test/stresslist.c

Undo [959] and really fix compilation on BSD

------------------------------------------------------------------------
r959 | remi | 2006-01-29 19:54:07 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/diagnose.c

Fix check and use syslog

------------------------------------------------------------------------
r958 | remi | 2006-01-29 19:43:00 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/addrcmp.c
   M /trunk/libteredo/test/hmac.c
   M /trunk/libteredo/test/list.c
   M /trunk/libteredo/test/stresslist.c

FreeBSD compatibility hack

------------------------------------------------------------------------
r953 | remi | 2006-01-29 19:28:40 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Fix --enable-debug logic

------------------------------------------------------------------------
r952 | remi | 2006-01-29 19:24:20 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Another BSD fix

------------------------------------------------------------------------
r951 | remi | 2006-01-29 19:20:13 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.c

Another BSD fix

------------------------------------------------------------------------
r950 | remi | 2006-01-29 19:10:11 +0200 (Sun, 29 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Another FreeBSD compile fix

------------------------------------------------------------------------
r949 | remi | 2006-01-29 14:28:49 +0200 (Sun, 29 Jan 2006) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.c

BSD compilation fix
Bug reported by Richard Bejtlich from taosecurity.com

------------------------------------------------------------------------
r948 | remi | 2006-01-22 18:41:59 +0200 (Sun, 22 Jan 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync PO files

------------------------------------------------------------------------
r947 | remi | 2006-01-22 18:39:22 +0200 (Sun, 22 Jan 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/teredo.h

Define Teredo multicast discovery address as is now defined in
http://www.iana.org/assignments/multicast-addresses

------------------------------------------------------------------------
r946 | remi | 2006-01-18 20:52:58 +0200 (Wed, 18 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/Makefile.am
   A /trunk/libtun6/diagnose.c
   M /trunk/libtun6/tun6.c
   M /trunk/libtun6/tun6.h

Very trivial check for libtun6

------------------------------------------------------------------------
r945 | remi | 2006-01-18 20:25:38 +0200 (Wed, 18 Jan 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO

News for 0.8.0

------------------------------------------------------------------------
r944 | remi | 2006-01-18 19:54:50 +0200 (Wed, 18 Jan 2006) | 2 lines
Changed paths:
   M /trunk/src/privproc.c

Return error value from privileged process in case of error

------------------------------------------------------------------------
r943 | remi | 2006-01-18 11:13:10 +0200 (Wed, 18 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Only try to write to /proc when adding an address succeeded

------------------------------------------------------------------------
r942 | remi | 2006-01-18 11:12:06 +0200 (Wed, 18 Jan 2006) | 4 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Fix /proc Linux-specific settings:
they have to be done after an address is added, rather than after bringing up
the tunnel interface

------------------------------------------------------------------------
r941 | remi | 2006-01-17 20:17:32 +0200 (Tue, 17 Jan 2006) | 2 lines
Changed paths:
   M /trunk/src/main.c

Remove big fat warning

------------------------------------------------------------------------
r940 | remi | 2006-01-17 18:31:11 +0200 (Tue, 17 Jan 2006) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

Typo fix

------------------------------------------------------------------------
r939 | remi | 2006-01-17 18:30:22 +0200 (Tue, 17 Jan 2006) | 3 lines
Changed paths:
   M /trunk/misc/miredo-server.conf-dist
   M /trunk/misc/miredo.conf-dist

Use 192.0.2.0/24 sample address space instead of my own server address
in configuration sample

------------------------------------------------------------------------
r938 | remi | 2006-01-17 18:19:27 +0200 (Tue, 17 Jan 2006) | 2 lines
Changed paths:
   M /trunk/misc/miredo-server.conf-dist
   M /trunk/misc/miredo.conf-dist

Update sample configurations with new Teredo prefix

------------------------------------------------------------------------
r937 | remi | 2006-01-17 18:09:56 +0200 (Tue, 17 Jan 2006) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/TODO
   M /trunk/doc/miredo-server.conf.5
   M /trunk/doc/miredo.conf.5
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/teredo.h

At long last, use permanent Teredo prefix 2001:0000::/32

------------------------------------------------------------------------
r936 | remi | 2006-01-17 18:09:16 +0200 (Tue, 17 Jan 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Bump version number

------------------------------------------------------------------------
r934 | remi | 2006-01-10 23:19:17 +0200 (Tue, 10 Jan 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/NEWS

Update ChangeLog and NEWS for 0.7.1

------------------------------------------------------------------------
r933 | remi | 2006-01-10 23:13:53 +0200 (Tue, 10 Jan 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Resync PO files for 0.7.1

------------------------------------------------------------------------
r932 | remi | 2006-01-10 23:08:38 +0200 (Tue, 10 Jan 2006) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp

Allow as most 1 millions rather than 1 thousand entries in peer lists when Judy is used

------------------------------------------------------------------------
r931 | remi | 2006-01-08 23:03:48 +0200 (Sun, 08 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Fix deadlock on exit

------------------------------------------------------------------------
r930 | remi | 2006-01-08 23:00:02 +0200 (Sun, 08 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp

Convert teredo_peer to a C struct and save one pointer per peer

------------------------------------------------------------------------
r929 | remi | 2006-01-08 22:14:37 +0200 (Sun, 08 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Remove unused debug message

------------------------------------------------------------------------
r928 | remi | 2006-01-08 22:09:22 +0200 (Sun, 08 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Fix previous commit

------------------------------------------------------------------------
r927 | remi | 2006-01-08 21:35:00 +0200 (Sun, 08 Jan 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

- Minimize lock time within GC (ie. do delete/free without lock)
- Don't use pthread_cancel() against GC as it is not safe
  (fix crash with icc)

------------------------------------------------------------------------
r926 | remi | 2006-01-08 21:08:38 +0200 (Sun, 08 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Don't leak a condition and a mutex when pthread_create fail

------------------------------------------------------------------------
r925 | remi | 2006-01-08 21:07:11 +0200 (Sun, 08 Jan 2006) | 5 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Garbage collect reset peers list outside of critical section
-> the list lock is held for a much shorter period of time

The same should be done for the garbage collector thread

------------------------------------------------------------------------
r924 | remi | 2006-01-08 15:26:46 +0200 (Sun, 08 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Fix race condition in GC

------------------------------------------------------------------------
r923 | remi | 2006-01-08 00:11:20 +0200 (Sun, 08 Jan 2006) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp

Resets peers list when client state changes

------------------------------------------------------------------------
r922 | remi | 2006-01-07 23:31:11 +0200 (Sat, 07 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/test/list.c

Export and test teredo_list_reset()

------------------------------------------------------------------------
r921 | remi | 2006-01-07 23:19:14 +0200 (Sat, 07 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Implement teredo_list_reset to reset a peers list

------------------------------------------------------------------------
r920 | remi | 2006-01-07 22:23:11 +0200 (Sat, 07 Jan 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Handle peer list signal properly while the list is not empty
(it should not happen at the moment, but will be needed to implement
peers list manual emptying)

------------------------------------------------------------------------
r919 | remi | 2006-01-07 12:57:42 +0200 (Sat, 07 Jan 2006) | 2 lines
Changed paths:
   M /trunk/TODO

ToDo updates

------------------------------------------------------------------------
r918 | remi | 2006-01-06 11:45:41 +0200 (Fri, 06 Jan 2006) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/peerlist.cpp

- Also debug pthread_mutex_unlock()
- Don't use syslog() for debugging

------------------------------------------------------------------------
r917 | remi | 2006-01-06 00:14:54 +0200 (Fri, 06 Jan 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/test/Makefile.am
   M /trunk/libteredo/test/stresslist.c

- Uniformize/Fix time computation in peer list stress test
- Compile tests as C99

------------------------------------------------------------------------
r916 | remi | 2006-01-06 00:04:25 +0200 (Fri, 06 Jan 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Preliminary news for upcoming 0.7.1

------------------------------------------------------------------------
r915 | remi | 2006-01-06 00:03:06 +0200 (Fri, 06 Jan 2006) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Use volatile qualifier for signal handler-altered variables

------------------------------------------------------------------------
r913 | remi | 2006-01-05 19:57:59 +0200 (Thu, 05 Jan 2006) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac

Add configure option --enable-debug to enable debug code
(that was previously compiled-in inconditionnaly)

------------------------------------------------------------------------
r912 | remi | 2006-01-05 15:14:01 +0200 (Thu, 05 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Judy error (malloc) handling

------------------------------------------------------------------------
r911 | remi | 2006-01-05 12:55:46 +0200 (Thu, 05 Jan 2006) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

- Try to fix peer list deadlock
- Clean up

------------------------------------------------------------------------
r910 | remi | 2006-01-04 22:39:53 +0200 (Wed, 04 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Use error-checking mutex in debug mode for peer list

------------------------------------------------------------------------
r909 | remi | 2006-01-03 23:42:48 +0200 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Don't use identifier that confuse icc

------------------------------------------------------------------------
r908 | remi | 2006-01-03 23:35:26 +0200 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po

Expand $Id$

------------------------------------------------------------------------
r907 | remi | 2006-01-03 23:33:25 +0200 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Don't expand $Id$ et al in ChangeLog

------------------------------------------------------------------------
r906 | remi | 2006-01-03 23:32:10 +0200 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am
   M /trunk/src/test_conf.cpp
   D /trunk/src/test_conf.sh

No longer depend on a wrapper shell script for miredo-checkconf test

------------------------------------------------------------------------
r905 | remi | 2006-01-03 22:41:46 +0200 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Cosmetic + disabled debug messages

------------------------------------------------------------------------
r904 | remi | 2006-01-03 22:10:01 +0200 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.h

Remove IsClient() from client-less builds

------------------------------------------------------------------------
r903 | remi | 2006-01-03 22:08:50 +0200 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Avoid always true if() in client-less compilation

------------------------------------------------------------------------
r902 | remi | 2006-01-03 22:03:51 +0200 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

C99 clean up

------------------------------------------------------------------------
r901 | remi | 2006-01-03 20:11:58 +0200 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/maintain.c
   M /trunk/libtun6/Makefile.am
   M /trunk/src/Makefile.am

Use C99 as standard explicitly

------------------------------------------------------------------------
r900 | remi | 2006-01-03 20:11:00 +0200 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Cosmetic change - connectivity is still broken

------------------------------------------------------------------------
r899 | remi | 2006-01-02 23:27:02 +0200 (Mon, 02 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Further attempt to completely solve connectivity regressions

------------------------------------------------------------------------
r898 | remi | 2006-01-02 22:29:55 +0200 (Mon, 02 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Cosmetic fix

------------------------------------------------------------------------
r897 | remi | 2006-01-02 22:25:40 +0200 (Mon, 02 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fix connectivity regression introduced by IsValid()

------------------------------------------------------------------------
r896 | remi | 2006-01-02 21:39:54 +0200 (Mon, 02 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Attempt to fix various connectivity issues

------------------------------------------------------------------------
r895 | remi | 2006-01-02 15:04:36 +0200 (Mon, 02 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Remove a lot of debug messages

------------------------------------------------------------------------
r894 | remi | 2006-01-02 15:01:03 +0200 (Mon, 02 Jan 2006) | 4 lines
Changed paths:
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp

- fix IsValid() check
- don't call time() within TouchReceive()
- add lots of temporary debug messages

------------------------------------------------------------------------
r893 | remi | 2006-01-02 13:13:33 +0200 (Mon, 02 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/stresslist.c

Rewrite stress test to a fixed duration

------------------------------------------------------------------------
r892 | remi | 2006-01-02 12:20:34 +0200 (Mon, 02 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Fix regression when Judy is NOT used

------------------------------------------------------------------------
r891 | remi | 2006-01-02 12:02:42 +0200 (Mon, 02 Jan 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Cosmetic fix for Judy check

------------------------------------------------------------------------
r890 | remi | 2006-01-02 11:33:54 +0200 (Mon, 02 Jan 2006) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/peerlist.cpp

Support for Judy dynamic arrays within peer list
libteredo/miredo should finally be scalable

------------------------------------------------------------------------
r889 | remi | 2006-01-02 10:44:49 +0200 (Mon, 02 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/test/Makefile.am
   M /trunk/libteredo/test/list.c
   A /trunk/libteredo/test/stresslist.c (from /trunk/libteredo/test/list.c:888)

Add a stress test for peer list

------------------------------------------------------------------------
r888 | remi | 2006-01-01 21:49:16 +0200 (Sun, 01 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Remove obsolete TODO comments

------------------------------------------------------------------------
r887 | remi | 2006-01-01 21:48:56 +0200 (Sun, 01 Jan 2006) | 3 lines
Changed paths:
   M /trunk/configure.ac

Err, rewrite previous Judy test so that the result is somehow
exported at compile-time (shame on me)

------------------------------------------------------------------------
r886 | remi | 2006-01-01 15:30:07 +0200 (Sun, 01 Jan 2006) | 2 lines
Changed paths:
   M /trunk/configure.ac

Check for Judy

------------------------------------------------------------------------
r885 | remi | 2006-01-01 12:56:46 +0200 (Sun, 01 Jan 2006) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Handle the "safe" race condition for peer creation more properly

------------------------------------------------------------------------
r884 | remi | 2005-12-31 20:38:11 +0200 (Sat, 31 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Made my mind about source address filtering -> just don't do it

------------------------------------------------------------------------
r883 | remi | 2005-12-31 20:12:54 +0200 (Sat, 31 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fix previous commit

------------------------------------------------------------------------
r882 | remi | 2005-12-31 19:40:23 +0200 (Sat, 31 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

When transmitting packet, only accept a peer as trusted if the last
transmission is under 30 seconds old, as specified

------------------------------------------------------------------------
r881 | remi | 2005-12-31 15:44:39 +0200 (Sat, 31 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po

Fix typo

------------------------------------------------------------------------
r880 | remi | 2005-12-31 15:43:44 +0200 (Sat, 31 Dec 2005) | 3 lines
Changed paths:
   M /trunk/bootstrap
   M /trunk/libteredo/v4global.c

Update copyright date
(rather late than never - year changing is a few hours :-) )

------------------------------------------------------------------------
r879 | remi | 2005-12-31 15:39:45 +0200 (Sat, 31 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Ensure we don't hold the state lock while calling EmitICMPv6Error(),
so that said callback be reentrant.

------------------------------------------------------------------------
r878 | remi | 2005-12-31 15:35:05 +0200 (Sat, 31 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Use rwlock instead of mutex for Teredo state

------------------------------------------------------------------------
r877 | remi | 2005-12-31 15:17:19 +0200 (Sat, 31 Dec 2005) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp

Fix ping ("direct IPv6 connectivity test") timings
and consequently improve ICMPv6 unreachable error generation

------------------------------------------------------------------------
r876 | remi | 2005-12-31 15:01:01 +0200 (Sat, 31 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp

Update and fix bubbles transmission timing according to draft 05

------------------------------------------------------------------------
r875 | remi | 2005-12-31 13:21:32 +0200 (Sat, 31 Dec 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp

Repair bubbles and pings limitation

------------------------------------------------------------------------
r874 | remi | 2005-12-30 23:25:52 +0200 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Fix race condition in teredo_list_destroy

------------------------------------------------------------------------
r873 | remi | 2005-12-30 23:17:05 +0200 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Working on upcoming version 0.7.1 (or more)

------------------------------------------------------------------------
r872 | remi | 2005-12-30 23:16:25 +0200 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

One FIXME removed

------------------------------------------------------------------------
r871 | remi | 2005-12-30 23:15:02 +0200 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/test/list.c

Cache time() during peer list lookup

------------------------------------------------------------------------
r870 | remi | 2005-12-30 22:57:48 +0200 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Fix segmentation fault

------------------------------------------------------------------------
r869 | remi | 2005-12-30 22:51:11 +0200 (Fri, 30 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/test/list.c

Test garbage collection more thoroughly...
and uncover a severe segmentation fault

------------------------------------------------------------------------
r868 | remi | 2005-12-30 22:10:13 +0200 (Fri, 30 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/test/list.c

- Improved garbage collection
- In-depth unit test for peers list and garbage collection

------------------------------------------------------------------------
r867 | remi | 2005-12-30 18:12:53 +0200 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h

Bleeding-edge peer list garbage collector

------------------------------------------------------------------------
r866 | remi | 2005-12-29 21:33:12 +0200 (Thu, 29 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po

Fix typo and justify text

------------------------------------------------------------------------
r865 | remi | 2005-12-29 18:45:01 +0200 (Thu, 29 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po

Update PO version number

------------------------------------------------------------------------
r864 | remi | 2005-12-29 18:39:43 +0200 (Thu, 29 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/test/Makefile.am

Given HMAC depends on MD5, it makes more sense to test MD5 first

------------------------------------------------------------------------
r863 | remi | 2005-12-29 18:37:17 +0200 (Thu, 29 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/main.c

Cosmetic: New line before big fat warning

------------------------------------------------------------------------
r862 | remi | 2005-12-29 18:33:40 +0200 (Thu, 29 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.c

Fix and clean up server DNS resolution

------------------------------------------------------------------------
r861 | remi | 2005-12-29 13:45:10 +0200 (Thu, 29 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/main.c

Add a big fat notice about the Teredo draft status

------------------------------------------------------------------------
r860 | remi | 2005-12-28 23:09:36 +0200 (Wed, 28 Dec 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog

ChangeLog for 0.7.0

------------------------------------------------------------------------
r859 | remi | 2005-12-28 23:08:22 +0200 (Wed, 28 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Sync PO files ever again

------------------------------------------------------------------------
r858 | remi | 2005-12-28 23:08:07 +0200 (Wed, 28 Dec 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/configure.ac

Lots of changes in the upcoming release -> be version 0.7.0

------------------------------------------------------------------------
r857 | remi | 2005-12-28 22:02:02 +0200 (Wed, 28 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Fix last known occurence of the state race condition (PingPeer())

------------------------------------------------------------------------
r856 | remi | 2005-12-28 21:56:43 +0200 (Wed, 28 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Fix race condition as regard server IP

------------------------------------------------------------------------
r855 | remi | 2005-12-28 21:54:36 +0200 (Wed, 28 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

- fix IsRelay & IsClient helpers
- fix state race condition as regards cone flag

------------------------------------------------------------------------
r854 | remi | 2005-12-28 21:51:11 +0200 (Wed, 28 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Partially fix the Teredo state/maintenance race condition

------------------------------------------------------------------------
r853 | remi | 2005-12-28 20:26:35 +0200 (Wed, 28 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Minor clean up

------------------------------------------------------------------------
r852 | remi | 2005-12-28 16:17:05 +0200 (Wed, 28 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/v4global.c

Always use locally provided v4global.h

------------------------------------------------------------------------
r851 | remi | 2005-12-28 12:20:36 +0200 (Wed, 28 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Don't overload Teredo prefix as a qualified or not indication

------------------------------------------------------------------------
r850 | remi | 2005-12-27 20:09:12 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/src/privproc.c

Fix one sensible warning from icc

------------------------------------------------------------------------
r849 | remi | 2005-12-27 20:03:46 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update PO files

------------------------------------------------------------------------
r848 | remi | 2005-12-27 19:58:00 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Print start message in syslog

------------------------------------------------------------------------
r847 | remi | 2005-12-27 19:34:53 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README

Document the fact that chroot got disabled by default

------------------------------------------------------------------------
r846 | remi | 2005-12-27 19:34:27 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/test/hmac.c

Compile fix HMAC unit test

------------------------------------------------------------------------
r845 | remi | 2005-12-27 19:32:26 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Re-enable chroot by default when not compiling-in client support

------------------------------------------------------------------------
r844 | remi | 2005-12-27 19:29:07 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Client-less compilation fix

------------------------------------------------------------------------
r843 | remi | 2005-12-27 19:23:19 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Don't call NotifyDown() when the tunnel is already down

------------------------------------------------------------------------
r842 | remi | 2005-12-27 19:17:10 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac

Actually remove chroot by default

------------------------------------------------------------------------
r841 | remi | 2005-12-27 19:16:48 +0200 (Tue, 27 Dec 2005) | 5 lines
Changed paths:
   M /trunk/libteredo/maintain.c
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/relay.cpp

- Resolve Teredo server IP within maintenance procedure
- No longer chroot by default (otherwise DNS resolution fails
  unless NSS is installed in the chroot)
- Don't print bogus message telling the tunnel started when it stops

------------------------------------------------------------------------
r840 | remi | 2005-12-27 18:52:39 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Fix O(1) memory leak

------------------------------------------------------------------------
r839 | remi | 2005-12-27 17:24:40 +0200 (Tue, 27 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Remove 2nd server IP address from main relay code
it is only required by the maintenance procedure

------------------------------------------------------------------------
r838 | remi | 2005-12-27 17:10:36 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in

File list update

------------------------------------------------------------------------
r837 | remi | 2005-12-27 15:41:02 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/maintain.c (from /trunk/libteredo/maintain.cpp:836)
   D /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/relay.h

Maintain.cpp -> maintain.c

------------------------------------------------------------------------
r836 | remi | 2005-12-27 15:30:24 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Remove dependency of maintenance procedure on TeredoRelay

------------------------------------------------------------------------
r835 | remi | 2005-12-27 14:21:48 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Minor fix/clean up for server packet handling

------------------------------------------------------------------------
r834 | remi | 2005-12-27 13:40:54 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/teredo.h
   M /trunk/src/relay.cpp

#include clean up

------------------------------------------------------------------------
r833 | remi | 2005-12-27 13:33:12 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.h
   M /trunk/src/relay.cpp

Remove check that is always true

------------------------------------------------------------------------
r832 | remi | 2005-12-27 13:29:11 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Clean up error handling within TeredoRelay::TeredoRelay

------------------------------------------------------------------------
r831 | remi | 2005-12-27 13:20:45 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Hide teredo_maintenance structure within <maintain.cpp>

------------------------------------------------------------------------
r830 | remi | 2005-12-27 12:18:09 +0200 (Tue, 27 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Remove one-line wrappers

------------------------------------------------------------------------
r829 | remi | 2005-12-26 19:27:13 +0200 (Mon, 26 Dec 2005) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac
   M /trunk/libteredo/md5.c

Determine endianess for MD5 hasher at configure time
rather than run-time

------------------------------------------------------------------------
r828 | remi | 2005-12-26 18:26:36 +0200 (Mon, 26 Dec 2005) | 2 lines
Changed paths:
   M /trunk/README

Remove libgcrypt for documentation

------------------------------------------------------------------------
r827 | remi | 2005-12-26 18:24:57 +0200 (Mon, 26 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.c

Cosmetic comment fix

------------------------------------------------------------------------
r826 | remi | 2005-12-26 18:24:22 +0200 (Mon, 26 Dec 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac

Remove libgcrypt checks

------------------------------------------------------------------------
r825 | remi | 2005-12-26 18:23:36 +0200 (Mon, 26 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/test/Makefile.am
   A /trunk/libteredo/test/md5test.c

Add provided MD5 hash unit test

------------------------------------------------------------------------
r824 | remi | 2005-12-26 18:23:16 +0200 (Mon, 26 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/init.c
   M /trunk/libteredo/security.c

Use built-in MD5 hashing instead of external libgcrypt

------------------------------------------------------------------------
r823 | remi | 2005-12-26 18:22:40 +0200 (Mon, 26 Dec 2005) | 6 lines
Changed paths:
   A /trunk/libteredo/md5.c
   A /trunk/libteredo/md5.h

Add public domain MD5 hashing to replace bloated libgcrypt
--Cet ligne, et les suivantes ci-dessous, seront ignor?\195?\169es--

A    md5.c
A    md5.h

------------------------------------------------------------------------
r822 | remi | 2005-12-24 13:33:26 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO

Update documentation

------------------------------------------------------------------------
r821 | remi | 2005-12-24 13:32:59 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Resync PO files again

------------------------------------------------------------------------
r820 | remi | 2005-12-24 13:25:18 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/test

Update svn:ignore

------------------------------------------------------------------------
r819 | remi | 2005-12-24 13:24:17 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/test/Makefile.am
   A /trunk/libteredo/test/addrcmp.c (from /trunk/libteredo/test/regress.c:818)
   A /trunk/libteredo/test/hmac.c (from /trunk/libteredo/test/unit.c:818)
   A /trunk/libteredo/test/list.c (from /trunk/libteredo/test/unit.c:818)
   D /trunk/libteredo/test/regress.c
   D /trunk/libteredo/test/unit.c

Separate each tests

------------------------------------------------------------------------
r818 | remi | 2005-12-24 13:17:19 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.h

Fix client-less compilation

------------------------------------------------------------------------
r817 | remi | 2005-12-24 13:17:06 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/test

Update svn:ignore

------------------------------------------------------------------------
r816 | remi | 2005-12-24 13:14:20 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   D /trunk/libteredo/dummy.cpp
   D /trunk/libteredo/regress.c
   A /trunk/libteredo/test
   A /trunk/libteredo/test/Makefile.am (from /trunk/libteredo/Makefile.am:815)
   A /trunk/libteredo/test/dummy.cpp (from /trunk/libteredo/dummy.cpp:815)
   A /trunk/libteredo/test/regress.c (from /trunk/libteredo/regress.c:815)
   A /trunk/libteredo/test/unit.c (from /trunk/libteredo/unit.c:815)
   D /trunk/libteredo/unit.c

Move tests to a separate subdirectory

------------------------------------------------------------------------
r815 | remi | 2005-12-24 13:01:45 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Add comment

------------------------------------------------------------------------
r814 | remi | 2005-12-24 11:56:08 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/unit.c

Re-enable HMAC test

------------------------------------------------------------------------
r813 | remi | 2005-12-24 11:55:49 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/dummy.cpp
   M /trunk/libteredo/unit.c

Partial unit test for peer list

------------------------------------------------------------------------
r812 | remi | 2005-12-24 11:35:39 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h

C linking to allow unit testing

------------------------------------------------------------------------
r811 | remi | 2005-12-24 11:25:27 +0200 (Sat, 24 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Browse peer list once rather than twice when allocating a new peer

------------------------------------------------------------------------
r810 | remi | 2005-12-24 11:16:55 +0200 (Sat, 24 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Use new peer list API
(though their could probably be some improvements)

------------------------------------------------------------------------
r809 | remi | 2005-12-23 22:54:55 +0200 (Fri, 23 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Moves Teredo server IPv4 address check in packet reception
(should do no harm, we'll see)

------------------------------------------------------------------------
r808 | remi | 2005-12-23 22:34:12 +0200 (Fri, 23 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

New peer list API (currently wrapped into the old one)

------------------------------------------------------------------------
r807 | remi | 2005-12-23 18:57:24 +0200 (Fri, 23 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.h

Candidate C API for libteredo

------------------------------------------------------------------------
r806 | remi | 2005-12-23 17:17:53 +0200 (Fri, 23 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Separate peer class from relay class

------------------------------------------------------------------------
r805 | remi | 2005-12-23 11:11:37 +0200 (Fri, 23 Dec 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Compile fix

------------------------------------------------------------------------
r804 | remi | 2005-12-23 11:03:04 +0200 (Fri, 23 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

client-less compilation fix

------------------------------------------------------------------------
r803 | remi | 2005-12-23 11:01:32 +0200 (Fri, 23 Dec 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

No longer get useless CAP_NET_ADMIN with miredo-server

------------------------------------------------------------------------
r802 | remi | 2005-12-23 10:50:15 +0200 (Fri, 23 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Localize error message at no additionnal translation cost

------------------------------------------------------------------------
r801 | remi | 2005-12-23 10:49:37 +0200 (Fri, 23 Dec 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Log messages as Teredo client connectivity goes up/down

------------------------------------------------------------------------
r800 | remi | 2005-12-22 21:38:09 +0200 (Thu, 22 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libtun6/tun6.c

libtun6 is fairly stable -> remove further debug messages
(also using syslog within a software library is not very clean)

------------------------------------------------------------------------
r799 | remi | 2005-12-22 21:29:31 +0200 (Thu, 22 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Remove some debug messages

------------------------------------------------------------------------
r798 | remi | 2005-12-22 21:29:18 +0200 (Thu, 22 Dec 2005) | 2 lines
Changed paths:
   M /trunk/TODO

Update ToDo list

------------------------------------------------------------------------
r797 | remi | 2005-12-22 21:24:29 +0200 (Thu, 22 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c
   M /trunk/libteredo/teredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

DEFAULT_TEREDO_PREFIX -> TEREDO_PREFIX

------------------------------------------------------------------------
r796 | remi | 2005-12-22 21:14:57 +0200 (Thu, 22 Dec 2005) | 2 lines
Changed paths:
   M /trunk/misc/Makefile.am

Forgot to include one EXTRA file

------------------------------------------------------------------------
r795 | remi | 2005-12-21 17:51:17 +0200 (Wed, 21 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Prepare to remove teredo_maintenance from relay.h

------------------------------------------------------------------------
r794 | remi | 2005-12-21 17:48:47 +0200 (Wed, 21 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Remove debug messages

------------------------------------------------------------------------
r793 | remi | 2005-12-21 13:18:51 +0200 (Wed, 21 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/packets.h

Minor fixes

------------------------------------------------------------------------
r792 | remi | 2005-12-21 13:12:39 +0200 (Wed, 21 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/maintain.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Advance maintenance conversion to C

------------------------------------------------------------------------
r791 | remi | 2005-12-21 12:54:15 +0200 (Wed, 21 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/packets.c
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/server.c
   M /trunk/libteredo/teredo-udp.h
   M /trunk/libteredo/teredo.c

Clean up struct teredo_packet

------------------------------------------------------------------------
r790 | remi | 2005-12-21 11:23:54 +0200 (Wed, 21 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.h

Fix client compilation

------------------------------------------------------------------------
r789 | remi | 2005-12-21 11:22:40 +0200 (Wed, 21 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in

Update POTFILES

------------------------------------------------------------------------
r788 | remi | 2005-12-21 11:18:37 +0200 (Wed, 21 Dec 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Remove redundant #include

------------------------------------------------------------------------
r787 | remi | 2005-12-21 11:14:33 +0200 (Wed, 21 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/packets.c (from /trunk/libteredo/packets.cpp:786)
   D /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay.cpp

packets.cpp -> packets.c

------------------------------------------------------------------------
r786 | remi | 2005-12-21 11:10:15 +0200 (Wed, 21 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/teredo-udp.h

Get rid of useless TeredoPacket wrapper class

------------------------------------------------------------------------
r785 | remi | 2005-12-20 22:20:21 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/security.c
   M /trunk/libteredo/server.c
   M /trunk/po/POTFILES.in
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

Strings rationalization

------------------------------------------------------------------------
r784 | remi | 2005-12-20 21:41:57 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c
   M /trunk/src/server.cpp

Really uniformize error message

------------------------------------------------------------------------
r783 | remi | 2005-12-20 21:37:26 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   D /trunk/libteredo/relay-udp.cpp
   D /trunk/libteredo/relay-udp.h
   D /trunk/libteredo/server-udp.cpp
   D /trunk/libteredo/server-udp.h

Remove redundant files

------------------------------------------------------------------------
r782 | remi | 2005-12-20 21:19:43 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/teredo-udp.h
   M /trunk/src/relay.cpp

Get rid of pretty useless TeredoRelayUDP wrapper

------------------------------------------------------------------------
r781 | remi | 2005-12-20 19:07:32 +0200 (Tue, 20 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/server.c

Use I/O vector when forwarding bubbles over UDP
(also fix C version of UDP forwarding server code)

------------------------------------------------------------------------
r780 | remi | 2005-12-20 18:27:20 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp

Don't send unreachable message between bubbles/pings

------------------------------------------------------------------------
r779 | remi | 2005-12-20 18:24:03 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Fix SendPing return value

------------------------------------------------------------------------
r778 | remi | 2005-12-20 17:55:31 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.c
   M /trunk/libteredo/server.h

Fix comments

------------------------------------------------------------------------
r777 | remi | 2005-12-20 17:55:00 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/server.c (from /trunk/libteredo/server.cpp:773)
   D /trunk/libteredo/server.cpp

server code is now really in C

------------------------------------------------------------------------
r776 | remi | 2005-12-20 17:54:21 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo
   M /trunk/src

Update svn:ignore

------------------------------------------------------------------------
r775 | remi | 2005-12-20 17:50:03 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/checksum.h

Missing SVN properties

------------------------------------------------------------------------
r774 | remi | 2005-12-20 17:49:35 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/checksum.h

C99 fixes

------------------------------------------------------------------------
r773 | remi | 2005-12-20 17:36:58 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Make valgrind even more happy

------------------------------------------------------------------------
r772 | remi | 2005-12-20 17:29:42 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Make valgrind happier

------------------------------------------------------------------------
r771 | remi | 2005-12-20 17:27:18 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Fix missing initialization

------------------------------------------------------------------------
r770 | remi | 2005-12-20 17:22:14 +0200 (Tue, 20 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/server.cpp

- send Router Advertisement as an I/O vector to avoid memcpy()s
- uniformize error message

------------------------------------------------------------------------
r769 | remi | 2005-12-20 17:20:33 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Fix return value of libteredo_server_check

------------------------------------------------------------------------
r768 | remi | 2005-12-20 17:02:01 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Fix use of uninitalized value

------------------------------------------------------------------------
r767 | remi | 2005-12-20 16:59:41 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/src/server.cpp

Advance server conversion to C

------------------------------------------------------------------------
r766 | remi | 2005-12-20 14:57:18 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server-udp.cpp

Remove dead code

------------------------------------------------------------------------
r765 | remi | 2005-12-20 13:27:05 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in

Update files list

------------------------------------------------------------------------
r764 | remi | 2005-12-20 13:13:47 +0200 (Tue, 20 Dec 2005) | 4 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/relay-udp.h
   M /trunk/libteredo/server-udp.h
   A /trunk/libteredo/teredo-udp.h (from /trunk/libteredo/teredo.h:763)
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h

- Implement yet-to-be-used teredo_sendv() function to send Teredo packets
  as I/O vectors.
- Move private stuff from <libteredo/teredo.h> to libteredo/teredo-udp.h

------------------------------------------------------------------------
r763 | remi | 2005-12-20 12:37:05 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server-udp.h
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/libteredo/teredo.h

Use struct teredo_packet instead of class TeredoPacket in server code

------------------------------------------------------------------------
r762 | remi | 2005-12-20 12:08:28 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   D /trunk/libteredo/teredo-udp.cpp

Remove redumdant file

------------------------------------------------------------------------
r761 | remi | 2005-12-20 12:07:26 +0200 (Tue, 20 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h

Convert Teredo packet reception code to C

------------------------------------------------------------------------
r760 | remi | 2005-12-19 13:16:34 +0200 (Mon, 19 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/unit.c

Unit test for HMAC procedures

------------------------------------------------------------------------
r759 | remi | 2005-12-19 13:15:14 +0200 (Mon, 19 Dec 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h

Modify HMAC in echo requests so that they put a PID in ICMPv6 ID
and some sort of sequence in ICMPv6 SEQ

------------------------------------------------------------------------
r758 | remi | 2005-12-19 13:14:14 +0200 (Mon, 19 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Minor cleanup

------------------------------------------------------------------------
r754 | remi | 2005-12-11 13:16:50 +0200 (Sun, 11 Dec 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Bump trunk to 0.6.0

------------------------------------------------------------------------
r753 | remi | 2005-12-11 13:13:34 +0200 (Sun, 11 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/regress.c

Add regression test for t6cmp()

------------------------------------------------------------------------
r752 | remi | 2005-12-11 13:01:10 +0200 (Sun, 11 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/teredo.h

Export t6cmp()

------------------------------------------------------------------------
r751 | remi | 2005-12-11 13:00:39 +0200 (Sun, 11 Dec 2005) | 2 lines
Changed paths:
   M /trunk/NEWS

Additionnal news

------------------------------------------------------------------------
r747 | remi | 2005-12-11 12:29:07 +0200 (Sun, 11 Dec 2005) | 5 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Fix severe bug in t6cmp that would basically consider IPv6 addresses as
equal as soon as either of their four double-words are equal
(and in the case of Teredo tunneling... every body has the first double
word equal)

------------------------------------------------------------------------
r746 | remi | 2005-12-11 12:07:36 +0200 (Sun, 11 Dec 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

Miredo also needs CAP_NET_RAW now

------------------------------------------------------------------------
r745 | remi | 2005-12-11 11:36:13 +0200 (Sun, 11 Dec 2005) | 4 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/relay.cpp

Implement emitting of ICMPv6 errors via an ICMPv6 socket rather than the
Teredo tunnel - this allows the use of kernel checksumming and of kernel
source address selection (very useful for Teredo relays)

------------------------------------------------------------------------
r744 | remi | 2005-12-11 11:21:06 +0200 (Sun, 11 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Use a new callback to emit ICMPv6 error messages

------------------------------------------------------------------------
r743 | remi | 2005-12-10 17:52:19 +0200 (Sat, 10 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/init.c
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

TeredoRelay::SendUnreach should not return a value

------------------------------------------------------------------------
r742 | remi | 2005-12-10 17:41:34 +0200 (Sat, 10 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay.cpp

Support building ICMPv6 errors as well as ICMPv6/IPv6 errors

------------------------------------------------------------------------
r741 | remi | 2005-12-10 16:25:10 +0200 (Sat, 10 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

(I|Dei)nitHMAC needs no longer be called from TeredoRelay

------------------------------------------------------------------------
r740 | remi | 2005-12-10 16:23:44 +0200 (Sat, 10 Dec 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/init.c
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h
   M /trunk/src/relay.cpp

Hide libteredo's NonceGenerator from miredo

------------------------------------------------------------------------
r739 | remi | 2005-11-27 18:44:25 +0200 (Sun, 27 Nov 2005) | 2 lines
Changed paths:
   M /trunk/NEWS

Mention security fix

------------------------------------------------------------------------
r738 | remi | 2005-11-27 18:42:17 +0200 (Sun, 27 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo.c

Fix loop

------------------------------------------------------------------------
r737 | remi | 2005-11-27 11:46:13 +0200 (Sun, 27 Nov 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Remove bogus line of code that should have been removed
in the previous commit

------------------------------------------------------------------------
r736 | remi | 2005-11-27 11:37:32 +0200 (Sun, 27 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo.c

Avoid infinite loop in previous commit

------------------------------------------------------------------------
r735 | remi | 2005-11-27 11:31:13 +0200 (Sun, 27 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo.c

Security fix : ignore ICMP/ICMPv6 errors returned from sendto()

------------------------------------------------------------------------
r734 | remi | 2005-11-26 23:19:36 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/TODO

Update documentation

------------------------------------------------------------------------
r733 | remi | 2005-11-26 22:42:48 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/en_GB.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update PO files

------------------------------------------------------------------------
r732 | remi | 2005-11-26 22:39:29 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Remove debug message yet another time

------------------------------------------------------------------------
r731 | remi | 2005-11-26 22:38:53 +0200 (Sat, 26 Nov 2005) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp

Re-implement inter-bubbles and inter-pings 2-seconds delay
(without increasing the TeredoRelay::peer class size)

------------------------------------------------------------------------
r730 | remi | 2005-11-26 19:28:38 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Remove bogus debug message

------------------------------------------------------------------------
r729 | remi | 2005-11-26 19:28:11 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp

Reworked peer list struct alignment : size down to 40 bytes from 44 bytes

------------------------------------------------------------------------
r728 | remi | 2005-11-26 19:12:02 +0200 (Sat, 26 Nov 2005) | 4 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/security.c
   M /trunk/libteredo/security.h

Use time-dependant HMAC-MD5 for direct IPv6 connectivity tests
instead of pseudorandom nonce from the kernel's entropy pool
(requires libgcrypt)

------------------------------------------------------------------------
r727 | remi | 2005-11-26 19:09:28 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/admin

Ignore admin/compile which is now required

------------------------------------------------------------------------
r726 | remi | 2005-11-26 19:05:44 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Look for libgcrypt, and fail if client support is requested without it

------------------------------------------------------------------------
r725 | remi | 2005-11-26 13:00:32 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Fix libtun6 dependance (regression introduced while libtoolizing libtun6)

------------------------------------------------------------------------
r724 | remi | 2005-11-26 12:57:33 +0200 (Sat, 26 Nov 2005) | 3 lines
Changed paths:
   M /trunk/po/LINGUAS
   M /trunk/po/en.po
   A /trunk/po/en_GB.po (from /trunk/po/en.po:723)
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

- Update PO files
- Add British english localization

------------------------------------------------------------------------
r723 | remi | 2005-11-26 12:46:02 +0200 (Sat, 26 Nov 2005) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/maintain.cpp

Handle SIGSTOP, CPU starvation and software suspend properly
in maintenance procedure, by resynching the timer if time drifted too much

------------------------------------------------------------------------
r722 | remi | 2005-11-26 01:33:40 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libtun6
   M /trunk/libtun6/Makefile.am
   M /trunk/libtun6/tun6.c
   M /trunk/libtun6/tun6.h

Libtoolize libtun6

------------------------------------------------------------------------
r721 | remi | 2005-11-26 01:30:49 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Defaults to static libraries for now

------------------------------------------------------------------------
r720 | remi | 2005-11-26 01:30:03 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Make gcc -Wextra happier

------------------------------------------------------------------------
r719 | remi | 2005-11-26 01:28:38 +0200 (Sat, 26 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/maintain.cpp
   A /trunk/libteredo/maintain.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Refactor maintenance procedure

------------------------------------------------------------------------
r718 | remi | 2005-11-25 21:34:04 +0200 (Fri, 25 Nov 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

Extra compiler warnings fixes

------------------------------------------------------------------------
r717 | remi | 2005-11-20 18:32:44 +0200 (Sun, 20 Nov 2005) | 3 lines
Changed paths:
   M /trunk/README

Support Linux kernel >= 2.6.9 rather than >= 2.6.0
because of the harmful on-link assumption in version 2.6.8 and older.

------------------------------------------------------------------------
r716 | remi | 2005-11-20 17:58:49 +0200 (Sun, 20 Nov 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   D /trunk/libteredo/queue.cpp
   D /trunk/libteredo/queue.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Rewritten (simplified, likely fastened) packet queueing
(-> peers list item down from 52 to 44 bytes)

------------------------------------------------------------------------
r715 | remi | 2005-11-20 15:35:38 +0200 (Sun, 20 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/queue.h

Fix copyright

------------------------------------------------------------------------
r714 | remi | 2005-11-20 12:44:13 +0200 (Sun, 20 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Configurable ICMPv6 error rate limiting

------------------------------------------------------------------------
r713 | remi | 2005-11-19 21:01:20 +0200 (Sat, 19 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.h
   M /trunk/src/privproc.c

Use C style comments

------------------------------------------------------------------------
r712 | remi | 2005-11-19 20:56:35 +0200 (Sat, 19 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/tun6.c

Fix C conversion of BSD-specific code

------------------------------------------------------------------------
r711 | remi | 2005-11-19 20:49:36 +0200 (Sat, 19 Nov 2005) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in

Fix libtun6 files list

------------------------------------------------------------------------
r710 | remi | 2005-11-19 20:49:05 +0200 (Sat, 19 Nov 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/configure.ac

Update version number and new features list

------------------------------------------------------------------------
r709 | remi | 2005-11-19 20:19:41 +0200 (Sat, 19 Nov 2005) | 5 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp

- Fix previous commit (was sending duplicate packets in some cases)
- Emit ICMPv6 Address Unreachable when a peer Teredo client does not respond
  (much like when an other node on the same Ethernet segment does not reply
   to ICMPv6 Neighbor Discovery)

------------------------------------------------------------------------
r708 | remi | 2005-11-19 19:44:00 +0200 (Sat, 19 Nov 2005) | 5 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

- emit ICMPv6 Address Unreachable when direct connectivity check fails
- emit Address Unreachable rather than No Route when trying to send
  packet toward non-Teredo nodes from a Teredo relay
- clean up ICMPv6 packets generation

------------------------------------------------------------------------
r707 | remi | 2005-11-19 18:57:42 +0200 (Sat, 19 Nov 2005) | 2 lines
Changed paths:
   M /trunk/TODO

New todo items

------------------------------------------------------------------------
r706 | remi | 2005-11-19 18:57:28 +0200 (Sat, 19 Nov 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

Cosmetic

------------------------------------------------------------------------
r704 | remi | 2005-11-19 13:15:11 +0200 (Sat, 19 Nov 2005) | 2 lines
Changed paths:
   M /trunk/bootstrap

Remove superfluous gettext.h check

------------------------------------------------------------------------
r703 | remi | 2005-11-19 12:31:06 +0200 (Sat, 19 Nov 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am
   A /trunk/src/privproc.c (from /trunk/src/privproc.cpp:702)
   D /trunk/src/privproc.cpp
   M /trunk/src/privproc.h

conversion to C

------------------------------------------------------------------------
r702 | remi | 2005-11-18 22:43:37 +0200 (Fri, 18 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/Makefile.am
   D /trunk/libtun6/ipv6-tunnel.cpp
   D /trunk/libtun6/ipv6-tunnel.h
   A /trunk/libtun6/tun6.c
   A /trunk/libtun6/tun6.h
   M /trunk/src/main.c
   M /trunk/src/privproc.cpp
   M /trunk/src/privproc.h
   M /trunk/src/relay.cpp

Rewritten libtun6 in C99

------------------------------------------------------------------------
r701 | remi | 2005-11-16 19:16:14 +0200 (Wed, 16 Nov 2005) | 2 lines
Changed paths:
   M /trunk/TODO

Add major bugfix to the todo list

------------------------------------------------------------------------
r700 | remi | 2005-11-16 19:15:54 +0200 (Wed, 16 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.cpp

Fix comment

------------------------------------------------------------------------
r699 | remi | 2005-11-12 18:53:35 +0200 (Sat, 12 Nov 2005) | 2 lines
Changed paths:
   M /trunk/bootstrap

check for libtool properly

------------------------------------------------------------------------
r698 | remi | 2005-11-12 18:08:37 +0200 (Sat, 12 Nov 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Bump version number

------------------------------------------------------------------------
r696 | remi | 2005-11-10 21:43:33 +0200 (Thu, 10 Nov 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog

ChangeLog for 0.5.4

------------------------------------------------------------------------
r695 | remi | 2005-11-10 19:48:48 +0200 (Thu, 10 Nov 2005) | 3 lines
Changed paths:
   M /trunk/po/en.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

- Resync PO files
- Nice quotes for English language

------------------------------------------------------------------------
r694 | remi | 2005-11-10 19:47:29 +0200 (Thu, 10 Nov 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Fix error message

------------------------------------------------------------------------
r693 | remi | 2005-11-10 19:23:57 +0200 (Thu, 10 Nov 2005) | 3 lines
Changed paths:
   M /trunk/po/LINGUAS
   M /trunk/po/Makevars
   A /trunk/po/en.po
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

- Update French PO
- Add English PO for non-ASCII characters support

------------------------------------------------------------------------
r692 | remi | 2005-11-10 19:23:07 +0200 (Thu, 10 Nov 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

Translate anything that can be in --version

------------------------------------------------------------------------
r691 | remi | 2005-11-10 19:22:28 +0200 (Thu, 10 Nov 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO

Update documentation for 0.5.4

------------------------------------------------------------------------
r690 | remi | 2005-11-09 14:33:44 +0200 (Wed, 09 Nov 2005) | 2 lines
Changed paths:
   M /trunk/THANKS
   M /trunk/libteredo/relay.cpp

Fix client to client peer listing

------------------------------------------------------------------------
r689 | remi | 2005-10-22 19:58:50 +0300 (Sat, 22 Oct 2005) | 5 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/relay.cpp

- Minor clean up
- Fix gallicism
- Retry qualification every 2 minutes rather than 50 seconds
  when the server is completely unreachable

------------------------------------------------------------------------
r688 | remi | 2005-10-22 18:27:00 +0300 (Sat, 22 Oct 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Increment version number

------------------------------------------------------------------------
r686 | remi | 2005-10-22 18:24:50 +0300 (Sat, 22 Oct 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

two memcpy()s become one

------------------------------------------------------------------------
r685 | remi | 2005-10-09 19:13:24 +0300 (Sun, 09 Oct 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog

ChangeLog for 0.5.3

------------------------------------------------------------------------
r684 | remi | 2005-10-09 19:12:25 +0300 (Sun, 09 Oct 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

PO files sync

------------------------------------------------------------------------
r683 | remi | 2005-10-09 19:12:08 +0300 (Sun, 09 Oct 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Include test_conf.sh in tarball

------------------------------------------------------------------------
r682 | remi | 2005-10-09 19:06:17 +0300 (Sun, 09 Oct 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/libteredo/peerlist.cpp

Prepare 0.5.3 release

------------------------------------------------------------------------
r681 | remi | 2005-09-09 17:50:35 +0300 (Fri, 09 Sep 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/checksum.h
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/server.cpp

Commoditize ICMPv6 checksumming

------------------------------------------------------------------------
r680 | remi | 2005-09-05 22:21:55 +0300 (Mon, 05 Sep 2005) | 4 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Ignore malformatted prefix option in received Router Advertisement
(contrary to the fix in 0.5.0 and 0.4.3, this one cannot result in any
 malicious use, not even reading "undefined" memory)

------------------------------------------------------------------------
r679 | remi | 2005-09-03 09:44:08 +0300 (Sat, 03 Sep 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

PO Updates

------------------------------------------------------------------------
r678 | remi | 2005-09-03 09:43:36 +0300 (Sat, 03 Sep 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Partial strings rationalization

------------------------------------------------------------------------
r677 | remi | 2005-09-03 09:43:10 +0300 (Sat, 03 Sep 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Improved ICMPv6 error generation rules

------------------------------------------------------------------------
r676 | remi | 2005-09-03 09:42:40 +0300 (Sat, 03 Sep 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server-udp.cpp

Remove useless (=never trigerred) check

------------------------------------------------------------------------
r675 | remi | 2005-08-28 17:56:18 +0300 (Sun, 28 Aug 2005) | 2 lines
Changed paths:
   M /trunk/m4/binreloc.m4

Fix text - binreloc is disabled by default

------------------------------------------------------------------------
r674 | remi | 2005-08-28 17:29:37 +0300 (Sun, 28 Aug 2005) | 2 lines
Changed paths:
   M /trunk/bootstrap
   M /trunk/configure.ac
   A /trunk/include/gettext.h

Fix gettext.h - it's a pity we can't use the official one as is

------------------------------------------------------------------------
r673 | remi | 2005-08-28 17:19:16 +0300 (Sun, 28 Aug 2005) | 5 lines
Changed paths:
   M /trunk/autopackage/default.apspec.in
   M /trunk/m4/binreloc.m4

Disable binreloc by default because it breaks cross-compilation
(complaints should be addressed to the binreloc maintainer
 for using AC_CHECK_FILE without checking whether cross-compilation is
 in effect)

------------------------------------------------------------------------
r672 | remi | 2005-08-28 10:23:47 +0300 (Sun, 28 Aug 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Untested kFreeBSD fix

------------------------------------------------------------------------
r671 | remi | 2005-08-27 10:45:16 +0300 (Sat, 27 Aug 2005) | 3 lines
Changed paths:
   M /trunk/src/Makefile.am
   A /trunk/src/test_conf.cpp
   A /trunk/src/test_conf.sh

Basic regression test for config parsing
should be improved

------------------------------------------------------------------------
r670 | remi | 2005-08-25 18:39:05 +0300 (Thu, 25 Aug 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

--disable-teredo-client compile fix

------------------------------------------------------------------------
r669 | remi | 2005-08-25 18:38:15 +0300 (Thu, 25 Aug 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/queue.cpp
   M /trunk/libteredo/queue.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Various optimization and some clean up.
Most noticeable change : per-peer structure is down from 80 to 52 bytes

------------------------------------------------------------------------
r668 | remi | 2005-08-25 18:36:27 +0300 (Thu, 25 Aug 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Bump version number

------------------------------------------------------------------------
r667 | remi | 2005-08-23 21:27:26 +0300 (Tue, 23 Aug 2005) | 5 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp

- Suppressed a bunch of gettimeofday
- Really finally almost clean initial nonce generation
- Suppressed (minor) timer drift (except when generating nonce - that
  could break)

------------------------------------------------------------------------
r665 | remi | 2005-08-23 20:05:38 +0300 (Tue, 23 Aug 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog

ChangeLog for 0.5.2

------------------------------------------------------------------------
r664 | remi | 2005-08-23 20:04:10 +0300 (Tue, 23 Aug 2005) | 3 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

- one last minute news
- PO sync *again*

------------------------------------------------------------------------
r663 | remi | 2005-08-23 20:02:56 +0300 (Tue, 23 Aug 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Cosmetic

------------------------------------------------------------------------
r662 | remi | 2005-08-23 19:32:13 +0300 (Tue, 23 Aug 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Fix install-sh path

------------------------------------------------------------------------
r661 | remi | 2005-08-23 19:28:54 +0300 (Tue, 23 Aug 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Use documented install-sh -d instead of $(mkdir_p)

------------------------------------------------------------------------
r660 | remi | 2005-08-23 18:41:26 +0300 (Tue, 23 Aug 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Implement peer list size limit

------------------------------------------------------------------------
r659 | remi | 2005-08-23 18:34:33 +0300 (Tue, 23 Aug 2005) | 4 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/relay.cpp

Remove return value from NotifyUp and NotifyDown because there is no way
to handle errors there. These are informative callbacks, so they just can't
fail.

------------------------------------------------------------------------
r658 | remi | 2005-08-23 18:26:18 +0300 (Tue, 23 Aug 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/po/POTFILES.in
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Documentation updates

------------------------------------------------------------------------
r657 | remi | 2005-08-22 22:37:57 +0300 (Mon, 22 Aug 2005) | 6 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp

Fix Router Solicitation sending madness in maintenance procedure
when a single maintenance packet failed to obtain an answer from the Teredo
server

--> I think I will have to make a bugfix release for that one

------------------------------------------------------------------------
r656 | remi | 2005-08-22 22:34:39 +0300 (Mon, 22 Aug 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h

Compile fix for --disable-teredo-client

------------------------------------------------------------------------
r655 | remi | 2005-08-22 21:12:11 +0300 (Mon, 22 Aug 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp

Fix obvious fatal regression in previous commit

------------------------------------------------------------------------
r654 | remi | 2005-08-22 20:59:32 +0300 (Mon, 22 Aug 2005) | 5 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

- Fix handling of unattended server Router Solicitation
- Fix and clean up maintenance procedure
- Clean up to prepare for new peer list lookups
  (probably based on Judy)

------------------------------------------------------------------------
r653 | remi | 2005-08-22 20:56:49 +0300 (Mon, 22 Aug 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/queue.h

Fix compiler warning

------------------------------------------------------------------------
r652 | remi | 2005-08-22 20:56:27 +0300 (Mon, 22 Aug 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp

Fix invalid use of free'd pointer

------------------------------------------------------------------------
r651 | remi | 2005-08-21 19:54:41 +0300 (Sun, 21 Aug 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Some code optimization
(in particular, remove the router solicitation memcpy)

------------------------------------------------------------------------
r650 | remi | 2005-08-21 13:13:56 +0300 (Sun, 21 Aug 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/queue.cpp
   M /trunk/libteredo/queue.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Smaller memory footprint, more efficient and cleaned up packet queueing

------------------------------------------------------------------------
r649 | remi | 2005-08-21 10:42:18 +0300 (Sun, 21 Aug 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/relay.cpp
   A /trunk/libteredo/security.c (from /trunk/libteredo/security.cpp:647)
   D /trunk/libteredo/security.cpp
   M /trunk/libteredo/security.h

Convert security.cpp to pure C99

------------------------------------------------------------------------
r648 | remi | 2005-08-20 14:48:34 +0300 (Sat, 20 Aug 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Don't build static libraries

------------------------------------------------------------------------
r647 | remi | 2005-07-20 19:11:30 +0300 (Wed, 20 Jul 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/main.c

- Fix French quotes spacing
- Fix American and French semi-colon spacing

------------------------------------------------------------------------
r646 | remi | 2005-07-14 21:37:22 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/admin
   M /trunk/bootstrap

Support for libtool

------------------------------------------------------------------------
r645 | remi | 2005-07-14 21:36:21 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk
   M /trunk/libteredo
   M /trunk/src

svn:ignore updates for libtool

------------------------------------------------------------------------
r644 | remi | 2005-07-14 21:33:27 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Compile fix

------------------------------------------------------------------------
r643 | remi | 2005-07-14 21:25:05 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   D /trunk/libteredo/teredo-udp.h
   M /trunk/src/Makefile.am

Provide libteredo as a shared library

------------------------------------------------------------------------
r642 | remi | 2005-07-14 21:15:39 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Forgot this file

------------------------------------------------------------------------
r641 | remi | 2005-07-14 21:15:08 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay-udp.cpp
   M /trunk/libteredo/relay-udp.h
   M /trunk/libteredo/server-udp.cpp
   M /trunk/libteredo/server-udp.h
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo.h

Another bunch of optimization/inlining

------------------------------------------------------------------------
r640 | remi | 2005-07-14 20:45:14 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.h

Oops. This time it seems to work

------------------------------------------------------------------------
r639 | remi | 2005-07-14 20:43:55 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.h

Type-o

------------------------------------------------------------------------
r638 | remi | 2005-07-14 20:42:13 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.h

Attempt to fix, this time with my brain switched on

------------------------------------------------------------------------
r637 | remi | 2005-07-14 20:38:36 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.h

Try to fix previous commit

------------------------------------------------------------------------
r636 | remi | 2005-07-14 20:31:29 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h

Use static inline when macro not safe

------------------------------------------------------------------------
r635 | remi | 2005-07-14 20:11:03 +0300 (Thu, 14 Jul 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h

Use macro rather than tiny functions when it is safe

------------------------------------------------------------------------
r634 | remi | 2005-07-14 18:45:01 +0300 (Thu, 14 Jul 2005) | 4 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/relay.h

- Don't use asynchronous cancellation - it was not safe
- Use shorter restart delay in case of failure
  (so that miredo goes up sooner when the connectivity is acquired)

------------------------------------------------------------------------
r633 | remi | 2005-07-07 20:48:41 +0300 (Thu, 07 Jul 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   M /trunk/libtun6/Makefile.am
   M /trunk/src/Makefile.am

pthread compilation parameters cleanup

------------------------------------------------------------------------
r632 | remi | 2005-07-01 21:11:02 +0300 (Fri, 01 Jul 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/src/conf.cpp
   M /trunk/src/privproc.cpp

PF_* -> AF_*

------------------------------------------------------------------------
r631 | remi | 2005-06-25 10:26:56 +0300 (Sat, 25 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h

Don't leak pidfile descriptor to non-privileged processes

------------------------------------------------------------------------
r630 | remi | 2005-06-25 10:13:07 +0300 (Sat, 25 Jun 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/server-udp.h
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

Fix busy waiting problem in miredo-server

------------------------------------------------------------------------
r629 | remi | 2005-06-18 21:03:06 +0300 (Sat, 18 Jun 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Fix bug whereby only secondary server socket would be used
Does NOT fix 100% CPU usage bug

------------------------------------------------------------------------
r628 | remi | 2005-06-18 13:45:57 +0300 (Sat, 18 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/src/server.cpp

Multithreaded and cleaned up miredo-server

------------------------------------------------------------------------
r627 | remi | 2005-06-17 20:48:55 +0300 (Fri, 17 Jun 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Bump version number

------------------------------------------------------------------------
r626 | remi | 2005-06-17 20:47:16 +0300 (Fri, 17 Jun 2005) | 3 lines
Changed paths:
   M /trunk/src/server.cpp

Fix caching of select()'s readset in miredo-server as was done a
while ago in miredo

------------------------------------------------------------------------
r625 | remi | 2005-06-17 20:40:56 +0300 (Fri, 17 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/server.cpp

Apply r572 to miredo-server

------------------------------------------------------------------------
r623 | remi | 2005-06-17 18:55:41 +0300 (Fri, 17 Jun 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Update ChangeLog

------------------------------------------------------------------------
r622 | remi | 2005-06-17 18:54:17 +0300 (Fri, 17 Jun 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Prepare make dist

------------------------------------------------------------------------
r621 | remi | 2005-06-17 18:35:53 +0300 (Fri, 17 Jun 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/TODO
   M /trunk/doc/miredo.8

Document OpenBSD support

------------------------------------------------------------------------
r620 | remi | 2005-06-17 18:02:19 +0300 (Fri, 17 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

Work-around for a buggy OS known as OpenBSD

------------------------------------------------------------------------
r619 | remi | 2005-06-17 17:59:46 +0300 (Fri, 17 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/security.cpp

Fix random device file path on OpenBSD

------------------------------------------------------------------------
r618 | remi | 2005-06-17 16:24:27 +0300 (Fri, 17 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/src/main.c

Makes OpenBSD happy

------------------------------------------------------------------------
r617 | remi | 2005-06-17 09:46:55 +0300 (Fri, 17 Jun 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/TODO
   M /trunk/doc/miredo.8
   M /trunk/libtun6/ipv6-tunnel.cpp

Doc update

------------------------------------------------------------------------
r616 | remi | 2005-06-16 22:15:32 +0300 (Thu, 16 Jun 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libtun6/ipv6-tunnel.cpp

At long last, route setup on FreeBSD works :-)

------------------------------------------------------------------------
r615 | remi | 2005-06-16 21:45:34 +0300 (Thu, 16 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

FreeBSD compile fix + clean up

------------------------------------------------------------------------
r614 | remi | 2005-06-16 19:24:53 +0300 (Thu, 16 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Remove debug messages

------------------------------------------------------------------------
r613 | remi | 2005-06-16 19:15:27 +0300 (Thu, 16 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

FreeBSD partial compile fix

------------------------------------------------------------------------
r612 | remi | 2005-06-16 19:15:12 +0300 (Thu, 16 Jun 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

PO update

------------------------------------------------------------------------
r611 | remi | 2005-06-16 19:10:29 +0300 (Thu, 16 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

Fix warning when compiling without NLS

------------------------------------------------------------------------
r610 | remi | 2005-06-16 18:49:16 +0300 (Thu, 16 Jun 2005) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Fix make distcheck

------------------------------------------------------------------------
r609 | remi | 2005-06-15 20:18:32 +0300 (Wed, 15 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/src/relay.cpp

clean up

------------------------------------------------------------------------
r608 | remi | 2005-06-15 20:14:22 +0300 (Wed, 15 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp

Removes addresses and route on exit

------------------------------------------------------------------------
r607 | remi | 2005-06-15 19:56:23 +0300 (Wed, 15 Jun 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libtun6/ipv6-tunnel.cpp

NetBSD tunnel addresses setup support

------------------------------------------------------------------------
r606 | remi | 2005-06-15 19:56:01 +0300 (Wed, 15 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/server.cpp

NetBSD compile fix

------------------------------------------------------------------------
r605 | remi | 2005-06-15 19:29:57 +0300 (Wed, 15 Jun 2005) | 2 lines
Changed paths:
   M /trunk/m4/sockaddr.m4

Fix sockaddr.sa_len detection

------------------------------------------------------------------------
r604 | remi | 2005-06-15 19:11:42 +0300 (Wed, 15 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp

Fix possible (unlikely) locked mutex destroy bug on NetBSD in syslog

------------------------------------------------------------------------
r603 | remi | 2005-06-14 23:14:57 +0300 (Tue, 14 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp

More complete fix for NetBSD

------------------------------------------------------------------------
r602 | remi | 2005-06-14 22:59:15 +0300 (Tue, 14 Jun 2005) | 4 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp

Fix pthread_cond_timedwait call : previously failed to unlock the
maintenance mutex if the maintenance thread was cancelled
(i.e. upon exit)

------------------------------------------------------------------------
r601 | remi | 2005-06-14 19:59:21 +0300 (Tue, 14 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/server.cpp

Another compile fix

------------------------------------------------------------------------
r600 | remi | 2005-06-14 19:58:03 +0300 (Tue, 14 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp

NetBSD compile fix

------------------------------------------------------------------------
r599 | remi | 2005-06-14 19:49:21 +0300 (Tue, 14 Jun 2005) | 2 lines
Changed paths:
   M /trunk/bootstrap

Bootstrap NetBSD fix

------------------------------------------------------------------------
r598 | remi | 2005-06-11 23:44:55 +0300 (Sat, 11 Jun 2005) | 3 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Prevent autoconfiguration through sysctl() (/proc actually) on Linux
It doesn't prevent initial attempt at autoconfiguration by the kernel :(

------------------------------------------------------------------------
r597 | remi | 2005-06-09 11:54:41 +0300 (Thu, 09 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

ICC warning fixes

------------------------------------------------------------------------
r596 | remi | 2005-06-09 11:49:58 +0300 (Thu, 09 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/server.cpp
   M /trunk/src/conf.cpp
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/privproc.cpp
   M /trunk/src/relay.cpp

Intel compiler warning fixes

------------------------------------------------------------------------
r595 | remi | 2005-06-09 11:28:17 +0300 (Thu, 09 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

gcc2 compile fix

------------------------------------------------------------------------
r594 | remi | 2005-06-08 18:58:38 +0300 (Wed, 08 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo-udp.cpp

Two fewer memset() calls

------------------------------------------------------------------------
r593 | remi | 2005-06-05 11:44:58 +0300 (Sun, 05 Jun 2005) | 3 lines
Changed paths:
   M /trunk/src/privproc.cpp

Sets a biger metric for Miredo's default route, so that other IPv6
connectivity mediums will always be prioritized

------------------------------------------------------------------------
r592 | remi | 2005-06-05 11:37:29 +0300 (Sun, 05 Jun 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/libtun6/ipv6-tunnel.h

Support for specifying a route metric

------------------------------------------------------------------------
r590 | remi | 2005-06-04 12:07:30 +0300 (Sat, 04 Jun 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Undo buggy commit r589 on src/miredo.cpp

------------------------------------------------------------------------
r589 | remi | 2005-06-04 12:06:25 +0300 (Sat, 04 Jun 2005) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp
   M /trunk/src/miredo.cpp

- Use better ICMPv6 error messages
- Don't pass connectivity test response pakcets to user

------------------------------------------------------------------------
r588 | remi | 2005-05-30 14:02:16 +0300 (Mon, 30 May 2005) | 2 lines
Changed paths:
   M /trunk/src/server.cpp

clean up

------------------------------------------------------------------------
r587 | remi | 2005-05-24 18:09:48 +0300 (Tue, 24 May 2005) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp

#include fix

------------------------------------------------------------------------
r586 | remi | 2005-05-20 23:50:47 +0300 (Fri, 20 May 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libtun6/ipv6-tunnel.cpp

Use strlcpy when available

------------------------------------------------------------------------
r585 | remi | 2005-05-10 13:49:56 +0300 (Tue, 10 May 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp

stricmp => strcasecmp

------------------------------------------------------------------------
r584 | remi | 2005-05-08 13:17:51 +0300 (Sun, 08 May 2005) | 2 lines
Changed paths:
   M /trunk/NEWS

Fix a typo

------------------------------------------------------------------------
r583 | remi | 2005-05-08 10:34:04 +0300 (Sun, 08 May 2005) | 3 lines
Changed paths:
   M /trunk/src/main.c

Fix nasty PID file not unlinked bug when POSIX capabilities are used
and ${localstatedir}/run is not owned by root

------------------------------------------------------------------------
r582 | remi | 2005-05-08 09:36:13 +0300 (Sun, 08 May 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/libtun6/ipv6-tunnel.h

Remove useless sanity check

------------------------------------------------------------------------
r581 | remi | 2005-05-07 23:46:07 +0300 (Sat, 07 May 2005) | 3 lines
Changed paths:
   M /trunk/src/relay.cpp

Ensure IPv6 packets are at least 40 bytes-long before trying to tunnel
them through Teredo

------------------------------------------------------------------------
r580 | remi | 2005-05-07 23:43:17 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/relay.cpp

Don't check and copy IPv6 header in TeredoRelay::SendPacket

------------------------------------------------------------------------
r579 | remi | 2005-05-07 23:41:37 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp

Fix use of unitialized value

------------------------------------------------------------------------
r578 | remi | 2005-05-07 22:46:12 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/relay.cpp

Some clean up

------------------------------------------------------------------------
r577 | remi | 2005-05-07 22:32:54 +0300 (Sat, 07 May 2005) | 3 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/libteredo/peerlist.cpp
   M /trunk/libteredo/peerlist.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/teredo.h

- Optimize peer list search
- Clean up peer list deletion

------------------------------------------------------------------------
r576 | remi | 2005-05-07 21:28:54 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.h

Avoid pointer reference and dereference in TeredoRelay::GetPrefix

------------------------------------------------------------------------
r575 | remi | 2005-05-07 21:24:17 +0300 (Sat, 07 May 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay-udp.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

- fix unitialized value in relay setup,
- fasten TeredoRelay::GetServerIP()

------------------------------------------------------------------------
r574 | remi | 2005-05-07 21:05:48 +0300 (Sat, 07 May 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/maintain.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Don't use costly call to in6_is_teredo_addr_cone
in TeredoRelay::IsCone

------------------------------------------------------------------------
r573 | remi | 2005-05-07 19:12:40 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay-udp.cpp
   M /trunk/libteredo/relay-udp.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/server-udp.h
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h
   M /trunk/src/relay.cpp

Get rid of readset parameter where possible

------------------------------------------------------------------------
r572 | remi | 2005-05-07 18:41:37 +0300 (Sat, 07 May 2005) | 4 lines
Changed paths:
   M /trunk/src/relay.cpp

More robust select()
It was causing a lot of problems whereby miredo would quit for no
reasons (particularly when debugging)

------------------------------------------------------------------------
r571 | remi | 2005-05-07 17:31:40 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Redo r566 in a non brain-dead manner

------------------------------------------------------------------------
r570 | remi | 2005-05-07 17:11:37 +0300 (Sat, 07 May 2005) | 3 lines
Changed paths:
   M /trunk/src/relay.cpp

Undo severly buggy commit r566
(I still don't get what's wrong with it)

------------------------------------------------------------------------
r569 | remi | 2005-05-07 16:58:57 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/bootstrap

Unbreak bootstrap

------------------------------------------------------------------------
r568 | remi | 2005-05-07 16:20:02 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Clean up tunnel explicitly at end

------------------------------------------------------------------------
r567 | remi | 2005-05-07 16:10:54 +0300 (Sat, 07 May 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.cpp

- Remove useless checks
- Remove useless memset

------------------------------------------------------------------------
r566 | remi | 2005-05-07 16:01:10 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Cache select's read set

------------------------------------------------------------------------
r565 | remi | 2005-05-07 15:55:39 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

Don't use a reference since it's not needed

------------------------------------------------------------------------
r564 | remi | 2005-05-07 09:39:15 +0300 (Sat, 07 May 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/configure.ac
   M /trunk/src/main.c

Allow running as root if --enable-miredo-user=root was used

------------------------------------------------------------------------
r562 | remi | 2005-05-06 23:30:59 +0300 (Fri, 06 May 2005) | 4 lines
Changed paths:
   M /trunk/src/miredo.cpp

Leave of POSIX capabilities even we unpriv_uid is 0.
It's still a bad idea, even without capabilities.
That's why it's still impossible without patching the program.

------------------------------------------------------------------------
r561 | remi | 2005-05-06 23:28:00 +0300 (Fri, 06 May 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/src/main.c

Fix use of POSIX capabilities for miredo-server

------------------------------------------------------------------------
r560 | remi | 2005-05-06 20:04:59 +0300 (Fri, 06 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/peerlist.cpp (from /trunk/libteredo/relay.cpp:559)
   A /trunk/libteredo/peerlist.h (from /trunk/libteredo/relay.cpp:559)
   M /trunk/libteredo/relay.cpp
   M /trunk/po/POTFILES.in

Another split : move TeredoRelay::peer in separate files

------------------------------------------------------------------------
r559 | remi | 2005-05-06 19:50:52 +0300 (Fri, 06 May 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/maintain.cpp (from /trunk/libteredo/relay.cpp:558)
   M /trunk/libteredo/relay.cpp

Move qualification/maintainance away from relay.cpp
which was once again getting fairly long

------------------------------------------------------------------------
r558 | remi | 2005-05-06 18:31:45 +0300 (Fri, 06 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac

Bump version number to 0.5.1

------------------------------------------------------------------------
r557 | remi | 2005-05-06 15:47:50 +0300 (Fri, 06 May 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog

ChangeLog update for release 0.5.0

------------------------------------------------------------------------
r556 | remi | 2005-05-06 14:07:19 +0300 (Fri, 06 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

String rationalization

------------------------------------------------------------------------
r555 | remi | 2005-05-06 14:02:58 +0300 (Fri, 06 May 2005) | 4 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/TODO
   M /trunk/configure.ac

Change version to 0.5.0 as they were a lot of changes,
some of which break user interface
(most particularly the introduction of miredo-server)

------------------------------------------------------------------------
r554 | remi | 2005-05-06 13:56:55 +0300 (Fri, 06 May 2005) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

- fix race condition when calling NotifyUp()
- wait for 30 seconds rather than 300 upon initial connectivity loss

------------------------------------------------------------------------
r553 | remi | 2005-05-06 13:27:12 +0300 (Fri, 06 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.cpp

Put all Teredo UDP sockets in non-blocking mode

------------------------------------------------------------------------
r552 | remi | 2005-05-06 13:21:12 +0300 (Fri, 06 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/server.cpp

Ensure relaying of Echo requests is non-blocking

------------------------------------------------------------------------
r551 | remi | 2005-05-06 12:38:30 +0300 (Fri, 06 May 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Regenerate server nonce every hour

------------------------------------------------------------------------
r550 | remi | 2005-05-06 12:01:23 +0300 (Fri, 06 May 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

- fix compilation with --disable-teredo-client
- use nanosleep() instead of select()

------------------------------------------------------------------------
r549 | remi | 2005-05-06 11:55:45 +0300 (Fri, 06 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/misc/miredo.conf-dist

Add IgnoreConeBit to sample config

------------------------------------------------------------------------
r548 | remi | 2005-05-06 11:47:17 +0300 (Fri, 06 May 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Add new option IgnoreConeBit

------------------------------------------------------------------------
r547 | remi | 2005-05-06 11:43:19 +0300 (Fri, 06 May 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Option to ignore cone bit
(ie. always treat peers as if they were restricted)

------------------------------------------------------------------------
r546 | remi | 2005-05-05 23:56:08 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

String rationalization

------------------------------------------------------------------------
r545 | remi | 2005-05-05 23:33:32 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

PO resync

------------------------------------------------------------------------
r544 | remi | 2005-05-05 22:56:06 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

Fix closing of pidfile

------------------------------------------------------------------------
r543 | remi | 2005-05-05 22:42:58 +0300 (Thu, 05 May 2005) | 3 lines
Changed paths:
   M /trunk/src/prefix.h

completely remove ETCDIR/CONFDIR/SYSCONFDIR ...
at least until binreloc & autopackage are fixed

------------------------------------------------------------------------
r542 | remi | 2005-05-05 22:32:23 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Fix compilation without binreloc

------------------------------------------------------------------------
r541 | remi | 2005-05-05 22:23:15 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp

BSD compile fix

------------------------------------------------------------------------
r540 | remi | 2005-05-05 22:12:20 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/src/main.c

Lock pidfile properly

------------------------------------------------------------------------
r539 | remi | 2005-05-05 20:19:20 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp

Fixes a bug whereby privileged process would never terminate

------------------------------------------------------------------------
r538 | remi | 2005-05-05 20:09:56 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac
   M /trunk/src/Makefile.am
   M /trunk/src/main.c
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Add a command line option to modify pidfile path

------------------------------------------------------------------------
r537 | remi | 2005-05-05 19:42:26 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/src/server.cpp

Check IPv6 support before starting server

------------------------------------------------------------------------
r536 | remi | 2005-05-05 19:27:48 +0300 (Thu, 05 May 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

failed server solicitation counter need not be accessed outside of
MaintenanceThread

------------------------------------------------------------------------
r535 | remi | 2005-05-05 18:26:30 +0300 (Thu, 05 May 2005) | 5 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/relay.cpp

Rewrite qualification and maintenance
- now run in a dedicated thread
- fix connectivity loss detection (45(+30) seconds => 15(+30) seconds)
- suppress Process() callback

------------------------------------------------------------------------
r534 | remi | 2005-05-05 18:09:35 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp

miredo_configure_tunnel now wait until the configuration is actually applied

------------------------------------------------------------------------
r533 | remi | 2005-05-05 17:55:40 +0300 (Thu, 05 May 2005) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp

Fix bug whereby privproc would attempt to delete address multiple times

------------------------------------------------------------------------
r532 | remi | 2005-05-04 22:15:29 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/security.cpp

make sure we don't leak memory content when nonce generation fails

------------------------------------------------------------------------
r531 | remi | 2005-05-04 19:20:11 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Hopefully fix linking with --disable-teredo-client

------------------------------------------------------------------------
r530 | remi | 2005-05-04 19:18:28 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Avoid duplication of code to send ping (Direct connectivity test)

------------------------------------------------------------------------
r529 | remi | 2005-05-04 14:49:55 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/libteredo/Makefile.am
   M /trunk/libtun6/Makefile.am
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Update copyright notices as appropriate

------------------------------------------------------------------------
r528 | remi | 2005-05-04 14:43:41 +0300 (Wed, 04 May 2005) | 3 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Yet another cleanup
(no more TODOs / FIXMEs in src/)

------------------------------------------------------------------------
r527 | remi | 2005-05-04 13:55:25 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/NEWS

Some news

------------------------------------------------------------------------
r526 | remi | 2005-05-04 13:38:06 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/autopackage/default.apspec.in

Kill miredo-server if found upon uninstallation

------------------------------------------------------------------------
r525 | remi | 2005-05-04 13:18:14 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am
   M /trunk/src/main.c
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Don't link miredo-server with libtun6

------------------------------------------------------------------------
r524 | remi | 2005-05-04 13:05:47 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   A /trunk/misc/miredo-server.sh (from /trunk/misc/miredo.sh:523)

Debian initscript for miredo-server

------------------------------------------------------------------------
r523 | remi | 2005-05-04 13:02:17 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo

Some fixes. Still incomplete/buggy

------------------------------------------------------------------------
r522 | remi | 2005-05-04 12:55:37 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/doc/miredo-server.conf.5
   M /trunk/doc/miredo.conf.5

Document ServerAddress2 and ServerBindAddress2

------------------------------------------------------------------------
r521 | remi | 2005-05-04 12:50:53 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/doc/miredo-server.conf.5
   M /trunk/doc/miredo.conf.5

Document InterfaceMTU options

------------------------------------------------------------------------
r520 | remi | 2005-05-04 12:42:49 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   A /trunk/doc
   A /trunk/doc/miredo-server.8 (from /trunk/miredo-server.8:519)
   A /trunk/doc/miredo-server.conf.5 (from /trunk/miredo-server.conf.5:519)
   A /trunk/doc/miredo.8 (from /trunk/miredo.8:519)
   A /trunk/doc/miredo.conf.5 (from /trunk/miredo.conf.5:519)
   D /trunk/miredo-server.8
   D /trunk/miredo-server.conf.5
   D /trunk/miredo.8
   D /trunk/miredo.conf.5

Moved man page to a new directory

------------------------------------------------------------------------
r519 | remi | 2005-05-04 12:40:06 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Oops, forgot to remove include/Makefile from config.status

------------------------------------------------------------------------
r518 | remi | 2005-05-04 12:39:25 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/miredo.8

Notes about server_name command line parameter

------------------------------------------------------------------------
r517 | remi | 2005-05-04 12:38:11 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Include autopackage stuff in source tarball

------------------------------------------------------------------------
r516 | remi | 2005-05-04 12:36:42 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   D /trunk/include/Makefile.am

Exclude include/ from build

------------------------------------------------------------------------
r515 | remi | 2005-05-04 12:33:33 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/include/Makefile.am
   M /trunk/libteredo/queue.cpp
   M /trunk/libteredo/queue.h
   M /trunk/libteredo/security.cpp
   M /trunk/libteredo/security.h
   M /trunk/misc/Makefile.am

All $Id$ fixes

------------------------------------------------------------------------
r514 | remi | 2005-05-04 12:28:20 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Fix $Id$

------------------------------------------------------------------------
r513 | remi | 2005-05-04 12:27:10 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/relay.cpp

Compile ParseRelayType in miredo, not in miredo-server

------------------------------------------------------------------------
r512 | remi | 2005-05-04 11:49:32 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/relay.cpp

Removed obsoleted disabled RelayType

------------------------------------------------------------------------
r511 | remi | 2005-05-04 11:47:15 +0300 (Wed, 04 May 2005) | 3 lines
Changed paths:
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

Accept not having a config file if a server name is specified
through the command line (will use default for every thing else)

------------------------------------------------------------------------
r510 | remi | 2005-05-04 11:39:16 +0300 (Wed, 04 May 2005) | 3 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/Makefile.am
   M /trunk/src/main.c
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

- Use a different pidfile for miredo and miredo-server
- Replace --enable-pidfile with --enable-pidfiledir

------------------------------------------------------------------------
r509 | remi | 2005-05-04 10:40:38 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/miredo-server.8
   A /trunk/miredo-server.conf.5 (from /trunk/miredo.conf.5:508)
   M /trunk/miredo.conf.5

Split miredo-conf.5 into miredo.conf.5 and miredo-server.conf.5

------------------------------------------------------------------------
r508 | remi | 2005-05-04 10:31:52 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   A /trunk/miredo-server.8 (from /trunk/miredo.8:507)
   M /trunk/miredo.8

Split miredo.8 into miredo.8 and miredo-server.8

------------------------------------------------------------------------
r507 | remi | 2005-05-04 10:21:13 +0300 (Wed, 04 May 2005) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Translations update

------------------------------------------------------------------------
r506 | remi | 2005-05-04 10:20:51 +0300 (Wed, 04 May 2005) | 3 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/main.c
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

- clean up DNS resolution of server name
- use different default configuration files for miredo and miredo-server

------------------------------------------------------------------------
r505 | remi | 2005-05-04 09:59:19 +0300 (Wed, 04 May 2005) | 3 lines
Changed paths:
   M /trunk/src/main.c

use argv[0] in usage() and quick_usage()
so that running miredo-server prints miredo-server rather than miredo

------------------------------------------------------------------------
r504 | remi | 2005-05-03 23:39:55 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Remove obsoleted options --disable-teredo-server and --disable-teredo-relay

------------------------------------------------------------------------
r503 | remi | 2005-05-03 23:33:13 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Fix invalid delete in case of error

------------------------------------------------------------------------
r502 | remi | 2005-05-03 23:30:53 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

Fix building with --disable-miredo-client

------------------------------------------------------------------------
r501 | remi | 2005-05-03 23:27:15 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Fixes files descriptions

------------------------------------------------------------------------
r500 | remi | 2005-05-03 23:25:42 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp
   D /trunk/src/relay.h

src/relay.h was no longer needed

------------------------------------------------------------------------
r499 | remi | 2005-05-03 23:17:20 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/misc/Makefile.am
   A /trunk/misc/miredo-server.conf-dist (from /trunk/misc/miredo.conf-dist:498)
   M /trunk/misc/miredo.conf-dist

Split configuration sample files

------------------------------------------------------------------------
r498 | remi | 2005-05-03 23:12:30 +0300 (Tue, 03 May 2005) | 3 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Move configuration parsing to non-common parts :
configuration for relay/client and server are now separated

------------------------------------------------------------------------
r497 | remi | 2005-05-03 22:23:45 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Remove signal handlers later

------------------------------------------------------------------------
r496 | remi | 2005-05-03 22:20:02 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Some fixes

------------------------------------------------------------------------
r495 | remi | 2005-05-03 21:55:47 +0300 (Tue, 03 May 2005) | 4 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libtun6/Makefile.am
   M /trunk/src
   M /trunk/src/Makefile.am
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   A /trunk/src/server.cpp (from /trunk/src/miredo.cpp:494)

Split Teredo server and Teredo relay/client in separate binaries

Still a lot of cleanup to be done

------------------------------------------------------------------------
r494 | remi | 2005-05-03 19:44:44 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/Makefile.am
   M /trunk/src/Makefile.am
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

Don't include libtun6 if we only build a Teredo server

------------------------------------------------------------------------
r493 | remi | 2005-05-03 19:38:38 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Fix previous broken commit

------------------------------------------------------------------------
r492 | remi | 2005-05-03 19:25:16 +0300 (Tue, 03 May 2005) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/server.cpp
   D /trunk/src/server.cpp
   D /trunk/src/server.h

- Remove MiredoServer class's files
- Clean up

------------------------------------------------------------------------
r491 | remi | 2005-05-03 19:18:36 +0300 (Tue, 03 May 2005) | 5 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/src/Makefile.am
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h

Use raw IPv6 socket instead of tunnel to relay pings through Teredo server

That will allow the server to work properly even when IPv6 forwarding is
not enabled.

------------------------------------------------------------------------
r490 | remi | 2005-05-03 13:07:36 +0300 (Tue, 03 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/misc/miredo.conf-dist
   M /trunk/src/miredo.cpp

(Dangerous) option to change Teredo MTU in relay and server

------------------------------------------------------------------------
r489 | remi | 2005-05-02 21:20:26 +0300 (Mon, 02 May 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

Another public Teredo server added

------------------------------------------------------------------------
r488 | remi | 2005-05-02 21:19:33 +0300 (Mon, 02 May 2005) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp

Make valgrind happier

------------------------------------------------------------------------
r487 | remi | 2005-05-02 20:42:42 +0300 (Mon, 02 May 2005) | 6 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Accept ICMPv6 Echo Request encapsulated in ICMPv6 Unreachable
as an alternative to a ICMPv6 Echo Reply for Direct IPv6 connectivity

That allows spoof-safe connectivity with hosts that reject pings with
ICMPv6 Unreachable messages instead of replying.

------------------------------------------------------------------------
r486 | remi | 2005-05-02 20:13:23 +0300 (Mon, 02 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Same as previous commit - the code is indeed duplicated

------------------------------------------------------------------------
r485 | remi | 2005-05-02 20:10:00 +0300 (Mon, 02 May 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Limit sending of echo request for Direct IPv6 connectivity test
to 3 every 30 seconds

------------------------------------------------------------------------
r484 | remi | 2005-05-02 18:19:43 +0300 (Mon, 02 May 2005) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/misc/miredo.conf-dist

- ng_teredo's server is no more
- adds Consulintel's server

------------------------------------------------------------------------
r476 | remi | 2005-05-02 10:50:32 +0300 (Mon, 02 May 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Skip release number 0.4.3 and use 0.4.4

------------------------------------------------------------------------
r475 | remi | 2005-05-02 10:48:34 +0300 (Mon, 02 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO

One more TODO done

------------------------------------------------------------------------
r474 | remi | 2005-05-02 10:31:44 +0300 (Mon, 02 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Fix completely broken parsing of Router Advertisement option

------------------------------------------------------------------------
r473 | remi | 2005-05-02 10:17:50 +0300 (Mon, 02 May 2005) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h

Update NotifyUp callback to use mtu value

------------------------------------------------------------------------
r472 | remi | 2005-05-02 10:10:24 +0300 (Mon, 02 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.h

Fix building with --disable-teredo-client

------------------------------------------------------------------------
r471 | remi | 2005-05-02 10:06:06 +0300 (Mon, 02 May 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Parse MTU option in router advertisement
(and probably some breakage with --disable-teredo-client)

------------------------------------------------------------------------
r470 | remi | 2005-05-01 23:25:50 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h

Actually implement ServerAddress2

------------------------------------------------------------------------
r469 | remi | 2005-05-01 22:53:14 +0300 (Sun, 01 May 2005) | 5 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist
   M /trunk/src/miredo.cpp

New options ServerAddress2, resp. ServerBindAddress2 to specify the server
secondary address in client, resp. server
It should already work for server, it is not yet implemented in libteredo's
Teredo client

------------------------------------------------------------------------
r468 | remi | 2005-05-01 21:47:45 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO

More comprehensive TODO list

------------------------------------------------------------------------
r467 | remi | 2005-05-01 21:00:26 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Use DESTDIR when copying miredo.conf-dist to miredo.conf

------------------------------------------------------------------------
r466 | remi | 2005-05-01 20:59:04 +0300 (Sun, 01 May 2005) | 3 lines
Changed paths:
   M /trunk/src/Makefile.am

Add quotes as appropriate
(would probably previously fail if there was a space in DESTDIR)

------------------------------------------------------------------------
r465 | remi | 2005-05-01 20:52:46 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/miredo.8

Typos fixed

------------------------------------------------------------------------
r464 | remi | 2005-05-01 19:48:30 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h

Clean up teredo_send_ra

------------------------------------------------------------------------
r463 | remi | 2005-05-01 19:25:07 +0300 (Sun, 01 May 2005) | 3 lines
Changed paths:
   M /trunk/README

- Update to match new miredo.conf installation
- More spacing

------------------------------------------------------------------------
r462 | remi | 2005-05-01 19:05:48 +0300 (Sun, 01 May 2005) | 4 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/misc/Makefile.am

- Put message about miredo.conf at the very end of "make install"
- Automatically copy miredo.conf-dist to miredo.conf if miredo.conf
  doesn't already exists

------------------------------------------------------------------------
r461 | remi | 2005-05-01 16:23:36 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/src/miredo.cpp

Allow changing of server advertised MTU

------------------------------------------------------------------------
r460 | remi | 2005-05-01 15:56:11 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/libtun6/ipv6-tunnel.h
   M /trunk/src/privproc.cpp
   M /trunk/src/privproc.h
   M /trunk/src/relay.cpp

Copyright notice date updates

------------------------------------------------------------------------
r459 | remi | 2005-05-01 15:43:50 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/privproc.cpp

Clean up setting of MTU in client mode

------------------------------------------------------------------------
r458 | remi | 2005-05-01 15:43:08 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Log MTU change failure through syslog

------------------------------------------------------------------------
r457 | remi | 2005-05-01 15:29:41 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp
   M /trunk/src/privproc.h
   M /trunk/src/relay.cpp

Support for setting MTU from privileged process

------------------------------------------------------------------------
r456 | remi | 2005-05-01 14:54:02 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Send MTU option (testing)

------------------------------------------------------------------------
r455 | remi | 2005-05-01 14:46:25 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/TODO

Update TODO list

------------------------------------------------------------------------
r454 | remi | 2005-05-01 14:46:02 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/autopackage/default.apspec.in

One comment about libcap

------------------------------------------------------------------------
r453 | remi | 2005-05-01 14:45:41 +0300 (Sun, 01 May 2005) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.h

Add missing #include

------------------------------------------------------------------------
r452 | remi | 2005-04-30 19:26:35 +0300 (Sat, 30 Apr 2005) | 4 lines
Changed paths:
   M /trunk/Makefile.am
   D /trunk/autopackage/Makefile.am
   M /trunk/configure.ac

Remove autopackage directory from source tarball :
it's not supposed/meant to be used by external packagers/users
(and it's still available through SVN anyway)

------------------------------------------------------------------------
r451 | remi | 2005-04-30 19:19:03 +0300 (Sat, 30 Apr 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

autopackage/default.apsec needn't be generated automatically by configure

------------------------------------------------------------------------
r450 | remi | 2005-04-30 15:16:18 +0300 (Sat, 30 Apr 2005) | 3 lines
Changed paths:
   M /trunk/autopackage/default.apspec.in

apbuild spec that works (if installed as root only)
There's still several shortcomings in autopackage to be addressed first

------------------------------------------------------------------------
r449 | remi | 2005-04-30 13:06:20 +0300 (Sat, 30 Apr 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Clean up

------------------------------------------------------------------------
r448 | remi | 2005-04-30 12:59:07 +0300 (Sat, 30 Apr 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo
   M /trunk/misc/miredo.conf-dist
   M /trunk/misc/miredo.sh

Add/fix $Id$

------------------------------------------------------------------------
r447 | remi | 2005-04-30 12:44:52 +0300 (Sat, 30 Apr 2005) | 2 lines
Changed paths:
   M /trunk/m4/binreloc.m4
   M /trunk/src/Makefile.am
   M /trunk/src/main.c
   M /trunk/src/prefix.h

Don't let BinReloc handle SYSCONFDIR (it is inconsistent with autopackage)

------------------------------------------------------------------------
r446 | remi | 2005-04-30 12:43:55 +0300 (Sat, 30 Apr 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

Fix defaults value documentation for InterfaceName

------------------------------------------------------------------------
r445 | remi | 2005-04-30 00:06:43 +0300 (Sat, 30 Apr 2005) | 2 lines
Changed paths:
   M /trunk
   M /trunk/Makefile.am
   A /trunk/autopackage
   A /trunk/autopackage/Makefile.am
   A /trunk/autopackage/default.apspec.in
   M /trunk/configure.ac

Initial autopackage package build support

------------------------------------------------------------------------
r444 | remi | 2005-04-29 20:46:26 +0300 (Fri, 29 Apr 2005) | 2 lines
Changed paths:
   M /trunk/m4/Makefile.am
   M /trunk/src/Makefile.am

Fix copyright notices

------------------------------------------------------------------------
r443 | remi | 2005-04-29 20:42:17 +0300 (Fri, 29 Apr 2005) | 2 lines
Changed paths:
   M /trunk/m4/Makefile.am

- add m4/binreloc.m4 to EXTRA_DIST

------------------------------------------------------------------------
r442 | remi | 2005-04-29 20:28:00 +0300 (Fri, 29 Apr 2005) | 4 lines
Changed paths:
   M /trunk/configure.ac
   A /trunk/m4/binreloc.m4
   M /trunk/src/Makefile.am
   M /trunk/src/main.c
   A /trunk/src/prefix.c
   A /trunk/src/prefix.h

Use of BinReloc from AutoPackage project
(with modifications to binreloc.m4 not to check for pthread,
since we don't need it)

------------------------------------------------------------------------
r441 | remi | 2005-04-29 20:02:34 +0300 (Fri, 29 Apr 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Cleanup creation/deletion of pidfile/chroot directory

------------------------------------------------------------------------
r440 | remi | 2005-04-29 19:12:43 +0300 (Fri, 29 Apr 2005) | 3 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/Makefile.am
   M /trunk/src/main.c

Get rid of built source src/host.h
/ Use a much simpler alternative from configure.ac

------------------------------------------------------------------------
r439 | remi | 2005-04-29 19:01:25 +0300 (Fri, 29 Apr 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Fix a typo

------------------------------------------------------------------------
r438 | remi | 2005-04-29 18:54:54 +0300 (Fri, 29 Apr 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am
   M /trunk/src/main.c

Bring back host and build architecture in version infos

------------------------------------------------------------------------
r437 | remi | 2005-04-29 16:56:41 +0300 (Fri, 29 Apr 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Bump version number to 0.4.3

------------------------------------------------------------------------
r435 | remi | 2005-04-29 12:51:06 +0300 (Fri, 29 Apr 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog

ChangeLog update for release 0.4.2

------------------------------------------------------------------------
r434 | remi | 2005-04-29 12:49:06 +0300 (Fri, 29 Apr 2005) | 3 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

- News for release 0.4.2
- Resync pot files

------------------------------------------------------------------------
r433 | remi | 2005-04-29 12:48:40 +0300 (Fri, 29 Apr 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

More strict release checks

------------------------------------------------------------------------
r432 | remi | 2005-04-29 12:28:16 +0300 (Fri, 29 Apr 2005) | 4 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Remove hard-coded access-list that prevented reply bubbles from restricted
clients from being processed by the relay/client, effectively denying
connectivity toward restricted clients.

------------------------------------------------------------------------
r431 | remi | 2005-04-28 21:42:02 +0300 (Thu, 28 Apr 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/main.c

Translations updates

------------------------------------------------------------------------
r430 | remi | 2005-04-28 21:37:08 +0300 (Thu, 28 Apr 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Bump version number

------------------------------------------------------------------------
r429 | remi | 2005-04-28 21:35:49 +0300 (Thu, 28 Apr 2005) | 2 lines
Changed paths:
   M /trunk/miredo.8
   M /trunk/miredo.conf.5

command line syntax changed => update doc

------------------------------------------------------------------------
r428 | remi | 2005-04-28 21:32:32 +0300 (Thu, 28 Apr 2005) | 3 lines
Changed paths:
   M /trunk/TODO
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h

Support for overriding the configuration file's ServerAddress from the
command line

------------------------------------------------------------------------
r427 | remi | 2005-04-28 18:57:12 +0300 (Thu, 28 Apr 2005) | 2 lines
Changed paths:
   M /trunk/TODO

More ToDos

------------------------------------------------------------------------
r426 | remi | 2005-04-28 17:55:51 +0300 (Thu, 28 Apr 2005) | 5 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

- Bring back connectivity loss detection with a much better algorithm
(no longer fail on the very first unreplied server solicitation);
could still be improved a bit
- some clean up

------------------------------------------------------------------------
r425 | remi | 2005-04-28 16:55:47 +0300 (Thu, 28 Apr 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fix possible signedness problem with TeredoRelay::peer::IsExpired

------------------------------------------------------------------------
r424 | remi | 2005-04-28 16:43:08 +0300 (Thu, 28 Apr 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Don't call TeredoRelay::Process when client support is not compiled-in

------------------------------------------------------------------------
r423 | remi | 2005-04-28 16:40:51 +0300 (Thu, 28 Apr 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Fix server address check

------------------------------------------------------------------------
r422 | remi | 2005-04-28 16:40:35 +0300 (Thu, 28 Apr 2005) | 2 lines
Changed paths:
   M /trunk/TODO

Remove done TODO from list

------------------------------------------------------------------------
r421 | remi | 2005-04-28 16:19:38 +0300 (Thu, 28 Apr 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Completely ignore server packets that fails authentication check

------------------------------------------------------------------------
r420 | remi | 2005-04-28 15:36:45 +0300 (Thu, 28 Apr 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Clean up / avoid some code duplication

------------------------------------------------------------------------
r419 | remi | 2005-04-28 15:30:07 +0300 (Thu, 28 Apr 2005) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Further clean up...
made TeredoRelay::peer a class

------------------------------------------------------------------------
r418 | remi | 2005-04-28 14:47:33 +0300 (Thu, 28 Apr 2005) | 4 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

- use struct timeval instead of time_t to determine peer expiry
- break one bubble per 2 seconds limit
- clean up use of last_rx and last_xmit

------------------------------------------------------------------------
r417 | remi | 2005-04-25 19:33:25 +0300 (Mon, 25 Apr 2005) | 2 lines
Changed paths:
   M /trunk/m4

Update for newer autotools

------------------------------------------------------------------------
r413 | remi | 2005-03-20 17:37:25 +0200 (Sun, 20 Mar 2005) | 2 lines
Changed paths:
   M /trunk
   A /trunk/COPYING

Include license in SVN trunk

------------------------------------------------------------------------
r411 | remi | 2005-03-17 21:16:20 +0200 (Thu, 17 Mar 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog

ChangeLog 0.4.1 update

------------------------------------------------------------------------
r410 | remi | 2005-03-17 21:14:31 +0200 (Thu, 17 Mar 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update French translation

------------------------------------------------------------------------
r409 | remi | 2005-03-17 21:11:53 +0200 (Thu, 17 Mar 2005) | 2 lines
Changed paths:
   M /trunk/NEWS

Updated NEWS for release 0.4.1

------------------------------------------------------------------------
r408 | remi | 2005-03-17 21:10:21 +0200 (Thu, 17 Mar 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

Better decsription of default value for ServerAddress

------------------------------------------------------------------------
r407 | remi | 2005-03-17 21:09:54 +0200 (Thu, 17 Mar 2005) | 5 lines
Changed paths:
   M /trunk/src/miredo.cpp

- Fail cleanly when no server specified in client mode,
- Do not display unhandled conf directives in case of conf syntax error
- Use LOG_PERROR option so that error are displayed on screen when run in
  foreground

------------------------------------------------------------------------
r406 | remi | 2005-03-17 21:08:16 +0200 (Thu, 17 Mar 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Allow not to display superfluous conf directives

------------------------------------------------------------------------
r405 | remi | 2005-03-16 14:55:38 +0200 (Wed, 16 Mar 2005) | 3 lines
Changed paths:
   M /trunk/src/miredo.cpp

Do not check relay status when in disabled mode.
Miredo wouldn't otherwise run in disabled mode (ie server-only)

------------------------------------------------------------------------
r404 | remi | 2005-03-13 15:35:25 +0200 (Sun, 13 Mar 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

More comments in sample config

------------------------------------------------------------------------
r403 | remi | 2005-03-12 14:48:25 +0200 (Sat, 12 Mar 2005) | 2 lines
Changed paths:
   M /trunk
   M /trunk/libteredo

A few more

------------------------------------------------------------------------
r402 | remi | 2005-03-12 14:45:19 +0200 (Sat, 12 Mar 2005) | 2 lines
Changed paths:
   M /trunk
   M /trunk/admin
   M /trunk/include
   M /trunk/m4
   M /trunk/misc
   M /trunk/po

Updates svn:ignore

------------------------------------------------------------------------
r401 | remi | 2005-02-15 16:43:55 +0200 (Tue, 15 Feb 2005) | 2 lines
Changed paths:
   M /trunk/TODO

Updated todo list

------------------------------------------------------------------------
r400 | remi | 2005-02-12 11:23:59 +0200 (Sat, 12 Feb 2005) | 6 lines
Changed paths:
   M /trunk/src/privproc.cpp

- Do not reset the link-local address unless it really changes :
  should work around kernel bug http://bugme.osdl.org/show_bug.cgi?id=3973
- Do not bring the tunnel up & down when the connectivity is lost :
  simply remove the addresses (could be annoying for programs that watch
  interface state or dump traffic)

------------------------------------------------------------------------
r399 | remi | 2005-02-09 00:21:43 +0200 (Wed, 09 Feb 2005) | 2 lines
Changed paths:
   M /trunk/miredo.8
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/main.c

Fix inconsistencies about the command line syntax

------------------------------------------------------------------------
r398 | remi | 2005-01-24 00:17:28 +0200 (Mon, 24 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Cleanup : struct miredo_conf

------------------------------------------------------------------------
r397 | remi | 2005-01-23 22:05:50 +0200 (Sun, 23 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Removed useless global variable

------------------------------------------------------------------------
r396 | remi | 2005-01-22 23:22:52 +0200 (Sat, 22 Jan 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Removed check for null server addresses that is now part of v4global.c

------------------------------------------------------------------------
r395 | remi | 2005-01-22 23:02:43 +0200 (Sat, 22 Jan 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

Some more comments

------------------------------------------------------------------------
r394 | remi | 2005-01-22 23:02:20 +0200 (Sat, 22 Jan 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/v4global.c

Updates global IPv4 access list, which is given explicitly in draft 04

------------------------------------------------------------------------
r393 | remi | 2005-01-22 20:24:13 +0200 (Sat, 22 Jan 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

Fixes comment about RelayType. Bug reported by Shai

------------------------------------------------------------------------
r392 | remi | 2005-01-15 00:16:15 +0200 (Sat, 15 Jan 2005) | 3 lines
Changed paths:
   M /trunk/src/miredo.cpp

Chroot after networks settings/privsep initialisation
(grsecurity wants this)

------------------------------------------------------------------------
r391 | remi | 2005-01-15 00:15:25 +0200 (Sat, 15 Jan 2005) | 2 lines
Changed paths:
   M /trunk/configure.ac

Increment version number

------------------------------------------------------------------------
r388 | remi | 2005-01-08 16:57:18 +0200 (Sat, 08 Jan 2005) | 2 lines
Changed paths:
   M /trunk/miredo.conf.5

Fixed manual page title

------------------------------------------------------------------------
r387 | remi | 2005-01-08 02:26:19 +0200 (Sat, 08 Jan 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/README

Prepare 0.4.0 release

------------------------------------------------------------------------
r386 | remi | 2005-01-08 02:13:55 +0200 (Sat, 08 Jan 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

PO files updates

------------------------------------------------------------------------
r385 | remi | 2005-01-07 18:35:48 +0200 (Fri, 07 Jan 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/miredo.cpp

Fixes for some mem leaks, incorrect syslog messages and segfault on reload in configuration file handling.

------------------------------------------------------------------------
r384 | remi | 2005-01-07 17:04:28 +0200 (Fri, 07 Jan 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

BSD compile fixes

------------------------------------------------------------------------
r383 | remi | 2005-01-07 14:45:49 +0200 (Fri, 07 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp

BSD compile fix

------------------------------------------------------------------------
r382 | remi | 2005-01-07 14:39:07 +0200 (Fri, 07 Jan 2005) | 5 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/configure.ac
   M /trunk/miredo.conf.5
   M /trunk/misc/miredo.conf-dist
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/miredo.cpp

- SyslogFacility directive implementation
- bump version number to 0.4.0 since the program "interface" is
  completely incompatible with that of the previous versions
  (there will be no 0.3.3)

------------------------------------------------------------------------
r381 | remi | 2005-01-06 12:16:43 +0200 (Thu, 06 Jan 2005) | 4 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/NEWS
   M /trunk/configure.ac
   M /trunk/miredo.8
   M /trunk/misc/Makefile.am
   M /trunk/src/Makefile.am
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

- Fixes path to the chroot directory and the pidfile.
- Disable fairly useless option to change pidfile at run-time.
- Fixes bug when -t option was used while it does no longer exists.

------------------------------------------------------------------------
r380 | remi | 2005-01-06 11:06:52 +0200 (Thu, 06 Jan 2005) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README

Changed docs for new chroot system

------------------------------------------------------------------------
r379 | remi | 2005-01-06 00:10:55 +0200 (Thu, 06 Jan 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

PO updates

------------------------------------------------------------------------
r378 | remi | 2005-01-06 00:03:24 +0200 (Thu, 06 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

Check chroot directory before running

------------------------------------------------------------------------
r377 | remi | 2005-01-05 23:12:34 +0200 (Wed, 05 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/privproc.cpp
   M /trunk/src/privproc.h

Simply privsep (similarly as previous commit)

------------------------------------------------------------------------
r376 | remi | 2005-01-05 23:04:44 +0200 (Wed, 05 Jan 2005) | 3 lines
Changed paths:
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

Doing initialization as root is much simpler, and might actually be
safer (e.g; can't receive signal from unprivileged user's processes)

------------------------------------------------------------------------
r375 | remi | 2005-01-05 20:00:19 +0200 (Wed, 05 Jan 2005) | 3 lines
Changed paths:
   M /trunk/src/main.c

- Check if miredo.conf is readable before daemon(),
- Some cleanup

------------------------------------------------------------------------
r374 | remi | 2005-01-05 19:19:38 +0200 (Wed, 05 Jan 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/src/miredo.cpp

Minor signal handling security improvement

------------------------------------------------------------------------
r373 | remi | 2005-01-05 17:05:00 +0200 (Wed, 05 Jan 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo
   M /trunk/misc/miredo.sh

Updates for sample init scripts

------------------------------------------------------------------------
r372 | remi | 2005-01-05 00:27:07 +0200 (Wed, 05 Jan 2005) | 3 lines
Changed paths:
   M /trunk/miredo.8
   M /trunk/src/main.c

Remove very hard to setup "early" chroot feature, obsoleted by late
chroot feature

------------------------------------------------------------------------
r371 | remi | 2005-01-04 23:52:37 +0200 (Tue, 04 Jan 2005) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac
   M /trunk/libteredo/security.cpp
   M /trunk/libteredo/security.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

Easy late chroot (path configurable with --enable-chroot configure option)

------------------------------------------------------------------------
r370 | remi | 2005-01-04 16:04:39 +0200 (Tue, 04 Jan 2005) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Change syslog message severity

------------------------------------------------------------------------
r369 | remi | 2005-01-04 14:35:38 +0200 (Tue, 04 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Fixes infinite loop when processing SIGHUP

------------------------------------------------------------------------
r368 | remi | 2005-01-04 01:54:24 +0200 (Tue, 04 Jan 2005) | 3 lines
Changed paths:
   M /trunk/Makefile.am

Fixes bug where miredo.conf.5 was installed as "man 8 miredo.conf"
instead of "man 5 miredo.conf"

------------------------------------------------------------------------
r367 | remi | 2005-01-04 01:52:33 +0200 (Tue, 04 Jan 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist
   M /trunk/src/miredo.cpp
   M /trunk/src/privproc.cpp
   M /trunk/src/privproc.h

DefaultRoute boolean directive implementation

------------------------------------------------------------------------
r366 | remi | 2005-01-04 01:42:16 +0200 (Tue, 04 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h

Support for parsing boolean directives

------------------------------------------------------------------------
r365 | remi | 2005-01-02 22:49:54 +0200 (Sun, 02 Jan 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf-dist

Comment about client mode

------------------------------------------------------------------------
r364 | remi | 2005-01-02 22:46:49 +0200 (Sun, 02 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

Fix bogus duplicate option error

------------------------------------------------------------------------
r363 | remi | 2005-01-02 22:20:24 +0200 (Sun, 02 Jan 2005) | 2 lines
Changed paths:
   M /trunk/README

Note about configuration file and chroot

------------------------------------------------------------------------
r362 | remi | 2005-01-02 22:15:57 +0200 (Sun, 02 Jan 2005) | 2 lines
Changed paths:
   M /trunk/NEWS

Updated NEWS

------------------------------------------------------------------------
r361 | remi | 2005-01-02 22:10:37 +0200 (Sun, 02 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Fix memory leak

------------------------------------------------------------------------
r360 | remi | 2005-01-02 22:02:19 +0200 (Sun, 02 Jan 2005) | 2 lines
Changed paths:
   M /trunk/README

Updated README

------------------------------------------------------------------------
r359 | remi | 2005-01-02 21:43:57 +0200 (Sun, 02 Jan 2005) | 3 lines
Changed paths:
   M /trunk/misc/Makefile.am
   D /trunk/misc/miredo.conf
   A /trunk/misc/miredo.conf-dist (from /trunk/misc/miredo.conf:358)

Rename the sample conf file so that it does not override local older
customized configuration file

------------------------------------------------------------------------
r358 | remi | 2005-01-02 21:42:54 +0200 (Sun, 02 Jan 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf

Update sample conf file

------------------------------------------------------------------------
r357 | remi | 2005-01-02 21:39:17 +0200 (Sun, 02 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/conf.cpp
   M /trunk/src/conf.h
   M /trunk/src/miredo.cpp

Implement RelayType as documented in miredo.conf.5

------------------------------------------------------------------------
r356 | remi | 2005-01-02 15:48:20 +0200 (Sun, 02 Jan 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

French translation update

------------------------------------------------------------------------
r355 | remi | 2005-01-02 15:45:31 +0200 (Sun, 02 Jan 2005) | 3 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/miredo.conf.5

miredo.conf reference
(does not match current implementation)

------------------------------------------------------------------------
r354 | remi | 2005-01-01 23:10:54 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/miredo.conf.5

Partial miredo.conf manpage (to be completed)

------------------------------------------------------------------------
r353 | remi | 2005-01-01 23:04:43 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/miredo.8
   A /trunk/miredo.conf.5 (from /trunk/miredo.8:336)

Updates miredo.8 man page with new syntax

------------------------------------------------------------------------
r352 | remi | 2005-01-01 22:27:50 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/main.c

Cleanup

------------------------------------------------------------------------
r351 | remi | 2005-01-01 14:51:52 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/TODO

Updates TODO list

------------------------------------------------------------------------
r350 | remi | 2005-01-01 14:50:26 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/misc/miredo.conf
   M /trunk/src/miredo.cpp

Gets interface & Teredo prefix from config file

------------------------------------------------------------------------
r349 | remi | 2005-01-01 13:08:35 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am
   M /trunk/src/main.c

New (much simpler) command line syntax for use with conf file

------------------------------------------------------------------------
r348 | remi | 2005-01-01 02:27:14 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/conf.cpp

PO updates

------------------------------------------------------------------------
r347 | remi | 2005-01-01 02:21:55 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Fixed syslog messages

------------------------------------------------------------------------
r346 | remi | 2005-01-01 02:18:16 +0200 (Sat, 01 Jan 2005) | 3 lines
Changed paths:
   M /trunk/src/miredo.cpp

- fix BindPort byte order
- clean up main process termination & reload

------------------------------------------------------------------------
r345 | remi | 2005-01-01 01:50:42 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Fix parameters ordering in call to miredo_run()

------------------------------------------------------------------------
r344 | remi | 2005-01-01 01:45:38 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Do not create a relay when running server only

------------------------------------------------------------------------
r343 | remi | 2005-01-01 01:44:14 +0200 (Sat, 01 Jan 2005) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Do not export a route to Teredo when running a server without relay

------------------------------------------------------------------------
r342 | remi | 2005-01-01 01:41:43 +0200 (Sat, 01 Jan 2005) | 3 lines
Changed paths:
   M /trunk/src/conf.cpp

- Removed debug messages
- Ignore "empty" comment lines

------------------------------------------------------------------------
r341 | remi | 2005-01-01 01:39:12 +0200 (Sat, 01 Jan 2005) | 3 lines
Changed paths:
   M /trunk/misc/miredo.conf
   M /trunk/po/POTFILES.in
   M /trunk/src/Makefile.am
   A /trunk/src/conf.cpp
   A /trunk/src/conf.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h

Configuration file parsing
(many regressions to be fixed later -- hardly useable revision)

------------------------------------------------------------------------
r340 | remi | 2004-12-31 15:28:42 +0200 (Fri, 31 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Typos in comments

------------------------------------------------------------------------
r339 | remi | 2004-12-31 15:10:45 +0200 (Fri, 31 Dec 2004) | 2 lines
Changed paths:
   M /trunk/README

Do no longer requires /var/run/miredo directory

------------------------------------------------------------------------
r338 | remi | 2004-12-31 15:09:52 +0200 (Fri, 31 Dec 2004) | 3 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/main.c

- Create pid file in /var/run instead of /var/run/miredo
- Get root to remove pid file before exit

------------------------------------------------------------------------
r337 | remi | 2004-12-31 15:05:00 +0200 (Fri, 31 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Create pid file as root

------------------------------------------------------------------------
r336 | remi | 2004-12-31 14:41:06 +0200 (Fri, 31 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Fixed comment

------------------------------------------------------------------------
r335 | remi | 2004-12-31 14:39:29 +0200 (Fri, 31 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Safe pid file creation

------------------------------------------------------------------------
r334 | remi | 2004-12-30 17:57:52 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

POTFILES update

------------------------------------------------------------------------
r333 | remi | 2004-12-30 17:55:03 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

FreeBSD compile fix

------------------------------------------------------------------------
r332 | remi | 2004-12-30 17:50:30 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay-udp.h
   M /trunk/libteredo/relay.h

#include headers cleanup

------------------------------------------------------------------------
r331 | remi | 2004-12-30 17:42:33 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/packets.cpp
   A /trunk/libteredo/relay-udp.cpp (from /trunk/libteredo/teredo-udp.cpp:330)
   A /trunk/libteredo/relay-udp.h (from /trunk/libteredo/teredo-udp.h:330)
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

Another code split

------------------------------------------------------------------------
r330 | remi | 2004-12-30 17:33:00 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/server-udp.cpp (from /trunk/libteredo/teredo-udp.cpp:329)
   A /trunk/libteredo/server-udp.h (from /trunk/libteredo/teredo-udp.h:329)
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

Code split

------------------------------------------------------------------------
r329 | remi | 2004-12-30 17:17:52 +0200 (Thu, 30 Dec 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

Cleanup to prepare separation of Teredo(Relay|Client|Server)UDP
out of teredo-udp.*

------------------------------------------------------------------------
r328 | remi | 2004-12-30 16:58:18 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

TeredoClientUDP / Multicast socket support

------------------------------------------------------------------------
r327 | remi | 2004-12-30 16:48:18 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.h

Add symbolic constants for Teredo Discovery multicast address

------------------------------------------------------------------------
r326 | remi | 2004-12-30 15:43:47 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

Common Receive...() code factorization

------------------------------------------------------------------------
r325 | remi | 2004-12-30 15:35:05 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h
   M /trunk/src/miredo.cpp

Processes packets from server's secondary IP address even if the primary IP sockets is permanently busy

------------------------------------------------------------------------
r324 | remi | 2004-12-30 15:22:45 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Cleanup server processing rules

------------------------------------------------------------------------
r323 | remi | 2004-12-30 14:37:35 +0200 (Thu, 30 Dec 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

- Better error handling in TeredoServerUDP::ListenIP
- Fixed thread-safety issue with use_secondary_ip in TeredoServer

------------------------------------------------------------------------
r322 | remi | 2004-12-30 14:08:38 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Thread-safety fixes

------------------------------------------------------------------------
r321 | remi | 2004-12-30 13:06:18 +0200 (Thu, 30 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/queue.h

Packet::unsafe_Trash made static

------------------------------------------------------------------------
r320 | remi | 2004-12-29 18:28:58 +0200 (Wed, 29 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.cpp

Set Multicast TTL to 1

------------------------------------------------------------------------
r319 | remi | 2004-12-29 12:41:10 +0200 (Wed, 29 Dec 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Minimalistic source IPv6 address checks on received packets
(drop link-local packets for security's sake)

------------------------------------------------------------------------
r318 | remi | 2004-12-29 11:12:26 +0200 (Wed, 29 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Handle error case properly

------------------------------------------------------------------------
r317 | remi | 2004-12-28 22:35:12 +0200 (Tue, 28 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Same as previous commit - for server stuff

------------------------------------------------------------------------
r316 | remi | 2004-12-28 22:19:24 +0200 (Tue, 28 Dec 2004) | 6 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

Got rid of the big full IPv6 packet memcpy()
on the UDP socket side.

(We had already gotten rid of the other memcpy in IPv6Tunnel with the help of
writev()/readv(). There is no longer any memcpy of a entire packet)

------------------------------------------------------------------------
r315 | remi | 2004-12-28 21:44:08 +0200 (Tue, 28 Dec 2004) | 2 lines
Changed paths:
   M /trunk/THANKS

Update

------------------------------------------------------------------------
r314 | remi | 2004-12-25 18:33:16 +0200 (Sat, 25 Dec 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update PO files

------------------------------------------------------------------------
r313 | remi | 2004-12-25 18:27:01 +0200 (Sat, 25 Dec 2004) | 2 lines
Changed paths:
   M /trunk/misc/miredo.sh

Fix Debian-style initscript

------------------------------------------------------------------------
r312 | remi | 2004-12-25 18:21:32 +0200 (Sat, 25 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h

Option for not compiling Teredo client support

------------------------------------------------------------------------
r311 | remi | 2004-12-25 18:04:18 +0200 (Sat, 25 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/src/Makefile.am
   M /trunk/src/miredo.cpp

Support for not compiling relay/client support

------------------------------------------------------------------------
r310 | remi | 2004-12-25 17:54:45 +0200 (Sat, 25 Dec 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac

Options (unhandled) to disable relay/client or only client

------------------------------------------------------------------------
r309 | remi | 2004-12-25 17:29:55 +0200 (Sat, 25 Dec 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac

- Fix and cleanup Autoconf/M4 quoting

------------------------------------------------------------------------
r308 | remi | 2004-12-25 16:09:29 +0200 (Sat, 25 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Removed unused variable

------------------------------------------------------------------------
r307 | remi | 2004-12-25 16:08:43 +0200 (Sat, 25 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Fix race condition in the select() call with signal handlers.

------------------------------------------------------------------------
r306 | remi | 2004-12-25 15:47:22 +0200 (Sat, 25 Dec 2004) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp

--disable-teredo-client is a TODO

------------------------------------------------------------------------
r305 | remi | 2004-12-25 15:27:35 +0200 (Sat, 25 Dec 2004) | 3 lines
Changed paths:
   M /trunk/src/privproc.cpp

Avoid warning from GCC
(GCC is wrong though)

------------------------------------------------------------------------
r304 | remi | 2004-12-25 15:19:10 +0200 (Sat, 25 Dec 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/Makefile.am
   M /trunk/src/Makefile.am
   M /trunk/src/miredo.cpp

--disable-teredo-server option to not compile Teredo server support

------------------------------------------------------------------------
r303 | remi | 2004-12-24 16:36:24 +0200 (Fri, 24 Dec 2004) | 2 lines
Changed paths:
   M /trunk/misc/Makefile.am
   A /trunk/misc/miredo.conf

Default Miredo config file (unused yet)

------------------------------------------------------------------------
r302 | remi | 2004-12-22 10:58:17 +0200 (Wed, 22 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

- Fixed typo in comment

------------------------------------------------------------------------
r301 | remi | 2004-12-22 10:58:08 +0200 (Wed, 22 Dec 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Remerge PO files

------------------------------------------------------------------------
r300 | remi | 2004-12-22 10:57:55 +0200 (Wed, 22 Dec 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac

- update version to future 0.3.3

------------------------------------------------------------------------
r298 | remi | 2004-12-17 18:11:24 +0200 (Fri, 17 Dec 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog

- ChangeLog for 0.3.2 release

------------------------------------------------------------------------
r297 | remi | 2004-12-17 18:09:53 +0200 (Fri, 17 Dec 2004) | 2 lines
Changed paths:
   M /trunk/NEWS

Fill NEWS for 0.3.2

------------------------------------------------------------------------
r296 | remi | 2004-12-17 18:01:50 +0200 (Fri, 17 Dec 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac

Check for library providing POSIX threads

------------------------------------------------------------------------
r295 | remi | 2004-12-13 01:29:38 +0200 (Mon, 13 Dec 2004) | 2 lines
Changed paths:
   M /trunk/NEWS

First news for 0.3.2

------------------------------------------------------------------------
r294 | remi | 2004-12-12 18:59:00 +0200 (Sun, 12 Dec 2004) | 3 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/main.c

Configure-time option to change the default pidfile path
or disable the pidfile by default

------------------------------------------------------------------------
r293 | remi | 2004-12-06 15:01:30 +0200 (Mon, 06 Dec 2004) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/miredo.8

Update to Teredo Internet draft 03

------------------------------------------------------------------------
r292 | remi | 2004-12-05 11:38:37 +0200 (Sun, 05 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Fix libintl linkage on non-GNU platforms

------------------------------------------------------------------------
r291 | remi | 2004-12-05 11:32:06 +0200 (Sun, 05 Dec 2004) | 3 lines
Changed paths:
   M /trunk/src/Makefile.am

Link with -lpthread explictly
=> fix FreeBSD linker error

------------------------------------------------------------------------
r290 | remi | 2004-12-04 11:51:34 +0200 (Sat, 04 Dec 2004) | 4 lines
Changed paths:
   M /trunk/libteredo/relay.h

Really fix access control for nested classes
(I used a feature of C++ which is not even standard yet)
Will work with G++2.95

------------------------------------------------------------------------
r289 | remi | 2004-12-03 23:54:44 +0200 (Fri, 03 Dec 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Updated PO files

------------------------------------------------------------------------
r288 | remi | 2004-12-03 23:51:41 +0200 (Fri, 03 Dec 2004) | 2 lines
Changed paths:
   M /trunk/README

Update security informations with the new nobody UID stuff

------------------------------------------------------------------------
r287 | remi | 2004-12-03 23:44:51 +0200 (Fri, 03 Dec 2004) | 3 lines
Changed paths:
   M /trunk/src/main.c

Setuid to nobody by default instead of keeping root.
Portable, easy for user, far more secure and more simple for me.

------------------------------------------------------------------------
r286 | remi | 2004-12-03 18:13:19 +0200 (Fri, 03 Dec 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.h

Fixed TeredoRelay::SendIPv6Packet access qualifier from private to protected
=> fixes a FreeBSD compile error

------------------------------------------------------------------------
r285 | remi | 2004-12-03 16:47:31 +0200 (Fri, 03 Dec 2004) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/configure.ac

Bump version number

------------------------------------------------------------------------
r284 | remi | 2004-12-02 22:43:15 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libtun6/ipv6-tunnel.cpp

Cleanup for security scanners

------------------------------------------------------------------------
r282 | remi | 2004-12-02 22:11:48 +0200 (Thu, 02 Dec 2004) | 1 line
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp


------------------------------------------------------------------------
r281 | remi | 2004-12-02 17:08:40 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Resync with source

------------------------------------------------------------------------
r280 | remi | 2004-12-02 17:07:35 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.ac
   A /trunk/misc/Makefile.am

Added misc directory to tarball

------------------------------------------------------------------------
r279 | remi | 2004-12-02 17:00:26 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Updated for release 0.3.1

------------------------------------------------------------------------
r278 | remi | 2004-12-02 16:55:56 +0200 (Thu, 02 Dec 2004) | 3 lines
Changed paths:
   M /trunk/README

- Teredo is built-in XP SP2's IPv6 stack,
- Linux 2.4 does not work fine with IPv6

------------------------------------------------------------------------
r277 | remi | 2004-12-02 16:40:13 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/README

Instructions on /var/run/miredo

------------------------------------------------------------------------
r276 | remi | 2004-12-02 16:34:10 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   A /trunk/misc
   A /trunk/misc/miredo
   A /trunk/misc/miredo.sh

Sample init scripts

------------------------------------------------------------------------
r275 | remi | 2004-12-02 16:28:35 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

cast uid_t to int rather than unsigned

------------------------------------------------------------------------
r274 | remi | 2004-12-02 16:13:33 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Added TODO : ability to change pid file location

------------------------------------------------------------------------
r273 | remi | 2004-12-02 16:13:14 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/NEWS

- PID file doc

------------------------------------------------------------------------
r272 | remi | 2004-12-02 16:09:26 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/TODO

Updated TODO

------------------------------------------------------------------------
r271 | remi | 2004-12-02 16:08:56 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/miredo.8

Remove a documented bug that has long since been fixed (not chrooting)

------------------------------------------------------------------------
r270 | remi | 2004-12-02 16:07:07 +0200 (Thu, 02 Dec 2004) | 3 lines
Changed paths:
   M /trunk/miredo.8

- document pid file
- emphasis fixes

------------------------------------------------------------------------
r269 | remi | 2004-12-02 15:59:05 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Support for creating a PID file

------------------------------------------------------------------------
r268 | remi | 2004-12-02 15:58:55 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/miredo.8

Signals documentation

------------------------------------------------------------------------
r267 | remi | 2004-12-02 12:12:41 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/TODO

DNS chroot support is a packager's job, not mine

------------------------------------------------------------------------
r266 | remi | 2004-12-02 12:10:33 +0200 (Thu, 02 Dec 2004) | 3 lines
Changed paths:
   M /trunk/README

- Updated README (ie. insecure install by default)
- Note about bootstrap for SVN checkouters

------------------------------------------------------------------------
r265 | remi | 2004-12-02 11:43:52 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Fix capabilities when running as root

------------------------------------------------------------------------
r264 | remi | 2004-12-02 11:33:42 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Update translation

------------------------------------------------------------------------
r263 | remi | 2004-12-02 11:31:51 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Warn when running Miredo as root

------------------------------------------------------------------------
r262 | remi | 2004-12-02 11:31:33 +0200 (Thu, 02 Dec 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac

Made --disable-miredo-user the default, to avoid user annoyance

------------------------------------------------------------------------
r261 | remi | 2004-11-29 12:36:17 +0200 (Mon, 29 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

Mise-?\195?\160-jour de la traduction francophone

------------------------------------------------------------------------
r260 | remi | 2004-11-29 12:27:48 +0200 (Mon, 29 Nov 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Common error message when system privileges seem to be lacking

------------------------------------------------------------------------
r259 | remi | 2004-11-29 12:16:07 +0200 (Mon, 29 Nov 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Do not reset effective UID when it's not needed

------------------------------------------------------------------------
r258 | remi | 2004-11-28 01:17:27 +0200 (Sun, 28 Nov 2004) | 2 lines
Changed paths:
   M /trunk/NEWS

Minor features enhancement, not major

------------------------------------------------------------------------
r257 | remi | 2004-11-28 01:16:17 +0200 (Sun, 28 Nov 2004) | 2 lines
Changed paths:
   M /trunk/README

/dev/random is required too

------------------------------------------------------------------------
r256 | remi | 2004-11-28 01:14:05 +0200 (Sun, 28 Nov 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/security.cpp

Very useful error message when /dev/{u,}random could not be opened
(particularly useful when chrooted)

------------------------------------------------------------------------
r255 | remi | 2004-11-28 01:10:16 +0200 (Sun, 28 Nov 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Fix error message when using a '0' as UDP port

------------------------------------------------------------------------
r254 | remi | 2004-11-28 00:29:05 +0200 (Sun, 28 Nov 2004) | 3 lines
Changed paths:
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

- No longer require CAP_SETUID
- Drop CAP_SETUID

------------------------------------------------------------------------
r253 | remi | 2004-11-27 20:49:19 +0200 (Sat, 27 Nov 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/NEWS

Gettext news

------------------------------------------------------------------------
r252 | remi | 2004-11-27 20:47:15 +0200 (Sat, 27 Nov 2004) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/configure.ac
   M /trunk/src/main.c
   M /trunk/src/privproc.cpp

POSIX.1e support

------------------------------------------------------------------------
r251 | remi | 2004-11-13 16:42:56 +0200 (Sat, 13 Nov 2004) | 2 lines
Changed paths:
   M /trunk/AUTHORS

UTF-8

------------------------------------------------------------------------
r250 | remi | 2004-11-13 16:42:36 +0200 (Sat, 13 Nov 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Made US-ASCII

------------------------------------------------------------------------
r249 | remi | 2004-11-13 16:40:24 +0200 (Sat, 13 Nov 2004) | 2 lines
Changed paths:
   M /trunk/THANKS

UTF-8 conversion

------------------------------------------------------------------------
r248 | remi | 2004-11-13 16:40:04 +0200 (Sat, 13 Nov 2004) | 2 lines
Changed paths:
   M /trunk/miredo.8

Removed confusing sentence about -p option's default behaviour

------------------------------------------------------------------------
r247 | remi | 2004-11-01 22:38:37 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po

Intellectual property comments fix

------------------------------------------------------------------------
r246 | remi | 2004-11-01 22:37:54 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/TODO

Updated todo list

------------------------------------------------------------------------
r245 | remi | 2004-11-01 22:32:02 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/main.c

Fixed french quotes

------------------------------------------------------------------------
r244 | remi | 2004-11-01 22:16:16 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

Fix US english quotes

------------------------------------------------------------------------
r243 | remi | 2004-11-01 22:08:36 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po

Complete french translation

------------------------------------------------------------------------
r242 | remi | 2004-11-01 22:06:37 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

PO merge

------------------------------------------------------------------------
r241 | remi | 2004-11-01 22:05:42 +0200 (Mon, 01 Nov 2004) | 3 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/po/fr.po
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

English string fixes
Near complete french translation

------------------------------------------------------------------------
r240 | remi | 2004-11-01 21:13:07 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po
   M /trunk/po/miredo.pot

PO merge

------------------------------------------------------------------------
r239 | remi | 2004-11-01 21:12:02 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/po/fr.po
   M /trunk/src/main.c

Strings clean up

------------------------------------------------------------------------
r238 | remi | 2004-11-01 20:29:07 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po

PO updates

------------------------------------------------------------------------
r237 | remi | 2004-11-01 20:27:54 +0200 (Mon, 01 Nov 2004) | 3 lines
Changed paths:
   M /trunk/po/fr.po

Typo


------------------------------------------------------------------------
r236 | remi | 2004-11-01 20:27:30 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po

Fixes

------------------------------------------------------------------------
r235 | remi | 2004-11-01 20:26:10 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/fr.po

Fixes

------------------------------------------------------------------------
r234 | remi | 2004-11-01 20:24:41 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   A /trunk/po/LINGUAS
   A /trunk/po/fr.po
   M /trunk/po/miredo.pot

Partial french translation

------------------------------------------------------------------------
r233 | remi | 2004-11-01 20:19:07 +0200 (Mon, 01 Nov 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/po/POTFILES.in

Much less debug messages.
Fixed some messages.

------------------------------------------------------------------------
r232 | remi | 2004-11-01 19:40:35 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/po/miredo.pot
   M /trunk/src/Makefile.am
   M /trunk/src/main.c

Init locales

------------------------------------------------------------------------
r231 | remi | 2004-11-01 19:30:59 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/security.cpp
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

#include <gettext.h>

------------------------------------------------------------------------
r230 | remi | 2004-11-01 19:26:56 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/bootstrap

Use <gettext.h>

------------------------------------------------------------------------
r229 | remi | 2004-11-01 19:26:08 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   A /trunk/include/Makefile.am

include/ handled by Automake

------------------------------------------------------------------------
r228 | remi | 2004-11-01 19:23:55 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   A /trunk/include
   M /trunk/libtun6/Makefile.am

include directory for external headers

------------------------------------------------------------------------
r227 | remi | 2004-11-01 19:18:49 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/bootstrap

Cosmetic clean up

------------------------------------------------------------------------
r226 | remi | 2004-11-01 19:17:57 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/bootstrap

Typo

------------------------------------------------------------------------
r225 | remi | 2004-11-01 19:17:16 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/bootstrap

bootstrap script from tcpreen

------------------------------------------------------------------------
r224 | remi | 2004-11-01 19:14:13 +0200 (Mon, 01 Nov 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/Makefile.am
   M /trunk/configure.ac
   M /trunk/m4/Makefile.am
   A /trunk/po
   A /trunk/po/ChangeLog
   A /trunk/po/Makevars
   A /trunk/po/POTFILES.in
   A /trunk/po/miredo.pot

Gettext support

------------------------------------------------------------------------
r223 | remi | 2004-10-31 17:04:37 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Removed useless function call

------------------------------------------------------------------------
r222 | remi | 2004-10-31 16:53:42 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Basic packet sanity check before SendUnreach

------------------------------------------------------------------------
r221 | remi | 2004-10-31 13:15:04 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Removed error message

------------------------------------------------------------------------
r220 | remi | 2004-10-31 13:14:30 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/relay.cpp

Do not reply to packets that are not eligible for ICMPv6 error reply

------------------------------------------------------------------------
r219 | remi | 2004-10-31 12:59:21 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Fixed ICMPv6 error packets length

------------------------------------------------------------------------
r218 | remi | 2004-10-31 12:22:31 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Send administratively prohibited error messages

------------------------------------------------------------------------
r217 | remi | 2004-10-31 12:22:03 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Better comments

------------------------------------------------------------------------
r216 | remi | 2004-10-31 12:07:38 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Send an unreachable error when the tunnel is down

------------------------------------------------------------------------
r215 | remi | 2004-10-31 12:02:57 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Function to send a destination unreachable error

------------------------------------------------------------------------
r214 | remi | 2004-10-31 11:48:50 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac

Next release version

------------------------------------------------------------------------
r213 | remi | 2004-10-31 11:48:29 +0200 (Sun, 31 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h

Function to build ICMPv6 error messages

------------------------------------------------------------------------
r212 | remi | 2004-10-30 23:25:33 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/miredo.8

Reflect port change

------------------------------------------------------------------------
r211 | remi | 2004-10-30 23:24:53 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Updated ChangeLog for release 0.3.0

------------------------------------------------------------------------
r210 | remi | 2004-10-30 23:23:12 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/configure.ac

Changed version number to 0.3.0

------------------------------------------------------------------------
r209 | remi | 2004-10-30 23:21:28 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Forgot one Darwin warning

------------------------------------------------------------------------
r208 | remi | 2004-10-30 23:15:28 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

Warning fixes

------------------------------------------------------------------------
r207 | remi | 2004-10-30 23:10:17 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.h

Removed useless const qualifier

------------------------------------------------------------------------
r206 | remi | 2004-10-30 23:05:40 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Fix error message about tunnel device file

------------------------------------------------------------------------
r205 | remi | 2004-10-30 23:03:47 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Better wrapping of the chroot warning

------------------------------------------------------------------------
r204 | remi | 2004-10-30 23:01:17 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Improved error messages again

------------------------------------------------------------------------
r203 | remi | 2004-10-30 23:00:56 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/libtun6/ipv6-tunnel.h

Driver diagnostic (mainly for Linux and Darwin)

------------------------------------------------------------------------
r202 | remi | 2004-10-30 22:35:04 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/miredo.8

Updated doc to reflect latest changes

------------------------------------------------------------------------
r201 | remi | 2004-10-30 21:48:08 +0300 (Sat, 30 Oct 2004) | 3 lines
Changed paths:
   M /trunk/src/miredo.cpp

Let the kernel choose a service port automatically instead of
hard-coding non standard port 3545.

------------------------------------------------------------------------
r200 | remi | 2004-10-30 21:41:53 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Removed debug messages

------------------------------------------------------------------------
r199 | remi | 2004-10-30 21:39:55 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/queue.cpp

Removed debug messages

------------------------------------------------------------------------
r198 | remi | 2004-10-30 21:39:09 +0300 (Sat, 30 Oct 2004) | 6 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Implemented full queueing of IPv6 packets :
- both way,
- more than one packet,
- with proper dequeuing.


------------------------------------------------------------------------
r197 | remi | 2004-10-30 21:31:22 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/queue.cpp
   M /trunk/libteredo/queue.h

Fixes

------------------------------------------------------------------------
r196 | remi | 2004-10-30 19:52:26 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/queue.h

PacketsQueue made a virtual class

------------------------------------------------------------------------
r195 | remi | 2004-10-30 19:51:50 +0300 (Sat, 30 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/queue.cpp
   A /trunk/libteredo/queue.h

Common support for real packets queue (with several packets)

------------------------------------------------------------------------
r194 | remi | 2004-10-28 23:20:02 +0300 (Thu, 28 Oct 2004) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/README

Use /var/lib/miredo instead of /var/run/miredo as a better sample
chroot directory

------------------------------------------------------------------------
r193 | remi | 2004-10-28 00:18:39 +0300 (Thu, 28 Oct 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/TODO

Update for release 0.2.3

------------------------------------------------------------------------
r192 | remi | 2004-10-28 00:18:01 +0300 (Thu, 28 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Do not detect connectivity loss until it is fixed

------------------------------------------------------------------------
r191 | remi | 2004-10-28 00:09:37 +0300 (Thu, 28 Oct 2004) | 2 lines
Changed paths:
   M /trunk/TODO

More pending issues to be resolved

------------------------------------------------------------------------
r190 | remi | 2004-10-27 23:53:51 +0300 (Wed, 27 Oct 2004) | 2 lines
Changed paths:
   D /trunk/.cvsignore
   D /trunk/admin/.cvsignore
   D /trunk/libteredo/.cvsignore
   D /trunk/libtun6/.cvsignore
   D /trunk/m4/.cvsignore
   D /trunk/src/.cvsignore

Meanling less with Subversion

------------------------------------------------------------------------
r189 | remi | 2004-10-24 19:02:24 +0300 (Sun, 24 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fix comments

------------------------------------------------------------------------
r188 | remi | 2004-10-24 01:14:08 +0300 (Sun, 24 Oct 2004) | 2 lines
Changed paths:
   M /trunk/bootstrap

Fixed

------------------------------------------------------------------------
r187 | remi | 2004-10-24 00:01:00 +0300 (Sun, 24 Oct 2004) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/miredo.8

Reflect changes

------------------------------------------------------------------------
r186 | remi | 2004-10-23 23:49:33 +0300 (Sat, 23 Oct 2004) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp

Add a default route through the tunnel

------------------------------------------------------------------------
r185 | remi | 2004-10-23 23:49:18 +0300 (Sat, 23 Oct 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Remove a unused variable which caused a bug

------------------------------------------------------------------------
r184 | remi | 2004-10-23 23:48:46 +0300 (Sat, 23 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Linux driver: Use the same automatic metric as the Linux kernel

------------------------------------------------------------------------
r183 | remi | 2004-10-23 19:16:44 +0300 (Sat, 23 Oct 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Avoid warning message on Mac OS X

------------------------------------------------------------------------
r182 | remi | 2004-10-23 19:13:41 +0300 (Sat, 23 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Typos

------------------------------------------------------------------------
r181 | remi | 2004-10-23 19:07:20 +0300 (Sat, 23 Oct 2004) | 3 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libtun6/ipv6-tunnel.cpp

Untested (probably not working) support for OpenBSD, NetBSD and Darwin
kernels tunneling

------------------------------------------------------------------------
r180 | remi | 2004-10-23 16:28:26 +0300 (Sat, 23 Oct 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac

Next release number

------------------------------------------------------------------------
r179 | remi | 2004-10-23 16:28:14 +0300 (Sat, 23 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

Mac OS X compilation fix

------------------------------------------------------------------------
r178 | remi | 2004-10-16 13:11:11 +0300 (Sat, 16 Oct 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Updated ChangeLog

------------------------------------------------------------------------
r177 | remi | 2004-10-16 13:09:29 +0300 (Sat, 16 Oct 2004) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/configure.ac
   M /trunk/miredo.8

Update documentation for new --bind option

------------------------------------------------------------------------
r176 | remi | 2004-10-16 12:57:15 +0300 (Sat, 16 Oct 2004) | 3 lines
Changed paths:
   M /trunk/src/main.c

Support for setting the relay/client bind address through the command line,
print that setting with -v

------------------------------------------------------------------------
r175 | remi | 2004-10-16 12:48:22 +0300 (Sat, 16 Oct 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h

Support for binding client/relay to a specific IPv4 address

------------------------------------------------------------------------
r174 | remi | 2004-10-16 12:27:09 +0300 (Sat, 16 Oct 2004) | 2 lines
Changed paths:
   M /trunk/THANKS

Updated thanks

------------------------------------------------------------------------
r173 | remi | 2004-10-15 11:47:53 +0300 (Fri, 15 Oct 2004) | 2 lines
Changed paths:
   M /trunk/src/Makefile.am

Define _GNU_SOURCE for old glibc

------------------------------------------------------------------------
r172 | remi | 2004-09-25 16:12:03 +0300 (Sat, 25 Sep 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c

FreeBSD compile fix

------------------------------------------------------------------------
r171 | remi | 2004-09-25 16:07:42 +0300 (Sat, 25 Sep 2004) | 2 lines
Changed paths:
   M /trunk/NEWS

Updates for upcoming release

------------------------------------------------------------------------
r170 | remi | 2004-09-25 13:40:15 +0300 (Sat, 25 Sep 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Fix transmission of ICMP6 echo request through server

------------------------------------------------------------------------
r169 | remi | 2004-09-25 13:32:55 +0300 (Sat, 25 Sep 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/server.cpp
   M /trunk/src/server.h

Fix segfault in server code

------------------------------------------------------------------------
r168 | remi | 2004-09-25 12:50:38 +0300 (Sat, 25 Sep 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp

Fixed ICMP6 router solicitation payload length

------------------------------------------------------------------------
r167 | remi | 2004-09-04 13:48:58 +0300 (Sat, 04 Sep 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/packets.cpp
   M /trunk/libteredo/packets.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/security.cpp
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h
   M /trunk/libteredo/v4global.c
   M /trunk/libteredo/v4global.h
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/libtun6/ipv6-tunnel.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h
   M /trunk/src/server.cpp
   M /trunk/src/server.h

#include clean up

------------------------------------------------------------------------
r166 | remi | 2004-09-03 19:06:23 +0300 (Fri, 03 Sep 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Support for server that do not insert an origin indication in bubbles

------------------------------------------------------------------------
r165 | remi | 2004-09-03 17:59:03 +0300 (Fri, 03 Sep 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fix generation of nonce value for unknown peer

------------------------------------------------------------------------
r164 | remi | 2004-09-03 17:28:10 +0300 (Fri, 03 Sep 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fix frequent connectivity lost with cone NAT.
Fix some weaknesses/problems in handling of server packets

------------------------------------------------------------------------
r163 | remi | 2004-09-03 16:31:57 +0300 (Fri, 03 Sep 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Print log message only once when removing tunnel

------------------------------------------------------------------------
r158 | remi | 2004-09-03 15:05:51 +0300 (Fri, 03 Sep 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac

Update release number

------------------------------------------------------------------------
r157 | remi | 2004-09-03 15:03:31 +0300 (Fri, 03 Sep 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Fix maintenance of connectivity to server in case of cone NAT

------------------------------------------------------------------------
r156 | remi | 2004-09-03 14:55:20 +0300 (Fri, 03 Sep 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fixed restart delay when symmetric NAT is detected

------------------------------------------------------------------------
r155 | remi | 2004-09-01 20:15:34 +0300 (Wed, 01 Sep 2004) | 3 lines
Changed paths:
   M /trunk/README
   M /trunk/libteredo/relay.cpp
   M /trunk/src/miredo.cpp

Fix typo in GenerateNonce that prevented the Teredo client from
functionning at all

------------------------------------------------------------------------
r154 | remi | 2004-09-01 14:59:32 +0300 (Wed, 01 Sep 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Updated ChangeLog

------------------------------------------------------------------------
r153 | remi | 2004-09-01 14:50:09 +0300 (Wed, 01 Sep 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/Makefile.am

Removed checks for OpenSSL

------------------------------------------------------------------------
r152 | remi | 2004-09-01 14:48:47 +0300 (Wed, 01 Sep 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   M /trunk/libteredo/relay.cpp
   A /trunk/libteredo/security.cpp
   A /trunk/libteredo/security.h

Removed dependency on OpenSSL library

------------------------------------------------------------------------
r151 | remi | 2004-09-01 14:47:24 +0300 (Wed, 01 Sep 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Use daemon() (more secure)

------------------------------------------------------------------------
r150 | remi | 2004-09-01 14:46:58 +0300 (Wed, 01 Sep 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Fix error message UDP port number

------------------------------------------------------------------------
r149 | remi | 2004-09-01 13:44:59 +0300 (Wed, 01 Sep 2004) | 2 lines
Changed paths:
   M /trunk/README

New chroot instructions for Teredo client

------------------------------------------------------------------------
r148 | remi | 2004-08-31 23:02:53 +0300 (Tue, 31 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Export some client qualification settings

------------------------------------------------------------------------
r147 | remi | 2004-08-31 22:53:06 +0300 (Tue, 31 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.h

Global settings for qualification procedure created

------------------------------------------------------------------------
r146 | remi | 2004-08-31 22:46:29 +0300 (Tue, 31 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Bogus comment removed

------------------------------------------------------------------------
r145 | remi | 2004-08-31 11:48:19 +0300 (Tue, 31 Aug 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

- made TeredoRelay class re-entrant (not thread-safe though),
- notify the kernel when the tunnel connectivity is lost.

------------------------------------------------------------------------
r144 | remi | 2004-08-30 20:05:18 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/README

Fixed some outdated informations and some minor improvements

------------------------------------------------------------------------
r143 | remi | 2004-08-30 19:13:05 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/AUTHORS

Removed possibly incorrect use of english word "autonomous"

------------------------------------------------------------------------
r142 | remi | 2004-08-30 18:55:52 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/configure.ac
   M /trunk/miredo.8

Change version number. Documentation fix.

------------------------------------------------------------------------
r141 | remi | 2004-08-30 16:10:35 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/miredo.8

The right route command for FreeBSD

------------------------------------------------------------------------
r140 | remi | 2004-08-30 15:52:05 +0300 (Mon, 30 Aug 2004) | 3 lines
Changed paths:
   M /trunk/src/miredo.cpp

Fix for relay mode :
bring interface up and set up link-local address

------------------------------------------------------------------------
r139 | remi | 2004-08-30 15:41:04 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/v4global.c

FreeBSD compilation fix

------------------------------------------------------------------------
r138 | remi | 2004-08-30 15:28:46 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/libtun6/ipv6-tunnel.cpp

FreeBSD compilation fix

------------------------------------------------------------------------
r137 | remi | 2004-08-30 15:07:43 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/packets.cpp (from /trunk/libteredo/relay-packets.cpp:133)
   A /trunk/libteredo/packets.h (from /trunk/libteredo/relay-packets.h:133)
   D /trunk/libteredo/relay-packets.cpp
   D /trunk/libteredo/relay-packets.h
   M /trunk/libteredo/relay.cpp

Clean up

------------------------------------------------------------------------
r136 | remi | 2004-08-30 14:49:19 +0300 (Mon, 30 Aug 2004) | 3 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Make IPv6 addresses requests as big as struct ifreq on Linux
(make valgrind happy)

------------------------------------------------------------------------
r135 | remi | 2004-08-30 14:25:40 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Make valgrind happy with RAND_*bytes

------------------------------------------------------------------------
r134 | remi | 2004-08-30 13:32:20 +0300 (Mon, 30 Aug 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/teredo-udp.cpp

Check TeredoRelayUDP / TeredoServerUDP socket state before trying to send a
packet

------------------------------------------------------------------------
r133 | remi | 2004-08-30 13:29:01 +0300 (Mon, 30 Aug 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay-packets.cpp
   M /trunk/libteredo/relay-packets.h
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Do not regenerate auth nonce every time.
Use a truly random nonce.

------------------------------------------------------------------------
r132 | remi | 2004-08-30 13:13:42 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp

Call IPv6Tunnel::CleanUp explicitly

------------------------------------------------------------------------
r131 | remi | 2004-08-30 13:12:22 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/libtun6/ipv6-tunnel.h

Added a CleanUp () function.

------------------------------------------------------------------------
r130 | remi | 2004-08-30 12:32:53 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Fix use of unitialized value

------------------------------------------------------------------------
r129 | remi | 2004-08-30 12:24:35 +0300 (Mon, 30 Aug 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac

Check the right function in -lssl

------------------------------------------------------------------------
r128 | remi | 2004-08-30 12:17:57 +0300 (Mon, 30 Aug 2004) | 3 lines
Changed paths:
   M /trunk/src/main.c

Do not chroot when this is not needed.
Do not print a confusing error if setgroups fails.

------------------------------------------------------------------------
r127 | rdenisc | 2004-08-29 22:28:03 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/THANKS
   M /trunk/miredo.8

Documentation updates

------------------------------------------------------------------------
r126 | rdenisc | 2004-08-29 22:04:50 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/libteredo/relay-packets.cpp
   M /trunk/libteredo/relay-packets.h
   M /trunk/libteredo/relay.cpp

Check nonce value in ICMPv6 echo replies

------------------------------------------------------------------------
r125 | rdenisc | 2004-08-29 20:39:04 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay-packets.cpp
   M /trunk/libteredo/relay-packets.h

Clean up functions to send bubbles

------------------------------------------------------------------------
r124 | rdenisc | 2004-08-29 20:31:06 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Reply to server bubbles

------------------------------------------------------------------------
r123 | rdenisc | 2004-08-29 20:30:08 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay-packets.cpp
   M /trunk/libteredo/relay-packets.h

More general support for sending bubbles

------------------------------------------------------------------------
r122 | rdenisc | 2004-08-29 19:59:37 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Adjust/Fix server ping delay when qualification succeeds

------------------------------------------------------------------------
r121 | rdenisc | 2004-08-29 19:15:32 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay-packets.h
   M /trunk/libteredo/relay.cpp

Send echo request to discover relay

------------------------------------------------------------------------
r120 | rdenisc | 2004-08-29 18:56:07 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libteredo/relay-packets.cpp

Support for sending ICMPv6 Echo request

------------------------------------------------------------------------
r119 | rdenisc | 2004-08-29 18:33:53 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

Check confirmation byte from server

------------------------------------------------------------------------
r118 | rdenisc | 2004-08-29 16:20:07 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libteredo/relay.cpp

Client packet reception implementation  + some fixes

------------------------------------------------------------------------
r117 | rdenisc | 2004-08-29 12:10:12 +0300 (Sun, 29 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libteredo/relay.cpp

Fixed memory leak when a recycling peer entry

------------------------------------------------------------------------
r116 | rdenisc | 2004-08-29 10:56:11 +0300 (Sun, 29 Aug 2004) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/miredo.cpp
   M /trunk/src/privproc.cpp
   M /trunk/src/privproc.h

Do not use privsep for Teredo relay,
set up a route instead of a buggy Teredo address.
Fix setuid for Teredo client

------------------------------------------------------------------------
r115 | rdenisc | 2004-08-28 18:14:25 +0300 (Sat, 28 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Client address change detection

------------------------------------------------------------------------
r114 | rdenisc | 2004-08-28 16:49:53 +0300 (Sat, 28 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libteredo/Makefile.am
   A /trunk/libteredo/relay-packets.cpp
   A /trunk/libteredo/relay-packets.h
   M /trunk/libteredo/relay.cpp

Code split

------------------------------------------------------------------------
r113 | rdenisc | 2004-08-28 15:29:51 +0300 (Sat, 28 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Removed bogus DEBUG message

------------------------------------------------------------------------
r112 | rdenisc | 2004-08-28 15:29:26 +0300 (Sat, 28 Aug 2004) | 3 lines
Changed paths:
   M /trunk/src/miredo.cpp

Use privsep to bring up the interface,
Fix initial_addr in case of Teredo client

------------------------------------------------------------------------
r111 | rdenisc | 2004-08-28 15:23:06 +0300 (Sat, 28 Aug 2004) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp

Support for changing interface state from privproc

------------------------------------------------------------------------
r110 | rdenisc | 2004-08-28 15:07:23 +0300 (Sat, 28 Aug 2004) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/privproc.cpp

Fixes memcpy instead of memcmp,
some cleanups

------------------------------------------------------------------------
r109 | rdenisc | 2004-08-28 14:51:21 +0300 (Sat, 28 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/src/privproc.cpp

Fixes for Qualitification

------------------------------------------------------------------------
r108 | rdenisc | 2004-08-28 13:36:50 +0300 (Sat, 28 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/miredo.cpp

Increase select delay

------------------------------------------------------------------------
r107 | rdenisc | 2004-08-28 12:56:19 +0300 (Sat, 28 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.h

Comment about alignment

------------------------------------------------------------------------
r106 | rdenisc | 2004-08-27 19:58:57 +0300 (Fri, 27 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h

a flag is singular

------------------------------------------------------------------------
r105 | rdenisc | 2004-08-27 19:57:32 +0300 (Fri, 27 Aug 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/src/miredo.cpp

Complete previous commit
Some comment

------------------------------------------------------------------------
r104 | rdenisc | 2004-08-27 19:42:19 +0300 (Fri, 27 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/miredo.cpp

state -> probe

------------------------------------------------------------------------
r103 | rdenisc | 2004-08-27 19:21:10 +0300 (Fri, 27 Aug 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h
   M /trunk/src/miredo.cpp

Fix router solicitation
Fix select/ReceivePacket usage

------------------------------------------------------------------------
r102 | rdenisc | 2004-08-27 18:04:32 +0300 (Fri, 27 Aug 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Call relay->Process() every 100th milliseconds

------------------------------------------------------------------------
r101 | rdenisc | 2004-08-27 17:54:52 +0300 (Fri, 27 Aug 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Partial qualification procedure implementation
(only send)

------------------------------------------------------------------------
r100 | rdenisc | 2004-08-27 13:21:59 +0300 (Fri, 27 Aug 2004) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

Replaced TeredoCommonUDP with TeredoPacket.
Big step toward libteredo's thread-safety

------------------------------------------------------------------------
r99 | rdenisc | 2004-08-26 22:54:36 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Better error handling, cleanup

------------------------------------------------------------------------
r98 | rdenisc | 2004-08-26 20:19:28 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/configure.ac
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/libtun6/ipv6-tunnel.h

Use writev/readv to avoid using memcpy

------------------------------------------------------------------------
r97 | rdenisc | 2004-08-26 18:19:11 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Some cleanups

------------------------------------------------------------------------
r96 | rdenisc | 2004-08-26 18:04:51 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.h

Removed thread-unsafe by design function ReplyPacket

------------------------------------------------------------------------
r95 | rdenisc | 2004-08-26 18:03:57 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Do not user TeredoCommonUDP::ReplyPacket. Not thread-safe by design.

------------------------------------------------------------------------
r94 | rdenisc | 2004-08-26 16:33:34 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Cleanups

------------------------------------------------------------------------
r93 | rdenisc | 2004-08-26 16:32:51 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h

use 'const' qualifier where appropriate

------------------------------------------------------------------------
r92 | rdenisc | 2004-08-26 13:43:42 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Fix router solicitation

------------------------------------------------------------------------
r91 | rdenisc | 2004-08-26 13:20:48 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/privproc.cpp

Don't try to terminate privsep twice

------------------------------------------------------------------------
r90 | rdenisc | 2004-08-26 12:47:08 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/TODO

Updated todo list

------------------------------------------------------------------------
r89 | rdenisc | 2004-08-26 12:37:54 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/miredo.8
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h

Only one server for client. Some cleanups.

------------------------------------------------------------------------
r88 | rdenisc | 2004-08-26 11:02:22 +0300 (Thu, 26 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/configure.ac
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/Makefile.am

Gerenate random auth nonce with OpenSSL

------------------------------------------------------------------------
r87 | rdenisc | 2004-08-24 22:58:23 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Method to send a Router Solicitation

------------------------------------------------------------------------
r86 | rdenisc | 2004-08-24 22:12:17 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Removed useless Authentication header memcpy

------------------------------------------------------------------------
r85 | rdenisc | 2004-08-24 22:03:42 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Got rid of a useless IPv6 address copy

------------------------------------------------------------------------
r84 | rdenisc | 2004-08-24 21:58:32 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

Fixes for some ICC warnings

------------------------------------------------------------------------
r83 | rdenisc | 2004-08-24 21:53:52 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libteredo/teredo-udp.cpp

Simpler Teredo header decoding

------------------------------------------------------------------------
r82 | rdenisc | 2004-08-24 21:52:49 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Implement update of last server interaction time

------------------------------------------------------------------------
r81 | rdenisc | 2004-08-24 21:52:04 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.h

Remember server last interaction time

------------------------------------------------------------------------
r80 | rdenisc | 2004-08-24 21:50:53 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo-udp.h

Comment

------------------------------------------------------------------------
r79 | rdenisc | 2004-08-24 21:49:40 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Check Teredo prefix for validity before use

------------------------------------------------------------------------
r78 | rdenisc | 2004-08-24 21:49:09 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/teredo.c
   M /trunk/libteredo/teredo.h

Added function to check a Teredo prefix

------------------------------------------------------------------------
r77 | rdenisc | 2004-08-24 21:48:34 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/server.cpp

Remove useless #include

------------------------------------------------------------------------
r76 | rdenisc | 2004-08-24 19:00:26 +0300 (Tue, 24 Aug 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h

Support for client mode in Miredo core
(though the underlying support in libteredo is largely incomplete)

------------------------------------------------------------------------
r75 | rdenisc | 2004-08-24 17:25:35 +0300 (Tue, 24 Aug 2004) | 3 lines
Changed paths:
   M /trunk/miredo.8
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h

Verbose option to print config at startup
Command line support for client mode (not yet supported internally)

------------------------------------------------------------------------
r74 | rdenisc | 2004-08-24 12:49:39 +0300 (Tue, 24 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/NEWS
   M /trunk/README
   M /trunk/miredo.8
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h

Support for relaying behind a restricted NAT

------------------------------------------------------------------------
r73 | rdenisc | 2004-08-22 19:58:53 +0300 (Sun, 22 Aug 2004) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/TODO
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/main.c

Support for creating relay behind a restricted NAT
(a command line option to enable that feature is still missing)

------------------------------------------------------------------------
r72 | rdenisc | 2004-08-22 19:53:43 +0300 (Sun, 22 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Send direct bubble if appropriate

------------------------------------------------------------------------
r71 | rdenisc | 2004-08-22 19:43:54 +0300 (Sun, 22 Aug 2004) | 3 lines
Changed paths:
   M /trunk/libteredo/relay.cpp

Catch very unlikely lack of memory error.
We still have a potential DoS in the relay code.

------------------------------------------------------------------------
r70 | rdenisc | 2004-08-22 19:40:05 +0300 (Sun, 22 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Packet transmission method re-ordering for future client support

------------------------------------------------------------------------
r69 | rdenisc | 2004-08-22 18:38:26 +0300 (Sun, 22 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h

Comments

------------------------------------------------------------------------
r68 | rdenisc | 2004-08-22 18:19:32 +0300 (Sun, 22 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/src/miredo.cpp

Cosmetic cleanups

------------------------------------------------------------------------
r67 | rdenisc | 2004-08-22 17:39:38 +0300 (Sun, 22 Aug 2004) | 2 lines
Changed paths:
   M /trunk/bootstrap

Rewritten as a Makefile

------------------------------------------------------------------------
r66 | rdenisc | 2004-08-18 12:53:58 +0300 (Wed, 18 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/miredo.cpp

Wait for child processes termination where appropriate

------------------------------------------------------------------------
r65 | rdenisc | 2004-08-18 12:42:35 +0300 (Wed, 18 Aug 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp
   M /trunk/src/privproc.cpp
   M /trunk/src/privproc.h

Fixes for privileged process and cave-at for routing on FreeBSD

------------------------------------------------------------------------
r64 | rdenisc | 2004-08-18 12:41:46 +0300 (Wed, 18 Aug 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

More explicit error messages

------------------------------------------------------------------------
r63 | rdenisc | 2004-08-18 12:33:24 +0300 (Wed, 18 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.h

More comments

------------------------------------------------------------------------
r62 | rdenisc | 2004-08-18 12:26:35 +0300 (Wed, 18 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

More explicit comment

------------------------------------------------------------------------
r61 | rdenisc | 2004-08-17 22:21:13 +0300 (Tue, 17 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/miredo.cpp

Privileged miredo process to change tunnel addresses

------------------------------------------------------------------------
r60 | rdenisc | 2004-08-17 22:09:51 +0300 (Tue, 17 Aug 2004) | 3 lines
Changed paths:
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h

Callbacks for Teredo client support
(client constructor still missing)

------------------------------------------------------------------------
r59 | rdenisc | 2004-08-17 22:09:12 +0300 (Tue, 17 Aug 2004) | 2 lines
Changed paths:
   M /trunk/src/privproc.cpp
   M /trunk/src/privproc.h

Cleanup

------------------------------------------------------------------------
r58 | rdenisc | 2004-08-17 20:31:14 +0300 (Tue, 17 Aug 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/libtun6/ipv6-tunnel.h
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h

Made libtun6 thread-safe

------------------------------------------------------------------------
r57 | rdenisc | 2004-08-17 19:55:41 +0300 (Tue, 17 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Initial (not implemented) Teredo client API

------------------------------------------------------------------------
r56 | rdenisc | 2004-08-17 19:42:38 +0300 (Tue, 17 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Move virtual function implementations in .c file

------------------------------------------------------------------------
r55 | rdenisc | 2004-08-17 19:40:03 +0300 (Tue, 17 Aug 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Code cleanup

------------------------------------------------------------------------
r54 | rdenisc | 2004-07-31 23:15:07 +0300 (Sat, 31 Jul 2004) | 2 lines
Changed paths:
   A /trunk/src/privproc.cpp
   A /trunk/src/privproc.h

Initial support for changing Teredo addresses while running

------------------------------------------------------------------------
r53 | rdenisc | 2004-07-31 22:58:44 +0300 (Sat, 31 Jul 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h
   M /trunk/libteredo/server.cpp
   M /trunk/libteredo/server.h
   M /trunk/libteredo/teredo-udp.cpp
   M /trunk/libteredo/teredo-udp.h
   M /trunk/libteredo/teredo.h
   M /trunk/src/Makefile.am
   M /trunk/src/miredo.cpp
   A /trunk/src/relay.cpp
   A /trunk/src/relay.h
   A /trunk/src/server.cpp
   A /trunk/src/server.h

Huge patch to separate miredo from libteredo

------------------------------------------------------------------------
r52 | rdenisc | 2004-07-25 14:50:48 +0300 (Sun, 25 Jul 2004) | 2 lines
Changed paths:
   D /trunk/libteredo/Makefile.in

Should not have been commited in the first place

------------------------------------------------------------------------
r51 | rdenisc | 2004-07-23 19:44:52 +0300 (Fri, 23 Jul 2004) | 2 lines
Changed paths:
   M /trunk/libteredo/relay.cpp
   M /trunk/libteredo/relay.h

Support for sending direct bubbles (not yet used)

------------------------------------------------------------------------
r50 | rdenisc | 2004-07-22 20:38:29 +0300 (Thu, 22 Jul 2004) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.ac
   D /trunk/include
   A /trunk/libteredo
   A /trunk/libteredo/.cvsignore
   A /trunk/libteredo/Makefile.am
   A /trunk/libteredo/Makefile.in
   A /trunk/libteredo/relay.cpp
   A /trunk/libteredo/relay.h
   A /trunk/libteredo/server.cpp
   A /trunk/libteredo/server.h
   A /trunk/libteredo/teredo-udp.cpp
   A /trunk/libteredo/teredo-udp.h
   A /trunk/libteredo/teredo.c
   A /trunk/libteredo/teredo.h
   A /trunk/libteredo/v4global.c
   A /trunk/libteredo/v4global.h
   M /trunk/src/Makefile.am
   D /trunk/src/common_pkt.cpp
   D /trunk/src/common_pkt.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   D /trunk/src/relay.cpp
   D /trunk/src/relay.h
   D /trunk/src/server.cpp
   D /trunk/src/server.h
   D /trunk/src/teredo-udp.cpp
   D /trunk/src/teredo-udp.h

Initial libteredo, separated from miredo core

------------------------------------------------------------------------
r49 | rdenisc | 2004-07-21 19:37:41 +0300 (Wed, 21 Jul 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/common_pkt.cpp
   M /trunk/src/common_pkt.h
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

Got rid of useless ForwardPacket

------------------------------------------------------------------------
r48 | rdenisc | 2004-07-14 17:23:56 +0300 (Wed, 14 Jul 2004) | 3 lines
Changed paths:
   M /trunk/README
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

SetEUID before fork/setsid.
README updates

------------------------------------------------------------------------
r47 | rdenisc | 2004-07-14 16:51:10 +0300 (Wed, 14 Jul 2004) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/configure.ac
   M /trunk/miredo.8
   M /trunk/src/main.c

Do not setsid when nodetach is on,
Do not chroot in root's home by default while running as root.

------------------------------------------------------------------------
r46 | rdenisc | 2004-07-13 12:53:36 +0300 (Tue, 13 Jul 2004) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/README
   M /trunk/TODO
   M /trunk/miredo.8
   M /trunk/src/main.c

No longer chroot by default.
Documentation updates.

------------------------------------------------------------------------
r45 | rdenisc | 2004-07-12 14:23:38 +0300 (Mon, 12 Jul 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/main.c
   M /trunk/src/relay.cpp
   M /trunk/src/teredo-udp.h

FreeBSD compilation fixes

------------------------------------------------------------------------
r44 | rdenisc | 2004-07-12 12:34:51 +0300 (Mon, 12 Jul 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c
   M /trunk/src/server.cpp
   M /trunk/src/teredo-udp.cpp

Fixes for bugs in previous commit

------------------------------------------------------------------------
r43 | rdenisc | 2004-07-12 11:48:30 +0300 (Mon, 12 Jul 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/src/miredo.cpp
   M /trunk/src/server.cpp
   M /trunk/src/teredo-udp.cpp
   M /trunk/src/teredo-udp.h

Fix for possible align problem on non-Intel platforms

------------------------------------------------------------------------
r42 | rdenisc | 2004-07-12 11:45:48 +0300 (Mon, 12 Jul 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Better diagnostic messages

------------------------------------------------------------------------
r41 | rdenisc | 2004-07-11 16:52:22 +0300 (Sun, 11 Jul 2004) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/TODO
   M /trunk/include/teredo.h
   M /trunk/libtun6/ipv6-tunnel.h
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/teredo-udp.h

Doc updates, clean ups

------------------------------------------------------------------------
r40 | rdenisc | 2004-07-11 13:43:29 +0300 (Sun, 11 Jul 2004) | 2 lines
Changed paths:
   M /trunk/TODO
   M /trunk/src/relay.cpp
   M /trunk/src/server.cpp

A lot less debug messages

------------------------------------------------------------------------
r39 | rdenisc | 2004-07-11 13:34:41 +0300 (Sun, 11 Jul 2004) | 2 lines
Changed paths:
   M /trunk/include/teredo.c

Fix broken client port check

------------------------------------------------------------------------
r38 | rdenisc | 2004-07-11 13:17:34 +0300 (Sun, 11 Jul 2004) | 2 lines
Changed paths:
   M /trunk/src/server.cpp

(Likely useless) support for not inserting an origin indication

------------------------------------------------------------------------
r37 | rdenisc | 2004-07-11 13:08:13 +0300 (Sun, 11 Jul 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/TODO
   M /trunk/src/Makefile.am
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.h
   A /trunk/src/server.cpp
   A /trunk/src/server.h
   D /trunk/src/server_pkt.cpp
   D /trunk/src/server_pkt.h
   M /trunk/src/teredo-udp.cpp

MiredoServer class, clean up

------------------------------------------------------------------------
r36 | rdenisc | 2004-07-11 12:10:18 +0300 (Sun, 11 Jul 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/teredo-udp.cpp

Fixed recvfrom() call

------------------------------------------------------------------------
r35 | rdenisc | 2004-07-10 20:52:07 +0300 (Sat, 10 Jul 2004) | 3 lines
Changed paths:
   M /trunk/src/miredo.cpp

Implement signal handling in parent process,
Safer signals handlers

------------------------------------------------------------------------
r34 | rdenisc | 2004-07-10 20:51:20 +0300 (Sat, 10 Jul 2004) | 2 lines
Changed paths:
   M /trunk/src/main.c

Fix a warning

------------------------------------------------------------------------
r33 | rdenisc | 2004-07-10 19:31:56 +0300 (Sat, 10 Jul 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/configure.ac
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h

Signal handling, chroot support, setuid user passed from the command line

------------------------------------------------------------------------
r32 | rdenisc | 2004-07-10 19:31:25 +0300 (Sat, 10 Jul 2004) | 2 lines
Changed paths:
   M /trunk/m4/sockaddr.m4

Resync with tcpreen

------------------------------------------------------------------------
r31 | rdenisc | 2004-07-10 19:29:06 +0300 (Sat, 10 Jul 2004) | 2 lines
Changed paths:
   M /trunk/src/relay.cpp

*Silently* ignore multicast packets received from the kernel

------------------------------------------------------------------------
r30 | rdenisc | 2004-07-10 19:28:34 +0300 (Sat, 10 Jul 2004) | 2 lines
Changed paths:
   M /trunk/libtun6/ipv6-tunnel.cpp

No longer bring interface down manually on tunnel object deletion

------------------------------------------------------------------------
r29 | rdenisc | 2004-06-27 20:37:21 +0300 (Sun, 27 Jun 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/include/teredo.c
   M /trunk/include/teredo.h
   M /trunk/libtun6/ipv6-tunnel.cpp
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h
   M /trunk/src/server_pkt.cpp

User-specified Teredo prefix rather than hardcoded one

------------------------------------------------------------------------
r28 | rdenisc | 2004-06-27 18:40:25 +0300 (Sun, 27 Jun 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/server_pkt.cpp

Set IPv6 source address correctly in server's RA

------------------------------------------------------------------------
r27 | rdenisc | 2004-06-27 18:27:12 +0300 (Sun, 27 Jun 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/Makefile.am
   M /trunk/configure.ac
   A /trunk/libtun6
   A /trunk/libtun6/.cvsignore
   A /trunk/libtun6/Makefile.am
   A /trunk/libtun6/ipv6-tunnel.cpp
   A /trunk/libtun6/ipv6-tunnel.h
   M /trunk/src/Makefile.am
   M /trunk/src/common_pkt.cpp
   D /trunk/src/ipv6-tunnel.cpp
   D /trunk/src/ipv6-tunnel.h
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp

IPv6Tunnel made a library

------------------------------------------------------------------------
r26 | rdenisc | 2004-06-27 13:25:24 +0300 (Sun, 27 Jun 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/TODO
   M /trunk/include/teredo.c
   M /trunk/miredo.8
   M /trunk/src/relay.cpp
   M /trunk/src/server_pkt.cpp

Updates for draft 02

------------------------------------------------------------------------
r25 | rdenisc | 2004-06-26 23:14:28 +0300 (Sat, 26 Jun 2004) | 2 lines
Changed paths:
   M /trunk/miredo.8

More complete man page. Typos fixed.

------------------------------------------------------------------------
r24 | rdenisc | 2004-06-26 22:58:26 +0300 (Sat, 26 Jun 2004) | 2 lines
Changed paths:
   M /trunk/miredo.8

Spacing fix

------------------------------------------------------------------------
r23 | rdenisc | 2004-06-26 22:55:33 +0300 (Sat, 26 Jun 2004) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/Makefile.am
   M /trunk/README
   M /trunk/TODO
   A /trunk/miredo.8
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp

Broken FreeBSD routes support,
Initial man page,
Use local-scope Teredo cone address rather than restricted one

------------------------------------------------------------------------
r22 | rdenisc | 2004-06-26 18:47:26 +0300 (Sat, 26 Jun 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/NEWS
   M /trunk/README

Doc update for upcoming release 0.1.1

------------------------------------------------------------------------
r21 | rdenisc | 2004-06-26 18:24:26 +0300 (Sat, 26 Jun 2004) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/common_pkt.cpp
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/miredo.cpp

Check that server primary IPv4 address is global unicast,
Code cleanups

------------------------------------------------------------------------
r20 | rdenisc | 2004-06-26 17:54:35 +0300 (Sat, 26 Jun 2004) | 2 lines
Changed paths:
   M /trunk/configure.ac
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/miredo.cpp

Code cleanup

------------------------------------------------------------------------
r19 | rdenisc | 2004-06-26 11:51:32 +0300 (Sat, 26 Jun 2004) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/miredo.cpp
   M /trunk/src/relay.cpp

FreeBSD addresses setup fix
Removed useless memory checks

------------------------------------------------------------------------
r18 | rdenisc | 2004-06-25 18:00:42 +0300 (Fri, 25 Jun 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/ipv6-tunnel.cpp

Compile fix for broken old KAME

------------------------------------------------------------------------
r17 | rdenisc | 2004-06-24 22:16:14 +0300 (Thu, 24 Jun 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/configure.ac
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/ipv6-tunnel.h
   M /trunk/src/miredo.cpp

Most of the FreeBSD tunneling driver (broken)

------------------------------------------------------------------------
r16 | rdenisc | 2004-06-22 19:39:53 +0300 (Tue, 22 Jun 2004) | 2 lines
Changed paths:
   M /trunk/include/teredo.c
   M /trunk/src/common_pkt.cpp
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/server_pkt.cpp

Some ICC compilation fixes

------------------------------------------------------------------------
r15 | rdenisc | 2004-06-22 19:20:25 +0300 (Tue, 22 Jun 2004) | 2 lines
Changed paths:
   M /trunk/bootstrap
   M /trunk/configure.ac
   M /trunk/src/ipv6-tunnel.cpp

Teredo is not point-to-point

------------------------------------------------------------------------
r14 | rdenisc | 2004-06-21 20:48:55 +0300 (Mon, 21 Jun 2004) | 2 lines
Changed paths:
   M /trunk/include/teredo.c
   M /trunk/include/teredo.h
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/ipv6-tunnel.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h

Various code cleanups

------------------------------------------------------------------------
r13 | rdenisc | 2004-06-20 20:48:07 +0300 (Sun, 20 Jun 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/ipv6-tunnel.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp

Add route to the Teredo prefix via the tunnel.

------------------------------------------------------------------------
r12 | rdenisc | 2004-06-20 16:53:35 +0300 (Sun, 20 Jun 2004) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   A /trunk/THANKS
   M /trunk/configure.ac
   M /trunk/m4/sockaddr.m4
   M /trunk/src/common_pkt.cpp
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/ipv6-tunnel.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/relay.cpp
   M /trunk/src/relay.h
   M /trunk/src/server_pkt.cpp
   M /trunk/src/teredo-udp.cpp
   M /trunk/src/teredo-udp.h

Lots of FreeBSD compilation fixes
(still have to port tunnel driver)
Thanks to Gene Cronk for providing the testing platform

------------------------------------------------------------------------
r11 | rdenisc | 2004-06-20 13:02:41 +0300 (Sun, 20 Jun 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/TODO
   M /trunk/configure.ac
   M /trunk/m4/getopt.m4
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h

No longer require relay IPv6 vaddress specification

------------------------------------------------------------------------
r10 | rdenisc | 2004-06-18 01:52:28 +0300 (Fri, 18 Jun 2004) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/ipv6-tunnel.h
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp

Set MTU, set Teredo prefix.

------------------------------------------------------------------------
r9 | rdenisc | 2004-06-16 11:38:48 +0300 (Wed, 16 Jun 2004) | 2 lines
Changed paths:
   M /trunk/src/miredo.cpp

Obvious bug fixes

------------------------------------------------------------------------
r8 | rdenisc | 2004-06-16 11:38:09 +0300 (Wed, 16 Jun 2004) | 2 lines
Changed paths:
   A /trunk/m4/Makefile.am

Forgot to add this file

------------------------------------------------------------------------
r7 | rdenisc | 2004-06-15 19:09:22 +0300 (Tue, 15 Jun 2004) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/TODO
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/main.c
   M /trunk/src/miredo.cpp
   M /trunk/src/miredo.h
   M /trunk/src/teredo-udp.cpp
   M /trunk/src/teredo-udp.h

- relay address autoconfiguration,
- optional relay(/client) port manual setup

------------------------------------------------------------------------
r6 | rdenisc | 2004-06-15 00:52:32 +0300 (Tue, 15 Jun 2004) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/Makefile.am
   M /trunk/README
   M /trunk/TODO
   A /trunk/bootstrap
   M /trunk/configure.ac
   A /trunk/m4/getopt.m4
   A /trunk/m4/hostname.m4
   M /trunk/m4/sockaddr.m4
   M /trunk/src/Makefile.am
   D /trunk/src/conf.h
   M /trunk/src/ipv6-tunnel.cpp
   M /trunk/src/ipv6-tunnel.h
   A /trunk/src/main.c
   D /trunk/src/main.cpp
   A /trunk/src/miredo.cpp
   A /trunk/src/miredo.h
   M /trunk/src/server_pkt.cpp
   M /trunk/src/server_pkt.h
   M /trunk/src/teredo-udp.cpp
   M /trunk/src/teredo-udp.h

- support for command line options,
- support for non-root user/group,
- bring tunnel interface automatically up.

------------------------------------------------------------------------
r2 | rdenisc | 2004-06-14 17:45:57 +0300 (Mon, 14 Jun 2004) | 2 lines
Changed paths:
   M /trunk
   A /trunk/.cvsignore
   A /trunk/AUTHORS
   A /trunk/ChangeLog
   A /trunk/Makefile.am
   A /trunk/NEWS
   A /trunk/README
   A /trunk/TODO
   A /trunk/admin
   A /trunk/admin/.cvsignore
   A /trunk/configure.ac
   A /trunk/include
   A /trunk/include/.cvsignore
   A /trunk/include/Makefile.am
   A /trunk/include/teredo.c
   A /trunk/include/teredo.h
   A /trunk/m4
   A /trunk/m4/.cvsignore
   A /trunk/m4/sockaddr.m4
   A /trunk/src
   A /trunk/src/.cvsignore
   A /trunk/src/Makefile.am
   A /trunk/src/common_pkt.cpp
   A /trunk/src/common_pkt.h
   A /trunk/src/conf.h
   A /trunk/src/ipv6-tunnel.cpp
   A /trunk/src/ipv6-tunnel.h
   A /trunk/src/main.cpp
   A /trunk/src/relay.cpp
   A /trunk/src/relay.h
   A /trunk/src/server_pkt.cpp
   A /trunk/src/server_pkt.h
   A /trunk/src/teredo-udp.cpp
   A /trunk/src/teredo-udp.h

Initial revision

------------------------------------------------------------------------
r1 | remi | 2004-06-14 17:45:57 +0300 (Mon, 14 Jun 2004) | 1 line
Changed paths:
   A /branches
   A /tags
   A /trunk

New repository initialized by cvs2svn.
------------------------------------------------------------------------

ChangeLog from first internal CVS repository:

2004-05-24  remi

	* src/ipv6-tunnel.cpp:
	- support for FreeBSD tunneling driver (still a stupid compilation
	  error, routing change not implemented).

2004-05-20  remi

	* configure.ac, src/*:
	- FreeBSD compilation fixes, except tunneling driver.
	* src/main.cpp, src/ipv6-tunnel.cpp, src/miredo.cpp:
	- removed useless option to specify tunnel device file,
	- automatically add a route to the tunnel for the Teredo prefix.

2004-05-19  remi

	* src/main.cpp, src/miredo.cpp:
	- automatic interface addres configuration,
	- properly drop additionnal POSIX groups.

2004-05-17  remi

	* src/miredo.cpp, src/ipv6-tunnel.cpp:
	- set Teredo interface MTU to 1280 bytes,
	- setup Teredo interface address,
	- support for changing Teredo's prefix,
	- detach in the background.

2004-05-15  remi

	* src/main.c, src/miredo.cpp:
	- support for changing Teredo relay/client port,
	- automatic relay IPv4 address selection.

2004-05-14  remi

	* src/main.c, configure.ac:
	- support for non-root miredo user/group,
	* src/ipv6-tunnel.cpp:
	- automatically bring tunnel interface up.

2004-05-12  remi

	* main.c:
	- getopt-based command line handling: in particular,
	  support for disabling server and/or relay,
	* miredo.cpp, main.c:
	- split from main.cpp, partial code cleanup.

2004-05-07  remi

	* README:
	- initial english-public version,
	- removed French internal doc.
	* doc/*:
	- removed non-GPL documentation,
	* dump/*:
	- removed possibly ECP-ownership encumbered files.

2004-03-27  remi

	* src/*: forwarding of packet from UDP to IPv6 or from UDP to
	UDP for the server. Server implementation should be complete,
	possibly with bugs.

2004-03-22  remi

	* src/*: 
	- hopefully fixed the handling if the "Cone" flag for client
	qualification => client should now qualify properly with the
	server,
	- (partial) Solaris 8 compilation fix.

2004-03-21  remi

	* src/server_pkt.cpp:
	- sending of Router Advertisement for client "qualification".

2004-03-20  remi

	* src/teredo-udp.cpp:
	- parsing of Teredo packets headers.

2004-03-14  remi

	* src/main.cpp:
	- initial source code (non-working).

2004-03-10  remi

	* configure.ac, Makefile.am:
	- initial CVS repository,
	- initial configure scripts, and Makefiles.

